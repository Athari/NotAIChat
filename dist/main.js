(()=>{"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e){return 0===Object.keys(e).length}function c(t){return t&&o(t.destroy)?t.destroy:e}new Set;let i,r=!1;function u(e,t){e.appendChild(t)}function f(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function m(e){return document.createTextNode(e)}function g(){return m(" ")}function $(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){e.value=null==t?"":t}function b(e){i=e}new Map;const x=[],w=[];let k=[];const _=[],E=Promise.resolve();let S=!1;function T(e){k.push(e)}const M=new Set;let L=0;function j(){if(0!==L)return;const e=i;do{try{for(;L<x.length;){const e=x[L];L++,b(e),C(e.$$)}}catch(e){throw x.length=0,L=0,e}for(b(null),x.length=0,L=0;w.length;)w.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];M.has(t)||(M.add(t),t())}k.length=0}while(x.length);for(;_.length;)_.pop()();S=!1,M.clear(),b(e)}function C(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const O=new Set;const H="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;let A;function N(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];k.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),k=t}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function q(s,a,c,u,f,p,h,m=[-1]){const g=i;b(s);const $=s.$$={fragment:null,ctx:[],props:p,update:e,not_equal:f,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(g?g.$$.context:[])),callbacks:n(),dirty:m,skip_bound:!1,root:a.target||g.$$.root};h&&h($.root);let v=!1;if($.ctx=c?c(s,a.props||{},((e,t,...n)=>{const l=n.length?n[0]:t;return $.ctx&&f($.ctx[e],$.ctx[e]=l)&&(!$.skip_bound&&$.bound[e]&&$.bound[e](l),v&&function(e,t){-1===e.$$.dirty[0]&&(x.push(e),S||(S=!0,E.then(j)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(s,e)),t})):[],$.update(),v=!0,l($.before_update),$.fragment=!!u&&u($.ctx),a.target){if(a.hydrate){r=!0;const e=(k=a.target,Array.from(k.childNodes));$.fragment&&$.fragment.l(e),e.forEach(d)}else $.fragment&&$.fragment.c();a.intro&&((y=s.$$.fragment)&&y.i&&(O.delete(y),y.i(w))),function(e,n,s,a){const{fragment:c,after_update:i}=e.$$;c&&c.m(n,s),a||T((()=>{const n=e.$$.on_mount.map(t).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...n):l(n),e.$$.on_mount=[]})),i.forEach(T)}(s,a.target,a.anchor,a.customElement),r=!1,j()}var y,w,k;b(g)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(A=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(o);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){l(this.$$.on_disconnect)}$destroy(){N(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){this.$$set&&!a(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class F{$destroy(){N(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){this.$$set&&!a(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const{document:R}=H;function D(e,t,n){const l=e.slice();return l[34]=t[n],l[35]=t,l[36]=n,l}function I(e,t,n){const l=e.slice();return l[37]=t[n],l[38]=t,l[39]=n,l}function J(e){let t,n,o,s,a,c,i,r,p,m,b,x,w,k,_;function E(){e[17].call(a,e[38],e[39])}function S(){e[18].call(i,e[38],e[39])}function T(){e[19].call(p,e[38],e[39])}function M(...t){return e[20](e[39],...t)}return w=function(e){let t;return{p(...n){t=n,t.forEach((t=>e.push(t)))},r(){t.forEach((t=>e.splice(e.indexOf(t),1)))}}}(e[16][0]),{c(){t=h("div"),n=h("input"),s=g(),a=h("input"),c=g(),i=h("input"),r=g(),p=h("input"),m=g(),b=h("button"),b.innerHTML='<i class="fa fa-trash-o svelte-elcufp"></i>',x=g(),v(n,"type","radio"),v(n,"name","selectedEndpoint"),n.__value=o=e[39],n.value=n.__value,v(n,"title","Set endpoint as current"),v(a,"type","text"),v(a,"placeholder","Display name"),v(a,"class","svelte-elcufp"),v(i,"type","text"),v(i,"placeholder","API Key"),v(i,"class","svelte-elcufp"),v(p,"type","text"),v(p,"placeholder","Endpoint URL"),v(p,"class","svelte-elcufp"),v(b,"title","Delete endpoint"),v(b,"class","svelte-elcufp"),v(t,"class","endpoint svelte-elcufp"),w.p(n)},m(l,o){f(l,t,o),u(t,n),n.checked=n.__value===e[2],u(t,s),u(t,a),y(a,e[37].name),u(t,c),u(t,i),y(i,e[37].key),u(t,r),u(t,p),y(p,e[37].url),u(t,m),u(t,b),u(t,x),k||(_=[$(n,"change",e[15]),$(a,"input",E),$(i,"input",S),$(p,"input",T),$(b,"click",M)],k=!0)},p(t,l){e=t,5&l[0]&&(n.checked=n.__value===e[2]),1&l[0]&&a.value!==e[37].name&&y(a,e[37].name),1&l[0]&&i.value!==e[37].key&&y(i,e[37].key),1&l[0]&&p.value!==e[37].url&&y(p,e[37].url)},d(e){e&&d(t),w.r(),k=!1,l(_)}}}function P(e){let t,n,o,s,a,i,r,p,m,b,x,w,k,_,E;function S(){e[21].call(n,e[35],e[36])}function T(...t){return e[22](e[36],...t)}function M(...t){return e[23](e[36],...t)}function L(...t){return e[24](e[36],...t)}return{c(){t=h("div"),n=h("textarea"),s=g(),a=h("button"),a.innerHTML='<i class="fa fa-arrow-up svelte-elcufp"></i>',r=g(),p=h("button"),m=h("i"),x=g(),w=h("button"),w.innerHTML='<i class="fa fa-trash-o svelte-elcufp"></i>',k=g(),v(n,"autocomplete","false"),v(n,"class","svelte-elcufp"),a.disabled=i=e[36]<=0,v(a,"title","Move message up"),v(a,"class","svelte-elcufp"),v(m,"class","fa fa-arrow-down svelte-elcufp"),p.disabled=b=e[36]>=e[1].length-1,v(p,"title","Move message down"),v(p,"class","svelte-elcufp"),v(w,"title","Delete message"),v(w,"class","svelte-elcufp"),v(t,"class","message svelte-elcufp")},m(l,i){f(l,t,i),u(t,n),y(n,e[34].text),u(t,s),u(t,a),u(t,r),u(t,p),u(p,m),u(t,x),u(t,w),u(t,k),_||(E=[$(n,"input",S),c(o=K.call(null,n)),$(a,"click",T),$(p,"click",M),$(w,"click",L)],_=!0)},p(t,l){e=t,2&l[0]&&y(n,e[34].text),2&l[0]&&b!==(b=e[36]>=e[1].length-1)&&(p.disabled=b)},d(e){e&&d(t),_=!1,l(E)}}}function z(t){let n,o,s,a,i,r,b,x,w,k,_,E,S,T,M,L,j,C,O,H,A,N,q,F,z,B,W,U,Y,G,Q,V,X,Z,ee=t[0],te=[];for(let e=0;e<ee.length;e+=1)te[e]=J(I(t,ee,e));let ne=t[1],le=[];for(let e=0;e<ne.length;e+=1)le[e]=P(D(t,ne,e));return{c(){n=h("link"),o=g(),s=h("div"),a=h("details"),i=h("summary"),i.textContent="Options",r=g(),b=h("div"),x=h("h3"),w=m("Scale Endpoints "),k=h("button"),k.innerHTML='<i class="fa fa-plus svelte-elcufp"></i>',_=g();for(let e=0;e<te.length;e+=1)te[e].c();E=g(),S=h("div");for(let e=0;e<le.length;e+=1)le[e].c();T=g(),M=h("div"),L=h("textarea"),C=g(),O=h("button"),H=h("i"),A=g(),N=h("button"),q=h("i"),z=g(),B=h("button"),W=h("i"),U=g(),Y=h("button"),Y.innerHTML='<i class="fa fa-clipboard fa-lg svelte-elcufp"></i>',G=g(),Q=h("p"),V=m(t[5]),v(n,"rel","stylesheet"),v(n,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),v(i,"class","svelte-elcufp"),v(k,"title","Add endpoint"),v(k,"class","svelte-elcufp"),v(x,"class","svelte-elcufp"),v(b,"class","endpoints svelte-elcufp"),a.open=!0,v(a,"class","svelte-elcufp"),v(S,"class","messages svelte-elcufp"),L.disabled=t[4],v(L,"autocomplete","false"),v(L,"class","svelte-elcufp"),v(H,"class","fa fa-paper-plane svelte-elcufp"),O.disabled=t[4],v(O,"title","Send message"),v(O,"class","svelte-elcufp"),v(q,"class","fa fa-ban svelte-elcufp"),N.disabled=F=!t[4],v(N,"title","Cancel sending"),v(N,"class","svelte-elcufp"),v(W,"class","fa fa-plus svelte-elcufp"),B.disabled=t[4],v(B,"title","Add message without sending"),v(B,"class","svelte-elcufp"),v(Y,"title","Copy messages to clipboard"),v(Y,"class","svelte-elcufp"),v(M,"class","message new-message svelte-elcufp"),v(Q,"class","status svelte-elcufp"),v(s,"class","app svelte-elcufp")},m(e,l){u(R.head,n),f(e,o,l),f(e,s,l),u(s,a),u(a,i),u(a,r),u(a,b),u(b,x),u(x,w),u(x,k),u(b,_);for(let e=0;e<te.length;e+=1)te[e]&&te[e].m(b,null);u(s,E),u(s,S);for(let e=0;e<le.length;e+=1)le[e]&&le[e].m(S,null);u(s,T),u(s,M),u(M,L),y(L,t[3]),u(M,C),u(M,O),u(O,H),u(M,A),u(M,N),u(N,q),u(M,z),u(M,B),u(B,W),u(M,U),u(M,Y),u(s,G),u(s,Q),u(Q,V),X||(Z=[$(k,"click",t[12]),$(L,"input",t[25]),c(j=K.call(null,L)),$(O,"click",t[26]),$(N,"click",t[7]),$(B,"click",t[27]),$(Y,"click",t[11])],X=!0)},p(e,t){if(8197&t[0]){let n;for(ee=e[0],n=0;n<ee.length;n+=1){const l=I(e,ee,n);te[n]?te[n].p(l,t):(te[n]=J(l),te[n].c(),te[n].m(b,null))}for(;n<te.length;n+=1)te[n].d(1);te.length=ee.length}if(1538&t[0]){let n;for(ne=e[1],n=0;n<ne.length;n+=1){const l=D(e,ne,n);le[n]?le[n].p(l,t):(le[n]=P(l),le[n].c(),le[n].m(S,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=ne.length}var n,l;16&t[0]&&(L.disabled=e[4]),8&t[0]&&y(L,e[3]),16&t[0]&&(O.disabled=e[4]),16&t[0]&&F!==(F=!e[4])&&(N.disabled=F),16&t[0]&&(B.disabled=e[4]),32&t[0]&&(n=V,l=""+(l=e[5]),n.wholeText!==l&&(n.data=l))},i:e,o:e,d(e){d(n),e&&d(o),e&&d(s),p(te,e),p(le,e),X=!1,l(Z)}}}let B=20;function W({target:e}){e.style.height="0",e.style.height=`${Math.max(e.scrollHeight,B)}px`}function K(e){return W({target:e}),e.addEventListener("input",W),{destroy:()=>e.removeEventListener("input",W)}}function U(e,t,n){let l,o=[],s=0,a=[],c="",r=!1,u="",f=null,d=!1;var p;function h(e,...t){console.log(e,...t),n(5,u=e)}function m(e,t){try{return JSON.parse(localStorage.getItem(e))}catch(n){return h(`Warning: Failed to load ${e} from localStorage: ${n.message}`,n),t}}function g(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){h(`Warning: Failed to save ${e} to localStorage: ${t.message}`,t)}}function $(){return(Math.max(...a.map((e=>e.id)))??0)+1}async function v(e){n(4,r=!0),l=performance.now();try{const t=o[s];if(null==t)throw new Error("No endpoint selected");f=new AbortController;const c=await fetch(t.url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+t.key},body:JSON.stringify({input:{input:a.map((e=>e.text)).join("\n")}}),signal:f.signal}),i=`${(performance.now()-l).toFixed(2)} ms`;if(!c.ok)throw new Error(`${c.status} ${c.statusText}`);{const t=await c.json();if(null!=t.error)h(`Received error in ${i}: ${t.error.code}: ${t.error.message}`);else if(null!=t.output){const l=$();y({target:e.target}),n(1,a=[...a,{id:l+1,text:t.output}]),h(`Received message in ${i}`,t)}}}catch(e){h(`Error: ${e.message}`,e)}n(4,r=!1)}function y(e){""!=c&&(n(1,a=[...a,{id:$(),text:c}]),n(3,c=""),setTimeout((()=>W({target:e.target.closest(".message").querySelector("textarea")})),1))}function b(e){n(1,a=a.filter(((t,n)=>n!==e)))}function x(e,t){void 0!==a[e]&&void 0!==a[t]&&(n(1,[a[e],a[t]]=[a[t],a[e]],a),n(1,a=[...a]))}function w(e){n(0,o=o.filter(((t,n)=>n!==e))),void 0===o[s]&&n(2,s=null)}return p=()=>{n(14,d=!0),"about:"==location.protocol&&(document.querySelector("head style").innerHTML=""),n(1,a=m("messages",[{id:1,text:"Hello"},{id:2,text:"This is a svelte app"},{id:3,text:"You can edit and delete messages"}])),n(0,o=m("endpoints",[{name:"max=512 | t=1.0",key:"clfe7qtja00j4ux1arpu3trid",url:"https://dashboard.scale.com/spellbook/api/v2/deploy/uj83bix"}])),h("Loaded data")},function(){if(!i)throw new Error("Function called outside component initialization");return i}().$$.on_mount.push(p),e.$$.update=()=>{16387&e.$$.dirty[0]&&d&&(g("messages",a),g("endpoints",o),h("Saved data"))},[o,a,s,c,r,u,v,function(){null!=f&&(n(4,r=!1),info="Receiving message cancelled",f.abort())},y,b,x,async function(){try{await navigator.clipboard.writeText(a.map((e=>e.text)).join("\n")),h("Messages copied to clipboard")}catch(e){h(`Failed to copy messages to clipboard: ${e.message}`,e)}},function(e){n(0,o=[...o,{key:"",url:""}])},w,d,function(){s=this.__value,n(2,s)},[[]],function(e,t){e[t].name=this.value,n(0,o)},function(e,t){e[t].key=this.value,n(0,o)},function(e,t){e[t].url=this.value,n(0,o)},(e,t)=>w(e),function(e,t){e[t].text=this.value,n(1,a)},(e,t)=>x(e,e-1),(e,t)=>x(e,e+1),(e,t)=>b(e),function(){c=this.value,n(3,c)},e=>v(e),e=>y(e)]}new class extends F{constructor(e){super(),q(this,e,U,z,s,{},null,[-1,-1])}}({target:document.querySelector("#root")})})();