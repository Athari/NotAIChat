<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>NotAIChat</title><style>:root{--button-width:38px;--gap:8px;color-scheme:dark;overflow-wrap:break-word;font:15px/1.2 Segoe UI, sans-serif}:root .a.a,:root .a.a::before,:root .a.a::after{box-sizing:border-box}.app.a.a{border:solid 1px #666;background:#111;padding:8px;border-radius:8px}details.a.a{border:solid 1px #666;background:#222;padding:8px;margin:0 0 8px 0;border-radius:8px}details.a>details.a{margin:8px 0 0 0}details.a>summary.a{cursor:pointer}details[open].a>summary.a{padding:0 0 8px 0;font-weight:700}h3.a.a{font:inherit;font-weight:500;font-size:1.2em;margin:2px 0}header.a.a{font:inherit;font-weight:400;margin:0}.messages.a.a,.endpoints.a.a,.options.a.a{display:flex;flex-flow:column;gap:8px}.options.a.a{flex-flow:row wrap;gap:8px 24px}.message.a.a,.endpoint.a.a,.option.a.a,.buttons.a.a{display:flex;flex-flow:row;align-items:stretch;gap:8px}.message.a.a{align-items:flex-start}.message.a input[type=text][list].a{flex:0 0 120px}.endpoint.a.a{flex-flow:row wrap}.option.a.a{width:400px}.option.a label.a{flex:1}.option-long.a.a{display:flex;flex-flow:row wrap;gap:8px;align-items:center}.option-long.a button.a{width:auto;padding:0 12px}.a:is(.endpoint) .buttons.a{padding:calc(1lh + 4px) 0 0 0}.new-message.a.a{margin:12px 0 0 0}.new-message.a .buttons.a{flex:0 0 calc((var(--button-width) + var(--gap) + 0px) * 3 - var(--gap));flex-flow:row wrap}label.over.a.a{display:flex;flex-flow:column;flex:1 250px}label.over.a b.a{margin:0 0 4px 0;font-weight:inherit}label.side.a.a{display:flex;flex-flow:row;align-items:center;flex:0;gap:8px;padding:calc(1lh + 4px) 0 0 0}label.side.a b.a{font-weight:inherit}label.side.a input.a:is([type=checkbox], [type=radio]){width:20px;min-height:20px;padding:0;margin:0}textarea.a.a,input[type=text].a.a,select.a.a{flex:1;border-style:solid;border-width:1px;border-radius:4px;padding:2px 6px;font:inherit;resize:none;overflow:hidden}input[type=radio].a.a{align-self:stretch}textarea.a.a:hover{overflow-y:overlay}.status.a.a{display:flex;flex-flow:row;opacity:0.6}.status.a .message.a{flex:1}.status.a .time.a{white-space:nowrap}button.a.a{height:26px;width:var(--button-width);font-size:1em}p.a.a,ul.a.a{margin:4px 0}@media(max-width: 740px){:root.d-compact .buttons.a.a{flex-flow:column}:root.d-compact .endpoint.a.a{flex-flow:row wrap}:root.d-compact .endpoint.a input[type=text].a{flex:200px 1}}@media(max-width: 480px){:root.d-compact .option.a.a{width:100%}}:root:is(.d-mobile, .d-access){--button-width:48px;line-height:1.4}:root:is(.d-mobile, .d-access) button.a.a{height:32px}:root:is(.d-mobile, .d-access) textarea.a.a,:root:is(.d-mobile, .d-access) input[type=text].a.a,:root:is(.d-mobile, .d-access) select.a.a{padding:4px 8px}:root:is(.d-mobile, .d-access) p.a.a,:root:is(.d-mobile, .d-access) ul.a.a{margin:10px 0}:root:is(.d-mobile, .d-access) li.a.a{margin:6px 0}@media(max-width: 840px){:root:is(.d-mobile, .d-access) .buttons.a.a{flex-flow:column}:root:is(.d-mobile, .d-access) .endpoint.a.a{flex-flow:row wrap}:root:is(.d-mobile, .d-access) .endpoint.a input[type=text].a{flex:260px 1}:root:is(.d-mobile, .d-access) .new-message.a .buttons.a{flex:0 0 var(--button-width)}}@media(max-width: 500px){:root:is(.d-mobile, .d-access) .option.a.a{width:100%}}:root.d-access{--button-width:52px;font-size:17px;line-height:1.6}:root.d-access button.a.a{height:38px}</style></head><body><div id="root"></div><script>(()=>{var e={362:(e,t)=>{"use strict";var n;n={value:true};var r="far";var s="copy";var o=512;var i=512;var a=[];var l="f0c5";var c="M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H304v64c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V224c0-8.8 7.2-16 16-16h64V160H64z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.kZ=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},338:(e,t)=>{"use strict";var n;n={value:true};var r="far";var s="floppy-disk";var o=448;var i=512;var a=[128190,128426,"save"];var l="f0c7";var c="M48 96V416c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16V170.5c0-4.2-1.7-8.3-4.7-11.3l33.9-33.9c12 12 18.7 28.3 18.7 45.3V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96C0 60.7 28.7 32 64 32H309.5c17 0 33.3 6.7 45.3 18.7l74.5 74.5-33.9 33.9L320.8 84.7c-.3-.3-.5-.5-.8-.8V184c0 13.3-10.7 24-24 24H104c-13.3 0-24-10.7-24-24V80H64c-8.8 0-16 7.2-16 16zm80-16v80H272V80H128zm32 240a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.Ed=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},199:(e,t)=>{"use strict";var n;n={value:true};var r="far";var s="folder-open";var o=576;var i=512;var a=[128194,128449,61717];var l="f07c";var c="M384 480h48c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1 .1-32.1S555.5 224 544 224H144c-11.4 0-21.9 6-27.6 15.9L48 357.1V96c0-8.8 7.2-16 16-16H181.5c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8H416c8.8 0 16 7.2 16 16v32h48V160c0-35.3-28.7-64-64-64H298.5c-17 0-33.3-6.7-45.3-18.7L226.7 50.7c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H87.7 384z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.cC=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},494:(e,t)=>{"use strict";var n;n={value:true};var r="far";var s="rocket-launch";var o=512;var i=512;var a=[128640];var l="e027";var c="M197.9 253.9c12.9 6.4 24.7 14.8 35 25.2s18.8 22.2 25.2 35c105.8-30 156.7-79.5 181.5-126c25-46.8 27.3-97.6 22-137.7c-40.1-5.3-90.9-3-137.7 22c-46.5 24.8-96 75.8-126 181.5zM384 312.1v82.2c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-114.7c0-22.6-9-44.3-25-60.3s-37.7-25-60.3-25H24c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3h82.2C281.7-3.8 408.8-8.5 483.9 5.3c11.6 2.1 20.7 11.2 22.8 22.8c13.8 75.1 9.1 202.2-122.7 284zM28.3 511.9c-16 .4-28.6-12.2-28.2-28.2C1 446 7.7 379.7 42 345.5c34.4-34.4 90.1-34.4 124.5 0s34.4 90.1 0 124.5C132.3 504.3 66 511 28.3 511.9zm50.2-64.5c12.8-.7 31.2-3.7 41.3-13.7c11.4-11.4 11.4-30 0-41.4s-30-11.4-41.4 0c-10.1 10.1-13 28.5-13.7 41.3c-.5 8 5.9 14.3 13.9 13.9zM328 144a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.XE=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},55:(e,t)=>{"use strict";var n;n={value:true};var r="far";var s="share-nodes";var o=448;var i=512;var a=["share-alt"];var l="f1e0";var c="M448 128C448 181 405 224 352 224C323.1 224 297.2 211.2 279.6 191L189.9 235.9C191.3 242.4 191.1 249.1 191.1 255.1C191.1 262.9 191.3 269.6 189.9 276.1L279.6 320.1C297.2 300.8 323.1 287.1 352 287.1C405 287.1 448 330.1 448 384C448 437 405 480 352 480C298.1 480 256 437 256 384C256 377.1 256.7 370.4 258.1 363.9L168.4 319C150.8 339.2 124.9 352 96 352C42.98 352 0 309 0 255.1C0 202.1 42.98 159.1 96 159.1C124.9 159.1 150.8 172.8 168.4 192.1L258.1 148.1C256.7 141.6 256 134.9 256 128C256 74.98 298.1 32 352 32C405 32 448 74.98 448 128H448zM95.1 304C122.5 304 143.1 282.5 143.1 256C143.1 229.5 122.5 208 95.1 208C69.49 208 47.1 229.5 47.1 256C47.1 282.5 69.49 304 95.1 304zM352 80C325.5 80 304 101.5 304 128C304 154.5 325.5 176 352 176C378.5 176 400 154.5 400 128C400 101.5 378.5 80 352 80zM352 432C378.5 432 400 410.5 400 384C400 357.5 378.5 336 352 336C325.5 336 304 357.5 304 384C304 410.5 325.5 432 352 432z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.M6=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},221:(e,t)=>{"use strict";var n;n={value:true};var r="far";var s="turtle";var o=576;var i=512;var a=[128034];var l="f726";var c="M336 240V208c0-70.7-57.3-128-128-128S80 137.3 80 208v32H336zm48-32v41.2c0 21.4-17.4 38.8-38.8 38.8H70.8C49.4 288 32 270.6 32 249.2V208c0-97.2 78.8-176 176-176s176 78.8 176 176zm96 80c-8.3 0-16.3-1.6-23.6-4.5C440.3 328 400.4 361 352 367v1 72c0 22.1-17.9 40-40 40H264c-22.1 0-40-17.9-40-40V368H192v72c0 22.1-17.9 40-40 40H104c-22.1 0-40-17.9-40-40V368H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H64h48 32 48 32 48 32 32c44.2 0 80-35.8 80-80V224 192 176c0-35.3 28.7-64 64-64c53 0 96 43 96 96v16c0 35.3-28.7 64-64 64H480zM272 368v64h32V368H272zm-160 0v64h32V368H112zM496 224a16 16 0 1 0 0-32 16 16 0 1 0 0 32z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.ct=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},282:(e,t)=>{"use strict";var n;n={value:true};var r="fas";var s="arrow-down";var o=384;var i=512;var a=[8595];var l="f063";var c="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.r5=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},634:(e,t)=>{"use strict";var n;n={value:true};var r="fas";var s="arrow-up";var o=384;var i=512;var a=[8593];var l="f062";var c="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.FP=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},232:(e,t)=>{"use strict";var n;n={value:true};var r="fas";var s="ban";var o=512;var i=512;var a=[128683,"cancel"];var l="f05e";var c="M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.gP=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},742:(e,t)=>{"use strict";var n;n={value:true};var r="fas";var s="paper-plane";var o=512;var i=512;var a=[61913];var l="f1d8";var c="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.XC=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},505:(e,t)=>{"use strict";var n;n={value:true};var r="fas";var s="plus-large";var o=512;var i=512;var a=[];var l="e59e";var c="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 192H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H224V480c0 17.7 14.3 32 32 32s32-14.3 32-32V288l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-192 0 0-192z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.RL=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},948:(e,t)=>{"use strict";var n;n={value:true};var r="fas";var s="xmark-large";var o=448;var i=512;var a=[];var l="e59b";var c="M393.4 41.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3L269.3 256 438.6 425.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 301.3 54.6 470.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0L224 210.7 393.4 41.4z";t.DF={prefix:r,iconName:s,icon:[o,i,a,l,c]};t.FG=t.DF;n=r;n=s;n=o;n=i;n=a;n=l;n=c;n=a},34:(e,t,n)=>{"use strict";var r=n(774);var s=n(513);var o=s(r("String.prototype.indexOf"));e.exports=function e(t,n){var i=r(t,!!n);if(typeof i==="function"&&o(t,".prototype.")>-1){return s(i)}return i}},513:(e,t,n)=>{"use strict";var r=n(539);var s=n(774);var o=s("%Function.prototype.apply%");var i=s("%Function.prototype.call%");var a=s("%Reflect.apply%",true)||r.call(i,o);var l=s("%Object.getOwnPropertyDescriptor%",true);var c=s("%Object.defineProperty%",true);var u=s("%Math.max%");if(c){try{c({},"a",{value:1})}catch(e){c=null}}e.exports=function e(t){var n=a(r,i,arguments);if(l&&c){var s=l(n,"length");if(s.configurable){c(n,"length",{value:1+u(0,t.length-(arguments.length-1))})}}return n};var f=function e(){return a(r,o,arguments)};if(c){c(e.exports,"apply",{value:f})}else{e.exports.apply=f}},595:e=>{"use strict";var t="Function.prototype.bind called on incompatible ";var n=Array.prototype.slice;var r=Object.prototype.toString;var s="[object Function]";e.exports=function e(o){var i=this;if(typeof i!=="function"||r.call(i)!==s){throw new TypeError(t+i)}var a=n.call(arguments,1);var l;var c=function(){if(this instanceof l){var e=i.apply(this,a.concat(n.call(arguments)));if(Object(e)===e){return e}return this}else{return i.apply(o,a.concat(n.call(arguments)))}};var u=Math.max(0,i.length-a.length);var f=[];for(var d=0;d<u;d++){f.push("$"+d)}l=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(c);if(i.prototype){var p=function e(){};p.prototype=i.prototype;l.prototype=new p;p.prototype=null}return l}},539:(e,t,n)=>{"use strict";var r=n(595);e.exports=Function.prototype.bind||r},774:(e,t,n)=>{"use strict";var r;var s=SyntaxError;var o=Function;var i=TypeError;var a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}};var l=Object.getOwnPropertyDescriptor;if(l){try{l({},"")}catch(e){l=null}}var c=function(){throw new i};var u=l?function(){try{arguments.callee;return c}catch(e){try{return l(arguments,"callee").get}catch(e){return c}}}():c;var f=n(680)();var d=Object.getPrototypeOf||function(e){return e.__proto__};var p={};var h=typeof Uint8Array==="undefined"?r:d(Uint8Array);var y={"%AggregateError%":typeof AggregateError==="undefined"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?r:ArrayBuffer,"%ArrayIteratorPrototype%":f?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":typeof Atomics==="undefined"?r:Atomics,"%BigInt%":typeof BigInt==="undefined"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array==="undefined"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array==="undefined"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?r:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":typeof Int8Array==="undefined"?r:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?r:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?d(d([][Symbol.iterator]())):r,"%JSON%":typeof JSON==="object"?JSON:r,"%Map%":typeof Map==="undefined"?r:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!f?r:d((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?r:Promise,"%Proxy%":typeof Proxy==="undefined"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?r:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!f?r:d((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?d(""[Symbol.iterator]()):r,"%Symbol%":f?Symbol:r,"%SyntaxError%":s,"%ThrowTypeError%":u,"%TypedArray%":h,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array==="undefined"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?r:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?r:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?r:WeakSet};try{null.error}catch(e){var m=d(d(e));y["%Error.prototype%"]=m}var g=function e(t){var n;if(t==="%AsyncFunction%"){n=a("async function () {}")}else if(t==="%GeneratorFunction%"){n=a("function* () {}")}else if(t==="%AsyncGeneratorFunction%"){n=a("async function* () {}")}else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");if(r){n=r.prototype}}else if(t==="%AsyncIteratorPrototype%"){var s=e("%AsyncGenerator%");if(s){n=d(s.prototype)}}y[t]=n;return n};var v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var b=n(539);var w=n(400);var x=b.call(Function.call,Array.prototype.concat);var $=b.call(Function.apply,Array.prototype.splice);var _=b.call(Function.call,String.prototype.replace);var S=b.call(Function.call,String.prototype.slice);var k=b.call(Function.call,RegExp.prototype.exec);var E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var A=/\\(\\)?/g;var P=function e(t){var n=S(t,0,1);var r=S(t,-1);if(n==="%"&&r!=="%"){throw new s("invalid intrinsic syntax, expected closing `%`")}else if(r==="%"&&n!=="%"){throw new s("invalid intrinsic syntax, expected opening `%`")}var o=[];_(t,E,(function(e,t,n,r){o[o.length]=n?_(r,A,"$1"):t||e}));return o};var C=function e(t,n){var r=t;var o;if(w(v,r)){o=v[r];r="%"+o[0]+"%"}if(w(y,r)){var a=y[r];if(a===p){a=g(r)}if(typeof a==="undefined"&&!n){throw new i("intrinsic "+t+" exists, but is not available. Please file an issue!")}return{alias:o,name:r,value:a}}throw new s("intrinsic "+t+" does not exist!")};e.exports=function e(t,n){if(typeof t!=="string"||t.length===0){throw new i("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof n!=="boolean"){throw new i('"allowMissing" argument must be a boolean')}if(k(/^%?[^%]*%?$/,t)===null){throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name")}var o=P(t);var a=o.length>0?o[0]:"";var c=C("%"+a+"%",n);var u=c.name;var f=c.value;var d=false;var p=c.alias;if(p){a=p[0];$(o,x([0,1],p))}for(var h=1,m=true;h<o.length;h+=1){var g=o[h];var v=S(g,0,1);var b=S(g,-1);if((v==='"'||v==="'"||v==="`"||(b==='"'||b==="'"||b==="`"))&&v!==b){throw new s("property names with quotes must have matching quotes")}if(g==="constructor"||!m){d=true}a+="."+g;u="%"+a+"%";if(w(y,u)){f=y[u]}else if(f!=null){if(!(g in f)){if(!n){throw new i("base intrinsic for "+t+" exists, but the property is not available.")}return void r}if(l&&h+1>=o.length){var _=l(f,g);m=!!_;if(m&&"get"in _&&!("originalValue"in _.get)){f=_.get}else{f=f[g]}}else{m=w(f,g);f=f[g]}if(m&&!d){y[u]=f}}}return f}},680:(e,t,n)=>{"use strict";var r=typeof Symbol!=="undefined"&&Symbol;var s=n(873);e.exports=function e(){if(typeof r!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof r("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return s()}},873:e=>{"use strict";e.exports=function e(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var t={};var n=Symbol("test");var r=Object(n);if(typeof n==="string"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}var s=42;t[n]=s;for(n in t){return false}if(typeof Object.keys==="function"&&Object.keys(t).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(t).length!==0){return false}var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==n){return false}if(!Object.prototype.propertyIsEnumerable.call(t,n)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var i=Object.getOwnPropertyDescriptor(t,n);if(i.value!==s||i.enumerable!==true){return false}}return true}},400:(e,t,n)=>{"use strict";var r=n(539);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},438:(e,t,n)=>{var r=typeof Map==="function"&&Map.prototype;var s=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;var o=r&&s&&typeof s.get==="function"?s.get:null;var i=r&&Map.prototype.forEach;var a=typeof Set==="function"&&Set.prototype;var l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;var c=a&&l&&typeof l.get==="function"?l.get:null;var u=a&&Set.prototype.forEach;var f=typeof WeakMap==="function"&&WeakMap.prototype;var d=f?WeakMap.prototype.has:null;var p=typeof WeakSet==="function"&&WeakSet.prototype;var h=p?WeakSet.prototype.has:null;var y=typeof WeakRef==="function"&&WeakRef.prototype;var m=y?WeakRef.prototype.deref:null;var g=Boolean.prototype.valueOf;var v=Object.prototype.toString;var b=Function.prototype.toString;var w=String.prototype.match;var x=String.prototype.slice;var $=String.prototype.replace;var _=String.prototype.toUpperCase;var S=String.prototype.toLowerCase;var k=RegExp.prototype.test;var E=Array.prototype.concat;var A=Array.prototype.join;var P=Array.prototype.slice;var C=Math.floor;var O=typeof BigInt==="function"?BigInt.prototype.valueOf:null;var R=Object.getOwnPropertySymbols;var F=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null;var I=typeof Symbol==="function"&&typeof Symbol.iterator==="object";var j=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===I?"object":"symbol")?Symbol.toStringTag:null;var M=Object.prototype.propertyIsEnumerable;var T=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function N(e,t){if(e===Infinity||e===-Infinity||e!==e||e&&e>-1e3&&e<1e3||k.call(/e/,t)){return t}var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e==="number"){var r=e<0?-C(-e):C(e);if(r!==e){var s=String(r);var o=x.call(t,s.length+1);return $.call(s,n,"$&_")+"."+$.call($.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $.call(t,n,"$&_")}var L=n(989);var D=L.custom;var U=K(D)?D:null;e.exports=function e(t,n,r,s){var a=n||{};if(Z(a,"quoteStyle")&&(a.quoteStyle!=="single"&&a.quoteStyle!=="double")){throw new TypeError('option "quoteStyle" must be "single" or "double"')}if(Z(a,"maxStringLength")&&(typeof a.maxStringLength==="number"?a.maxStringLength<0&&a.maxStringLength!==Infinity:a.maxStringLength!==null)){throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`')}var l=Z(a,"customInspect")?a.customInspect:true;if(typeof l!=="boolean"&&l!=="symbol"){throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`")}if(Z(a,"indent")&&a.indent!==null&&a.indent!=="\t"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0)){throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`')}if(Z(a,"numericSeparator")&&typeof a.numericSeparator!=="boolean"){throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`')}var f=a.numericSeparator;if(typeof t==="undefined"){return"undefined"}if(t===null){return"null"}if(typeof t==="boolean"){return t?"true":"false"}if(typeof t==="string"){return ce(t,a)}if(typeof t==="number"){if(t===0){return Infinity/t>0?"0":"-0"}var d=String(t);return f?N(t,d):d}if(typeof t==="bigint"){var p=String(t)+"n";return f?N(t,p):p}var h=typeof a.depth==="undefined"?5:a.depth;if(typeof r==="undefined"){r=0}if(r>=h&&h>0&&typeof t==="object"){return H(t)?"[Array]":"[Object]"}var y=ye(a,r);if(typeof s==="undefined"){s=[]}else if(ne(s,t)>=0){return"[Circular]"}function m(t,n,o){if(n){s=P.call(s);s.push(n)}if(o){var i={depth:a.depth};if(Z(a,"quoteStyle")){i.quoteStyle=a.quoteStyle}return e(t,i,r+1,s)}return e(t,a,r+1,s)}if(typeof t==="function"&&!X(t)){var v=te(t);var b=ge(t,m);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(b.length>0?" { "+A.call(b,", ")+" }":"")}if(K(t)){var w=I?$.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):F.call(t);return typeof t==="object"&&!I?fe(w):w}if(le(t)){var _="<"+S.call(String(t.nodeName));var k=t.attributes||[];for(var C=0;C<k.length;C++){_+=" "+k[C].name+"="+B(q(k[C].value),"double",a)}_+=">";if(t.childNodes&&t.childNodes.length){_+="..."}_+="</"+S.call(String(t.nodeName))+">";return _}if(H(t)){if(t.length===0){return"[]"}var R=ge(t,m);if(y&&!he(R)){return"["+me(R,y)+"]"}return"[ "+A.call(R,", ")+" ]"}if(z(t)){var D=ge(t,m);if(!("cause"in Error.prototype)&&"cause"in t&&!M.call(t,"cause")){return"{ ["+String(t)+"] "+A.call(E.call("[cause]: "+m(t.cause),D),", ")+" }"}if(D.length===0){return"["+String(t)+"]"}return"{ ["+String(t)+"] "+A.call(D,", ")+" }"}if(typeof t==="object"&&l){if(U&&typeof t[U]==="function"&&L){return L(t,{depth:h-r})}else if(l!=="symbol"&&typeof t.inspect==="function"){return t.inspect()}}if(re(t)){var Y=[];if(i){i.call(t,(function(e,n){Y.push(m(n,t,true)+" => "+m(e,t))}))}return pe("Map",o.call(t),Y,y)}if(ie(t)){var ue=[];if(u){u.call(t,(function(e){ue.push(m(e,t))}))}return pe("Set",c.call(t),ue,y)}if(se(t)){return de("WeakMap")}if(ae(t)){return de("WeakSet")}if(oe(t)){return de("WeakRef")}if(J(t)){return fe(m(Number(t)))}if(Q(t)){return fe(m(O.call(t)))}if(G(t)){return fe(g.call(t))}if(V(t)){return fe(m(String(t)))}if(!W(t)&&!X(t)){var ve=ge(t,m);var be=T?T(t)===Object.prototype:t instanceof Object||t.constructor===Object;var we=t instanceof Object?"":"null prototype";var xe=!be&&j&&Object(t)===t&&j in t?x.call(ee(t),8,-1):we?"Object":"";var $e=be||typeof t.constructor!=="function"?"":t.constructor.name?t.constructor.name+" ":"";var _e=$e+(xe||we?"["+A.call(E.call([],xe||[],we||[]),": ")+"] ":"");if(ve.length===0){return _e+"{}"}if(y){return _e+"{"+me(ve,y)+"}"}return _e+"{ "+A.call(ve,", ")+" }"}return String(t)};function B(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function q(e){return $.call(String(e),/"/g,"&quot;")}function H(e){return ee(e)==="[object Array]"&&(!j||!(typeof e==="object"&&j in e))}function W(e){return ee(e)==="[object Date]"&&(!j||!(typeof e==="object"&&j in e))}function X(e){return ee(e)==="[object RegExp]"&&(!j||!(typeof e==="object"&&j in e))}function z(e){return ee(e)==="[object Error]"&&(!j||!(typeof e==="object"&&j in e))}function V(e){return ee(e)==="[object String]"&&(!j||!(typeof e==="object"&&j in e))}function J(e){return ee(e)==="[object Number]"&&(!j||!(typeof e==="object"&&j in e))}function G(e){return ee(e)==="[object Boolean]"&&(!j||!(typeof e==="object"&&j in e))}function K(e){if(I){return e&&typeof e==="object"&&e instanceof Symbol}if(typeof e==="symbol"){return true}if(!e||typeof e!=="object"||!F){return false}try{F.call(e);return true}catch(e){}return false}function Q(e){if(!e||typeof e!=="object"||!O){return false}try{O.call(e);return true}catch(e){}return false}var Y=Object.prototype.hasOwnProperty||function(e){return e in this};function Z(e,t){return Y.call(e,t)}function ee(e){return v.call(e)}function te(e){if(e.name){return e.name}var t=w.call(b.call(e),/^function\s*([\w$]+)/);if(t){return t[1]}return null}function ne(e,t){if(e.indexOf){return e.indexOf(t)}for(var n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}return-1}function re(e){if(!o||!e||typeof e!=="object"){return false}try{o.call(e);try{c.call(e)}catch(e){return true}return e instanceof Map}catch(e){}return false}function se(e){if(!d||!e||typeof e!=="object"){return false}try{d.call(e,d);try{h.call(e,h)}catch(e){return true}return e instanceof WeakMap}catch(e){}return false}function oe(e){if(!m||!e||typeof e!=="object"){return false}try{m.call(e);return true}catch(e){}return false}function ie(e){if(!c||!e||typeof e!=="object"){return false}try{c.call(e);try{o.call(e)}catch(e){return true}return e instanceof Set}catch(e){}return false}function ae(e){if(!h||!e||typeof e!=="object"){return false}try{h.call(e,h);try{d.call(e,d)}catch(e){return true}return e instanceof WeakSet}catch(e){}return false}function le(e){if(!e||typeof e!=="object"){return false}if(typeof HTMLElement!=="undefined"&&e instanceof HTMLElement){return true}return typeof e.nodeName==="string"&&typeof e.getAttribute==="function"}function ce(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength;var r="... "+n+" more character"+(n>1?"s":"");return ce(x.call(e,0,t.maxStringLength),t)+r}var s=$.call($.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ue);return B(s,"single",t)}function ue(e){var t=e.charCodeAt(0);var n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];if(n){return"\\"+n}return"\\x"+(t<16?"0":"")+_.call(t.toString(16))}function fe(e){return"Object("+e+")"}function de(e){return e+" { ? }"}function pe(e,t,n,r){var s=r?me(n,r):A.call(n,", ");return e+" ("+t+") {"+s+"}"}function he(e){for(var t=0;t<e.length;t++){if(ne(e[t],"\n")>=0){return false}}return true}function ye(e,t){var n;if(e.indent==="\t"){n="\t"}else if(typeof e.indent==="number"&&e.indent>0){n=A.call(Array(e.indent+1)," ")}else{return null}return{base:n,prev:A.call(Array(t+1),n)}}function me(e,t){if(e.length===0){return""}var n="\n"+t.prev+t.base;return n+A.call(e,","+n)+"\n"+t.prev}function ge(e,t){var n=H(e);var r=[];if(n){r.length=e.length;for(var s=0;s<e.length;s++){r[s]=Z(e,s)?t(e[s],e):""}}var o=typeof R==="function"?R(e):[];var i;if(I){i={};for(var a=0;a<o.length;a++){i["$"+o[a]]=o[a]}}for(var l in e){if(!Z(e,l)){continue}if(n&&String(Number(l))===l&&l<e.length){continue}if(I&&i["$"+l]instanceof Symbol){continue}else if(k.call(/[^\w$]/,l)){r.push(t(l,e)+": "+t(e[l],e))}else{r.push(l+": "+t(e[l],e))}}if(typeof R==="function"){for(var c=0;c<o.length;c++){if(M.call(e,o[c])){r.push("["+t(o[c])+"]: "+t(e[o[c]],e))}}}return r}},120:e=>{"use strict";var t=String.prototype.replace;var n=/%20/g;var r={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports={default:r.RFC3986,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986}},286:(e,t,n)=>{"use strict";var r=n(215);var s=n(425);var o=n(120);e.exports={formats:o,parse:s,stringify:r}},425:(e,t,n)=>{"use strict";var r=n(526);var s=Object.prototype.hasOwnProperty;var o=Array.isArray;var i={allowDots:false,allowPrototypes:false,allowSparse:false,arrayLimit:20,charset:"utf-8",charsetSentinel:false,comma:false,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:false,interpretNumericEntities:false,parameterLimit:1e3,parseArrays:true,plainObjects:false,strictNullHandling:false};var a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))};var l=function(e,t){if(e&&typeof e==="string"&&t.comma&&e.indexOf(",")>-1){return e.split(",")}return e};var c="utf8=%26%2310003%3B";var u="utf8=%E2%9C%93";var f=function e(t,n){var f={};var d=n.ignoreQueryPrefix?t.replace(/^\?/,""):t;var p=n.parameterLimit===Infinity?undefined:n.parameterLimit;var h=d.split(n.delimiter,p);var y=-1;var m;var g=n.charset;if(n.charsetSentinel){for(m=0;m<h.length;++m){if(h[m].indexOf("utf8=")===0){if(h[m]===u){g="utf-8"}else if(h[m]===c){g="iso-8859-1"}y=m;m=h.length}}}for(m=0;m<h.length;++m){if(m===y){continue}var v=h[m];var b=v.indexOf("]=");var w=b===-1?v.indexOf("="):b+1;var x,$;if(w===-1){x=n.decoder(v,i.decoder,g,"key");$=n.strictNullHandling?null:""}else{x=n.decoder(v.slice(0,w),i.decoder,g,"key");$=r.maybeMap(l(v.slice(w+1),n),(function(e){return n.decoder(e,i.decoder,g,"value")}))}if($&&n.interpretNumericEntities&&g==="iso-8859-1"){$=a($)}if(v.indexOf("[]=")>-1){$=o($)?[$]:$}if(s.call(f,x)){f[x]=r.combine(f[x],$)}else{f[x]=$}}return f};var d=function(e,t,n,r){var s=r?t:l(t,n);for(var o=e.length-1;o>=0;--o){var i;var a=e[o];if(a==="[]"&&n.parseArrays){i=[].concat(s)}else{i=n.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a;var u=parseInt(c,10);if(!n.parseArrays&&c===""){i={0:s}}else if(!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&(n.parseArrays&&u<=n.arrayLimit)){i=[];i[u]=s}else if(c!=="__proto__"){i[c]=s}}s=i}return s};var p=function e(t,n,r,o){if(!t){return}var i=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t;var a=/(\[[^[\]]*])/;var l=/(\[[^[\]]*])/g;var c=r.depth>0&&a.exec(i);var u=c?i.slice(0,c.index):i;var f=[];if(u){if(!r.plainObjects&&s.call(Object.prototype,u)){if(!r.allowPrototypes){return}}f.push(u)}var p=0;while(r.depth>0&&(c=l.exec(i))!==null&&p<r.depth){p+=1;if(!r.plainObjects&&s.call(Object.prototype,c[1].slice(1,-1))){if(!r.allowPrototypes){return}}f.push(c[1])}if(c){f.push("["+i.slice(c.index)+"]")}return d(f,n,r,o)};var h=function e(t){if(!t){return i}if(t.decoder!==null&&t.decoder!==undefined&&typeof t.decoder!=="function"){throw new TypeError("Decoder has to be a function.")}if(typeof t.charset!=="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var n=typeof t.charset==="undefined"?i.charset:t.charset;return{allowDots:typeof t.allowDots==="undefined"?i.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes==="boolean"?t.allowPrototypes:i.allowPrototypes,allowSparse:typeof t.allowSparse==="boolean"?t.allowSparse:i.allowSparse,arrayLimit:typeof t.arrayLimit==="number"?t.arrayLimit:i.arrayLimit,charset:n,charsetSentinel:typeof t.charsetSentinel==="boolean"?t.charsetSentinel:i.charsetSentinel,comma:typeof t.comma==="boolean"?t.comma:i.comma,decoder:typeof t.decoder==="function"?t.decoder:i.decoder,delimiter:typeof t.delimiter==="string"||r.isRegExp(t.delimiter)?t.delimiter:i.delimiter,depth:typeof t.depth==="number"||t.depth===false?+t.depth:i.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===true,interpretNumericEntities:typeof t.interpretNumericEntities==="boolean"?t.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof t.parameterLimit==="number"?t.parameterLimit:i.parameterLimit,parseArrays:t.parseArrays!==false,plainObjects:typeof t.plainObjects==="boolean"?t.plainObjects:i.plainObjects,strictNullHandling:typeof t.strictNullHandling==="boolean"?t.strictNullHandling:i.strictNullHandling}};e.exports=function(e,t){var n=h(t);if(e===""||e===null||typeof e==="undefined"){return n.plainObjects?Object.create(null):{}}var s=typeof e==="string"?f(e,n):e;var o=n.plainObjects?Object.create(null):{};var i=Object.keys(s);for(var a=0;a<i.length;++a){var l=i[a];var c=p(l,s[l],n,typeof e==="string");o=r.merge(o,c,n)}if(n.allowSparse===true){return o}return r.compact(o)}},215:(e,t,n)=>{"use strict";var r=n(612);var s=n(526);var o=n(120);var i=Object.prototype.hasOwnProperty;var a={brackets:function e(t){return t+"[]"},comma:"comma",indices:function e(t,n){return t+"["+n+"]"},repeat:function e(t){return t}};var l=Array.isArray;var c=String.prototype.split;var u=Array.prototype.push;var f=function(e,t){u.apply(e,l(t)?t:[t])};var d=Date.prototype.toISOString;var p=o["default"];var h={addQueryPrefix:false,allowDots:false,charset:"utf-8",charsetSentinel:false,delimiter:"&",encode:true,encoder:s.encode,encodeValuesOnly:false,format:p,formatter:o.formatters[p],indices:false,serializeDate:function e(t){return d.call(t)},skipNulls:false,strictNullHandling:false};var y=function e(t){return typeof t==="string"||typeof t==="number"||typeof t==="boolean"||typeof t==="symbol"||typeof t==="bigint"};var m={};var g=function e(t,n,o,i,a,u,d,p,g,v,b,w,x,$,_,S){var k=t;var E=S;var A=0;var P=false;while((E=E.get(m))!==void undefined&&!P){var C=E.get(t);A+=1;if(typeof C!=="undefined"){if(C===A){throw new RangeError("Cyclic object value")}else{P=true}}if(typeof E.get(m)==="undefined"){A=0}}if(typeof p==="function"){k=p(n,k)}else if(k instanceof Date){k=b(k)}else if(o==="comma"&&l(k)){k=s.maybeMap(k,(function(e){if(e instanceof Date){return b(e)}return e}))}if(k===null){if(a){return d&&!$?d(n,h.encoder,_,"key",w):n}k=""}if(y(k)||s.isBuffer(k)){if(d){var O=$?n:d(n,h.encoder,_,"key",w);if(o==="comma"&&$){var R=c.call(String(k),",");var F="";for(var I=0;I<R.length;++I){F+=(I===0?"":",")+x(d(R[I],h.encoder,_,"value",w))}return[x(O)+(i&&l(k)&&R.length===1?"[]":"")+"="+F]}return[x(O)+"="+x(d(k,h.encoder,_,"value",w))]}return[x(n)+"="+x(String(k))]}var j=[];if(typeof k==="undefined"){return j}var M;if(o==="comma"&&l(k)){M=[{value:k.length>0?k.join(",")||null:void undefined}]}else if(l(p)){M=p}else{var T=Object.keys(k);M=g?T.sort(g):T}var N=i&&l(k)&&k.length===1?n+"[]":n;for(var L=0;L<M.length;++L){var D=M[L];var U=typeof D==="object"&&typeof D.value!=="undefined"?D.value:k[D];if(u&&U===null){continue}var B=l(k)?typeof o==="function"?o(N,D):N:N+(v?"."+D:"["+D+"]");S.set(t,A);var q=r();q.set(m,S);f(j,e(U,B,o,i,a,u,d,p,g,v,b,w,x,$,_,q))}return j};var v=function e(t){if(!t){return h}if(t.encoder!==null&&typeof t.encoder!=="undefined"&&typeof t.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}var n=t.charset||h.charset;if(typeof t.charset!=="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var r=o["default"];if(typeof t.format!=="undefined"){if(!i.call(o.formatters,t.format)){throw new TypeError("Unknown format option provided.")}r=t.format}var s=o.formatters[r];var a=h.filter;if(typeof t.filter==="function"||l(t.filter)){a=t.filter}return{addQueryPrefix:typeof t.addQueryPrefix==="boolean"?t.addQueryPrefix:h.addQueryPrefix,allowDots:typeof t.allowDots==="undefined"?h.allowDots:!!t.allowDots,charset:n,charsetSentinel:typeof t.charsetSentinel==="boolean"?t.charsetSentinel:h.charsetSentinel,delimiter:typeof t.delimiter==="undefined"?h.delimiter:t.delimiter,encode:typeof t.encode==="boolean"?t.encode:h.encode,encoder:typeof t.encoder==="function"?t.encoder:h.encoder,encodeValuesOnly:typeof t.encodeValuesOnly==="boolean"?t.encodeValuesOnly:h.encodeValuesOnly,filter:a,format:r,formatter:s,serializeDate:typeof t.serializeDate==="function"?t.serializeDate:h.serializeDate,skipNulls:typeof t.skipNulls==="boolean"?t.skipNulls:h.skipNulls,sort:typeof t.sort==="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling==="boolean"?t.strictNullHandling:h.strictNullHandling}};e.exports=function(e,t){var n=e;var s=v(t);var o;var i;if(typeof s.filter==="function"){i=s.filter;n=i("",n)}else if(l(s.filter)){i=s.filter;o=i}var c=[];if(typeof n!=="object"||n===null){return""}var u;if(t&&t.arrayFormat in a){u=t.arrayFormat}else if(t&&"indices"in t){u=t.indices?"indices":"repeat"}else{u="indices"}var d=a[u];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!=="boolean"){throw new TypeError("`commaRoundTrip` must be a boolean, or absent")}var p=d==="comma"&&t&&t.commaRoundTrip;if(!o){o=Object.keys(n)}if(s.sort){o.sort(s.sort)}var h=r();for(var y=0;y<o.length;++y){var m=o[y];if(s.skipNulls&&n[m]===null){continue}f(c,g(n[m],m,d,p,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,h))}var b=c.join(s.delimiter);var w=s.addQueryPrefix===true?"?":"";if(s.charsetSentinel){if(s.charset==="iso-8859-1"){w+="utf8=%26%2310003%3B&"}else{w+="utf8=%E2%9C%93&"}}return b.length>0?w+b:""}},526:(e,t,n)=>{"use strict";var r=n(120);var s=Object.prototype.hasOwnProperty;var o=Array.isArray;var i=function(){var e=[];for(var t=0;t<256;++t){e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase())}return e}();var a=function e(t){while(t.length>1){var n=t.pop();var r=n.obj[n.prop];if(o(r)){var s=[];for(var i=0;i<r.length;++i){if(typeof r[i]!=="undefined"){s.push(r[i])}}n.obj[n.prop]=s}}};var l=function e(t,n){var r=n&&n.plainObjects?Object.create(null):{};for(var s=0;s<t.length;++s){if(typeof t[s]!=="undefined"){r[s]=t[s]}}return r};var c=function e(t,n,r){if(!n){return t}if(typeof n!=="object"){if(o(t)){t.push(n)}else if(t&&typeof t==="object"){if(r&&(r.plainObjects||r.allowPrototypes)||!s.call(Object.prototype,n)){t[n]=true}}else{return[t,n]}return t}if(!t||typeof t!=="object"){return[t].concat(n)}var i=t;if(o(t)&&!o(n)){i=l(t,r)}if(o(t)&&o(n)){n.forEach((function(n,o){if(s.call(t,o)){var i=t[o];if(i&&typeof i==="object"&&n&&typeof n==="object"){t[o]=e(i,n,r)}else{t.push(n)}}else{t[o]=n}}));return t}return Object.keys(n).reduce((function(t,o){var i=n[o];if(s.call(t,o)){t[o]=e(t[o],i,r)}else{t[o]=i}return t}),i)};var u=function e(t,n){return Object.keys(n).reduce((function(e,t){e[t]=n[t];return e}),t)};var f=function(e,t,n){var r=e.replace(/\+/g," ");if(n==="iso-8859-1"){return r.replace(/%[0-9a-f]{2}/gi,unescape)}try{return decodeURIComponent(r)}catch(e){return r}};var d=function e(t,n,s,o,a){if(t.length===0){return t}var l=t;if(typeof t==="symbol"){l=Symbol.prototype.toString.call(t)}else if(typeof t!=="string"){l=String(t)}if(s==="iso-8859-1"){return escape(l).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}))}var c="";for(var u=0;u<l.length;++u){var f=l.charCodeAt(u);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||a===r.RFC1738&&(f===40||f===41)){c+=l.charAt(u);continue}if(f<128){c=c+i[f];continue}if(f<2048){c=c+(i[192|f>>6]+i[128|f&63]);continue}if(f<55296||f>=57344){c=c+(i[224|f>>12]+i[128|f>>6&63]+i[128|f&63]);continue}u+=1;f=65536+((f&1023)<<10|l.charCodeAt(u)&1023);c+=i[240|f>>18]+i[128|f>>12&63]+i[128|f>>6&63]+i[128|f&63]}return c};var p=function e(t){var n=[{obj:{o:t},prop:"o"}];var r=[];for(var s=0;s<n.length;++s){var o=n[s];var i=o.obj[o.prop];var l=Object.keys(i);for(var c=0;c<l.length;++c){var u=l[c];var f=i[u];if(typeof f==="object"&&f!==null&&r.indexOf(f)===-1){n.push({obj:i,prop:u});r.push(f)}}}a(n);return t};var h=function e(t){return Object.prototype.toString.call(t)==="[object RegExp]"};var y=function e(t){if(!t||typeof t!=="object"){return false}return!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))};var m=function e(t,n){return[].concat(t,n)};var g=function e(t,n){if(o(t)){var r=[];for(var s=0;s<t.length;s+=1){r.push(n(t[s]))}return r}return n(t)};e.exports={arrayToObject:l,assign:u,combine:m,compact:p,decode:f,encode:d,isBuffer:y,isRegExp:h,maybeMap:g,merge:c}},612:(e,t,n)=>{"use strict";var r=n(774);var s=n(34);var o=n(438);var i=r("%TypeError%");var a=r("%WeakMap%",true);var l=r("%Map%",true);var c=s("WeakMap.prototype.get",true);var u=s("WeakMap.prototype.set",true);var f=s("WeakMap.prototype.has",true);var d=s("Map.prototype.get",true);var p=s("Map.prototype.set",true);var h=s("Map.prototype.has",true);var y=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r){if(r.key===t){n.next=r.next;r.next=e.next;e.next=r;return r}}};var m=function(e,t){var n=y(e,t);return n&&n.value};var g=function(e,t,n){var r=y(e,t);if(r){r.value=n}else{e.next={key:t,next:e.next,value:n}}};var v=function(e,t){return!!y(e,t)};e.exports=function e(){var t;var n;var r;var s={assert:function(e){if(!s.has(e)){throw new i("Side channel does not contain "+o(e))}},get:function(e){if(a&&e&&(typeof e==="object"||typeof e==="function")){if(t){return c(t,e)}}else if(l){if(n){return d(n,e)}}else{if(r){return m(r,e)}}},has:function(e){if(a&&e&&(typeof e==="object"||typeof e==="function")){if(t){return f(t,e)}}else if(l){if(n){return h(n,e)}}else{if(r){return v(r,e)}}return false},set:function(e,s){if(a&&e&&(typeof e==="object"||typeof e==="function")){if(!t){t=new a}u(t,e,s)}else if(l){if(!n){n=new l}p(n,e,s)}else{if(!r){r={key:{},next:null}}g(r,e,s)}}};return s}},989:()=>{}};var t={};function n(r){var s=t[r];if(s!==undefined){return s.exports}var o=t[r]={exports:{}};e[r](o,o.exports,n);return o.exports}(()=>{n.d=(e,t)=>{for(var r in t){if(n.o(t,r)&&!n.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t[r]})}}}})();(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{n.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();var r={};(()=>{"use strict";var e={};n.r(e);n.d(e,{APIConnectionError:()=>Qr,APIConnectionTimeoutError:()=>Yr,APIError:()=>Kr,AuthenticationError:()=>es,BadRequestError:()=>Zr,ConflictError:()=>rs,InternalServerError:()=>is,NotFoundError:()=>ns,PermissionDeniedError:()=>ts,RateLimitError:()=>os,UnprocessableEntityError:()=>ss});var t={};n.r(t);n.d(t,{APIConnectionError:()=>oi,APIConnectionTimeoutError:()=>ii,APIError:()=>ri,APIUserAbortError:()=>si,AuthenticationError:()=>li,BadRequestError:()=>ai,ConflictError:()=>fi,InternalServerError:()=>hi,NotFoundError:()=>ui,OpenAIError:()=>ni,PermissionDeniedError:()=>ci,RateLimitError:()=>pi,UnprocessableEntityError:()=>di});function r(){}const s=e=>e;function o(e,t){for(const n in t)e[n]=t[n];return e}function i(e){return!!e&&(typeof e==="object"||typeof e==="function")&&typeof e.then==="function"}function a(e,t,n,r,s){e.__svelte_meta={loc:{file:t,line:n,column:r,char:s}}}function l(e){return e()}function c(){return Object.create(null)}function u(e){e.forEach(l)}function f(e){return typeof e==="function"}function d(e,t){return e!=e?t==t:e!==t||(e&&typeof e==="object"||typeof e==="function")}let p;function h(e,t){if(!p){p=document.createElement("a")}p.href=t;return e===p.href}function y(e,t){return e!=e?t==t:e!==t}function m(e){return Object.keys(e).length===0}function g(e,t){if(e!=null&&typeof e.subscribe!=="function"){throw new Error(`'${t}' is not a store with a 'subscribe' method`)}}function v(e,...t){if(e==null){return r}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function b(e){let t;v(e,(e=>t=e))();return t}function w(e,t,n){e.$$.on_destroy.push(v(t,n))}function x(e,t,n,r){if(e){const s=$(e,t,n,r);return e[0](s)}}function $(e,t,n,r){return e[1]&&r?o(n.ctx.slice(),e[1](r(t))):n.ctx}function _(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===undefined){return s}if(typeof s==="object"){const e=[];const n=Math.max(t.dirty.length,s.length);for(let r=0;r<n;r+=1){e[r]=t.dirty[r]|s[r]}return e}return t.dirty|s}return t.dirty}function S(e,t,n,r,s,o){if(s){const i=$(t,n,r,o);e.p(i,s)}}function k(e,t,n,r,s,o,i){const a=_(t,r,s,o);S(e,t,n,r,a,i)}function E(e){if(e.ctx.length>32){const t=[];const n=e.ctx.length/32;for(let e=0;e<n;e++){t[e]=-1}return t}return-1}function A(e){const t={};for(const n in e)if(n[0]!=="$")t[n]=e[n];return t}function P(e,t){const n={};t=new Set(t);for(const r in e)if(!t.has(r)&&r[0]!=="$")n[r]=e[r];return n}function C(e){const t={};for(const n in e){t[n]=true}return t}function O(e){let t=false;return function(...n){if(t)return;t=true;e.call(this,...n)}}function R(e){return e==null?"":e}function F(e,t,n){e.set(n);return t}const I=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function j(e){return e&&f(e.destroy)?e.destroy:r}function M(e){const t=typeof e==="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const T=null&&["",true,1,"true","contenteditable"];const N=typeof window!=="undefined";let L=null&&(N?()=>window.performance.now():()=>Date.now());let D=null&&(N?e=>requestAnimationFrame(e):r);function U(e){L=e}function B(e){D=e}const q=new Set;function H(e){q.forEach((t=>{if(!t.c(e)){q.delete(t);t.f()}}));if(q.size!==0)D(H)}function W(){q.clear()}function X(e){let t;if(q.size===0)D(H);return{promise:new Promise((n=>{q.add(t={c:e,f:n})})),abort(){q.delete(t)}}}const z=typeof window!=="undefined"?window:typeof globalThis!=="undefined"?globalThis:global;class V{constructor(e){this.options=e;this._listeners="WeakMap"in z?new WeakMap:undefined}observe(e,t){this._listeners.set(e,t);this._getObserver().observe(e,this.options);return()=>{this._listeners.delete(e);this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver((e=>{var t;for(const n of e){V.entries.set(n.target,n);(t=this._listeners.get(n.target))===null||t===void 0?void 0:t(n)}}))}}V.entries="WeakMap"in z?new WeakMap:undefined;let J=false;function G(){J=true}function K(){J=false}function Q(e,t,n,r){while(e<t){const s=e+(t-e>>1);if(n(s)<=r){e=s+1}else{t=s}}return e}function Y(e){if(e.hydrate_init)return;e.hydrate_init=true;let t=e.childNodes;if(e.nodeName==="HEAD"){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(r.claim_order!==undefined){e.push(r)}}t=e}const n=new Int32Array(t.length+1);const r=new Int32Array(t.length);n[0]=-1;let s=0;for(let e=0;e<t.length;e++){const o=t[e].claim_order;const i=(s>0&&t[n[s]].claim_order<=o?s+1:Q(1,s,(e=>t[n[e]].claim_order),o))-1;r[e]=n[i]+1;const a=i+1;n[a]=e;s=Math.max(a,s)}const o=[];const i=[];let a=t.length-1;for(let e=n[s]+1;e!=0;e=r[e-1]){o.push(t[e-1]);for(;a>=e;a--){i.push(t[a])}a--}for(;a>=0;a--){i.push(t[a])}o.reverse();i.sort(((e,t)=>e.claim_order-t.claim_order));for(let t=0,n=0;t<i.length;t++){while(n<o.length&&i[t].claim_order>=o[n].claim_order){n++}const r=n<o.length?o[n]:null;e.insertBefore(i[t],r)}}function Z(e,t){e.appendChild(t)}function ee(e,t,n){const r=te(e);if(!r.getElementById(t)){const e=ce("style");e.id=t;e.textContent=n;re(r,e)}}function te(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;if(t&&t.host){return t}return e.ownerDocument}function ne(e){const t=ce("style");re(te(e),t);return t.sheet}function re(e,t){Z(e.head||e,t);return t.sheet}function se(e,t){if(J){Y(e);if(e.actual_end_child===undefined||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e){e.actual_end_child=e.firstChild}while(e.actual_end_child!==null&&e.actual_end_child.claim_order===undefined){e.actual_end_child=e.actual_end_child.nextSibling}if(t!==e.actual_end_child){if(t.claim_order!==undefined||t.parentNode!==e){e.insertBefore(t,e.actual_end_child)}}else{e.actual_end_child=t.nextSibling}}else if(t.parentNode!==e||t.nextSibling!==null){e.appendChild(t)}}function oe(e,t,n){e.insertBefore(t,n||null)}function ie(e,t,n){if(J&&!n){se(e,t)}else if(t.parentNode!==e||t.nextSibling!=n){e.insertBefore(t,n||null)}}function ae(e){if(e.parentNode){e.parentNode.removeChild(e)}}function le(e,t){for(let n=0;n<e.length;n+=1){if(e[n])e[n].d(t)}}function ce(e){return document.createElement(e)}function ue(e,t){return document.createElement(e,{is:t})}function fe(e,t){const n={};for(const r in e){if(I(e,r)&&t.indexOf(r)===-1){n[r]=e[r]}}return n}function de(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function pe(e){return document.createTextNode(e)}function he(){return pe(" ")}function ye(){return pe("")}function me(e){return document.createComment(e)}function ge(e,t,n,r){e.addEventListener(t,n,r);return()=>e.removeEventListener(t,n,r)}function ve(e){return function(t){t.preventDefault();return e.call(this,t)}}function be(e){return function(t){t.stopPropagation();return e.call(this,t)}}function we(e){return function(t){t.stopImmediatePropagation();return e.call(this,t)}}function xe(e){return function(t){if(t.target===this)e.call(this,t)}}function $e(e){return function(t){if(t.isTrusted)e.call(this,t)}}function _e(e,t,n){if(n==null)e.removeAttribute(t);else if(e.getAttribute(t)!==n)e.setAttribute(t,n)}const Se=null&&["width","height"];function ke(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t){if(t[r]==null){e.removeAttribute(r)}else if(r==="style"){e.style.cssText=t[r]}else if(r==="__value"){e.value=e[r]=t[r]}else if(n[r]&&n[r].set&&Se.indexOf(r)===-1){e[r]=t[r]}else{_e(e,r,t[r])}}}function Ee(e,t){for(const n in t){_e(e,n,t[n])}}function Ae(e,t){Object.keys(t).forEach((n=>{Pe(e,n,t[n])}))}function Pe(e,t,n){if(t in e){e[t]=typeof e[t]==="boolean"&&n===""?true:n}else{_e(e,t,n)}}function Ce(e){return/-/.test(e)?Ae:ke}function Oe(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function Re(e,t,n){const r=new Set;for(let t=0;t<e.length;t+=1){if(e[t].checked)r.add(e[t].__value)}if(!n){r.delete(t)}return Array.from(r)}function Fe(e){let t;return{p(...n){t=n;t.forEach((t=>e.push(t)))},r(){t.forEach((t=>e.splice(e.indexOf(t),1)))}}}function Ie(e,t){let n=s(e);let r;function s(e){for(let n=0;n<t.length;n++){e=e[t[n]]=e[t[n]]||[]}return e}function o(){r.forEach((e=>n.push(e)))}function i(){r.forEach((e=>n.splice(n.indexOf(e),1)))}return{u(r){t=r;const a=s(e);if(a!==n){i();n=a;o()}},p(...e){r=e;o()},r:i}}function je(e){return e===""?null:+e}function Me(e){const t=[];for(let n=0;n<e.length;n+=1){t.push({start:e.start(n),end:e.end(n)})}return t}function Te(e){return Array.from(e.childNodes)}function Ne(e){if(e.claim_info===undefined){e.claim_info={last_index:0,total_claimed:0}}}function Le(e,t,n,r,s=false){Ne(e);const o=(()=>{for(let r=e.claim_info.last_index;r<e.length;r++){const o=e[r];if(t(o)){const t=n(o);if(t===undefined){e.splice(r,1)}else{e[r]=t}if(!s){e.claim_info.last_index=r}return o}}for(let r=e.claim_info.last_index-1;r>=0;r--){const o=e[r];if(t(o)){const t=n(o);if(t===undefined){e.splice(r,1)}else{e[r]=t}if(!s){e.claim_info.last_index=r}else if(t===undefined){e.claim_info.last_index--}return o}}return r()})();o.claim_order=e.claim_info.total_claimed;e.claim_info.total_claimed+=1;return o}function De(e,t,n,r){return Le(e,(e=>e.nodeName===t),(e=>{const t=[];for(let r=0;r<e.attributes.length;r++){const s=e.attributes[r];if(!n[s.name]){t.push(s.name)}}t.forEach((t=>e.removeAttribute(t)));return undefined}),(()=>r(t)))}function Ue(e,t,n){return De(e,t,n,ce)}function Be(e,t,n){return De(e,t,n,de)}function qe(e,t){return Le(e,(e=>e.nodeType===3),(e=>{const n=""+t;if(e.data.startsWith(n)){if(e.data.length!==n.length){return e.splitText(n.length)}}else{e.data=n}}),(()=>pe(t)),true)}function He(e){return qe(e," ")}function We(e,t){return Le(e,(e=>e.nodeType===8),(e=>{e.data=""+t;return undefined}),(()=>me(t)),true)}function Xe(e,t,n){for(let r=n;r<e.length;r+=1){const n=e[r];if(n.nodeType===8&&n.textContent.trim()===t){return r}}return e.length}function ze(e,t){const n=Xe(e,"HTML_TAG_START",0);const r=Xe(e,"HTML_TAG_END",n);if(n===r){return new ht(undefined,t)}Ne(e);const s=e.splice(n,r-n+1);ae(s[0]);ae(s[s.length-1]);const o=s.slice(1,s.length-1);for(const t of o){t.claim_order=e.claim_info.total_claimed;e.claim_info.total_claimed+=1}return new ht(o,t)}function Ve(e,t){t=""+t;if(e.data===t)return;e.data=t}function Je(e,t){t=""+t;if(e.wholeText===t)return;e.data=t}function Ge(e,t,n){if(~T.indexOf(n)){Je(e,t)}else{Ve(e,t)}}function Ke(e,t){e.value=t==null?"":t}function Qe(e,t){try{e.type=t}catch(e){}}function Ye(e,t,n,r){if(n==null){e.style.removeProperty(t)}else{e.style.setProperty(t,n,r?"important":"")}}function Ze(e,t,n){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=true;return}}if(!n||t!==undefined){e.selectedIndex=-1}}function et(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];r.selected=~t.indexOf(r.__value)}}function tt(e){const t=e.querySelector(":checked");return t&&t.__value}function nt(e){return[].map.call(e.querySelectorAll(":checked"),(e=>e.__value))}let rt;function st(){if(rt===undefined){rt=false;try{if(typeof window!=="undefined"&&window.parent){void window.parent.document}}catch(e){rt=true}}return rt}function ot(e,t){const n=getComputedStyle(e);if(n.position==="static"){e.style.position="relative"}const r=ce("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; "+"overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;");r.setAttribute("aria-hidden","true");r.tabIndex=-1;const s=st();let o;if(s){r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>";o=ge(window,"message",(e=>{if(e.source===r.contentWindow)t()}))}else{r.src="about:blank";r.onload=()=>{o=ge(r.contentWindow,"resize",t);t()}}Z(e,r);return()=>{if(s){o()}else if(o&&r.contentWindow){o()}ae(r)}}const it=new V({box:"content-box"});const at=new V({box:"border-box"});const lt=new V({box:"device-pixel-content-box"});function ct(e,t,n){e.classList[n?"add":"remove"](t)}function ut(e,t,{bubbles:n=false,cancelable:r=false}={}){const s=document.createEvent("CustomEvent");s.initCustomEvent(e,n,r,t);return s}function ft(e,t=document.body){return Array.from(t.querySelectorAll(e))}function dt(e,t){const n=[];let r=0;for(const s of t.childNodes){if(s.nodeType===8){const t=s.textContent.trim();if(t===`HEAD_${e}_END`){r-=1;n.push(s)}else if(t===`HEAD_${e}_START`){r+=1;n.push(s)}}else if(r>0){n.push(s)}}return n}class pt{constructor(e=false){this.is_svg=false;this.is_svg=e;this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){if(!this.e){if(this.is_svg)this.e=de(t.nodeName);else this.e=ce(t.nodeType===11?"TEMPLATE":t.nodeName);this.t=t.tagName!=="TEMPLATE"?t:t.content;this.c(e)}this.i(n)}h(e){this.e.innerHTML=e;this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1){oe(this.t,this.n[t],e)}}p(e){this.d();this.h(e);this.i(this.a)}d(){this.n.forEach(ae)}}class ht extends(null&&pt){constructor(e,t=false){super(t);this.e=this.n=null;this.l=e}c(e){if(this.l){this.n=this.l}else{super.c(e)}}i(e){for(let t=0;t<this.n.length;t+=1){ie(this.t,this.n[t],e)}}}function yt(e){const t={};for(const n of e){t[n.name]=n.value}return t}function mt(e){const t={};e.childNodes.forEach((e=>{t[e.slot||"default"]=true}));return t}function gt(e,t){return new e(t)}const vt=new Map;let bt=0;function wt(e){let t=5381;let n=e.length;while(n--)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function xt(e,t){const n={stylesheet:ne(t),rules:{}};vt.set(e,n);return n}function $t(e,t,n,r,s,o,i,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*o(e);c+=e*100+`%{${i(r,1-r)}}\n`}const u=c+`100% {${i(n,1-n)}}\n}`;const f=`__svelte_${wt(u)}_${a}`;const d=te(e);const{stylesheet:p,rules:h}=vt.get(d)||xt(d,e);if(!h[f]){h[f]=true;p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length)}const y=e.style.animation||"";e.style.animation=`${y?`${y}, `:""}${f} ${r}ms linear ${s}ms 1 both`;bt+=1;return f}function _t(e,t){const n=(e.style.animation||"").split(", ");const r=n.filter(t?e=>e.indexOf(t)<0:e=>e.indexOf("__svelte")===-1);const s=n.length-r.length;if(s){e.style.animation=r.join(", ");bt-=s;if(!bt)St()}}function St(){D((()=>{if(bt)return;vt.forEach((e=>{const{ownerNode:t}=e.stylesheet;if(t)ae(t)}));vt.clear()}))}function kt(e,t,n,o){if(!t)return r;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return r;const{delay:a=0,duration:l=300,easing:c=s,start:u=L()+a,end:f=u+l,tick:d=r,css:p}=n(e,{from:t,to:i},o);let h=true;let y=false;let m;function g(){if(p){m=$t(e,0,1,l,a,c,p)}if(!a){y=true}}function v(){if(p)_t(e,m);h=false}X((e=>{if(!y&&e>=u){y=true}if(y&&e>=f){d(1,0);v()}if(!h){return false}if(y){const t=e-u;const n=0+1*c(t/l);d(n,1-n)}return true}));g();d(0,1);return v}function Et(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t;const s=e.getBoundingClientRect();e.style.position="absolute";e.style.width=n;e.style.height=r;At(e,s)}}function At(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e);const s=r.transform==="none"?"":r.transform;e.style.transform=`${s} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Pt;function Ct(e){Pt=e}function Ot(){if(!Pt)throw new Error("Function called outside component initialization");return Pt}function Rt(e){Ot().$$.before_update.push(e)}function Ft(e){Ot().$$.on_mount.push(e)}function It(e){Ot().$$.after_update.push(e)}function jt(e){Ot().$$.on_destroy.push(e)}function Mt(){const e=Ot();return(t,n,{cancelable:r=false}={})=>{const s=e.$$.callbacks[t];if(s){const o=ut(t,n,{cancelable:r});s.slice().forEach((t=>{t.call(e,o)}));return!o.defaultPrevented}return true}}function Tt(e,t){Ot().$$.context.set(e,t);return t}function Nt(e){return Ot().$$.context.get(e)}function Lt(){return Ot().$$.context}function Dt(e){return Ot().$$.context.has(e)}function Ut(e,t){const n=e.$$.callbacks[t.type];if(n){n.slice().forEach((e=>e.call(this,t)))}}const Bt=[];const qt={enabled:false};const Ht=[];let Wt=[];const Xt=[];const zt=Promise.resolve();let Vt=false;function Jt(){if(!Vt){Vt=true;zt.then(en)}}function Gt(){Jt();return zt}function Kt(e){Wt.push(e)}function Qt(e){Xt.push(e)}const Yt=new Set;let Zt=0;function en(){if(Zt!==0){return}const e=Pt;do{try{while(Zt<Bt.length){const e=Bt[Zt];Zt++;Ct(e);tn(e.$$)}}catch(e){Bt.length=0;Zt=0;throw e}Ct(null);Bt.length=0;Zt=0;while(Ht.length)Ht.pop()();for(let e=0;e<Wt.length;e+=1){const t=Wt[e];if(!Yt.has(t)){Yt.add(t);t()}}Wt.length=0}while(Bt.length);while(Xt.length){Xt.pop()()}Vt=false;Yt.clear();Ct(e)}function tn(e){if(e.fragment!==null){e.update();u(e.before_update);const t=e.dirty;e.dirty=[-1];e.fragment&&e.fragment.p(e.ctx,t);e.after_update.forEach(Kt)}}function nn(e){const t=[];const n=[];Wt.forEach((r=>e.indexOf(r)===-1?t.push(r):n.push(r)));n.forEach((e=>e()));Wt=t}let rn;function sn(){if(!rn){rn=Promise.resolve();rn.then((()=>{rn=null}))}return rn}function on(e,t,n){e.dispatchEvent(ut(`${t?"intro":"outro"}${n}`))}const an=new Set;let ln;function cn(){ln={r:0,c:[],p:ln}}function un(){if(!ln.r){u(ln.c)}ln=ln.p}function fn(e,t){if(e&&e.i){an.delete(e);e.i(t)}}function dn(e,t,n,r){if(e&&e.o){if(an.has(e))return;an.add(e);ln.c.push((()=>{an.delete(e);if(r){if(n)e.d(1);r()}}));e.o(t)}else if(r){r()}}const pn={duration:0};function hn(e,t,n){const o={direction:"in"};let i=t(e,n,o);let a=false;let l;let c;let u=0;function d(){if(l)_t(e,l)}function p(){const{delay:t=0,duration:n=300,easing:o=s,tick:f=r,css:p}=i||pn;if(p)l=$t(e,0,1,n,t,o,p,u++);f(0,1);const h=L()+t;const y=h+n;if(c)c.abort();a=true;Kt((()=>on(e,true,"start")));c=X((t=>{if(a){if(t>=y){f(1,0);on(e,true,"end");d();return a=false}if(t>=h){const e=o((t-h)/n);f(e,1-e)}}return a}))}let h=false;return{start(){if(h)return;h=true;_t(e);if(f(i)){i=i(o);sn().then(p)}else{p()}},invalidate(){h=false},end(){if(a){d();a=false}}}}function yn(e,t,n){const o={direction:"out"};let i=t(e,n,o);let a=true;let l;const c=ln;c.r+=1;function d(){const{delay:t=0,duration:n=300,easing:o=s,tick:f=r,css:d}=i||pn;if(d)l=$t(e,1,0,n,t,o,d);const p=L()+t;const h=p+n;Kt((()=>on(e,false,"start")));X((t=>{if(a){if(t>=h){f(0,1);on(e,false,"end");if(!--c.r){u(c.c)}return false}if(t>=p){const e=o((t-p)/n);f(1-e,e)}}return a}))}if(f(i)){sn().then((()=>{i=i(o);d()}))}else{d()}return{end(t){if(t&&i.tick){i.tick(1,0)}if(a){if(l)_t(e,l);a=false}}}}function mn(e,t,n,o){const i={direction:"both"};let a=t(e,n,i);let l=o?0:1;let c=null;let d=null;let p=null;function h(){if(p)_t(e,p)}function y(e,t){const n=e.b-l;t*=Math.abs(n);return{a:l,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(t){const{delay:n=0,duration:o=300,easing:i=s,tick:f=r,css:m}=a||pn;const g={start:L()+n,b:t};if(!t){g.group=ln;ln.r+=1}if(c||d){d=g}else{if(m){h();p=$t(e,l,t,o,n,i,m)}if(t)f(0,1);c=y(g,o);Kt((()=>on(e,t,"start")));X((t=>{if(d&&t>d.start){c=y(d,o);d=null;on(e,c.b,"start");if(m){h();p=$t(e,l,c.b,c.duration,0,i,a.css)}}if(c){if(t>=c.end){f(l=c.b,1-l);on(e,c.b,"end");if(!d){if(c.b){h()}else{if(!--c.group.r)u(c.group.c)}}c=null}else if(t>=c.start){const e=t-c.start;l=c.a+c.d*i(e/c.duration);f(l,1-l)}}return!!(c||d)}))}}return{run(e){if(f(a)){sn().then((()=>{a=a(i);m(e)}))}else{m(e)}},end(){h();c=d=null}}}function gn(e,t){const n=t.token={};function r(e,r,s,o){if(t.token!==n)return;t.resolved=o;let i=t.ctx;if(s!==undefined){i=i.slice();i[s]=o}const a=e&&(t.current=e)(i);let l=false;if(t.block){if(t.blocks){t.blocks.forEach(((e,n)=>{if(n!==r&&e){cn();dn(e,1,1,(()=>{if(t.blocks[n]===e){t.blocks[n]=null}}));un()}}))}else{t.block.d(1)}a.c();fn(a,1);a.m(t.mount(),t.anchor);l=true}t.block=a;if(t.blocks)t.blocks[r]=a;if(l){en()}}if(i(e)){const n=Ot();e.then((e=>{Ct(n);r(t.then,1,t.value,e);Ct(null)}),(e=>{Ct(n);r(t.catch,2,t.error,e);Ct(null);if(!t.hasCatch){throw e}}));if(t.current!==t.pending){r(t.pending,0);return true}}else{if(t.current!==t.then){r(t.then,1,t.value,e);return true}t.resolved=e}}function vn(e,t,n){const r=t.slice();const{resolved:s}=e;if(e.current===e.then){r[e.value]=s}if(e.current===e.catch){r[e.error]=s}e.block.p(r,n)}function bn(e,t){e.d(1);t.delete(e.key)}function wn(e,t){dn(e,1,1,(()=>{t.delete(e.key)}))}function xn(e,t){e.f();bn(e,t)}function $n(e,t){e.f();wn(e,t)}function _n(e,t,n,r,s,o,i,a,l,c,f,d){let p=e.length;let h=o.length;let y=p;const m={};while(y--)m[e[y].key]=y;const g=[];const v=new Map;const b=new Map;const w=[];y=h;while(y--){const e=d(s,o,y);const a=n(e);let l=i.get(a);if(!l){l=c(a,e);l.c()}else if(r){w.push((()=>l.p(e,t)))}v.set(a,g[y]=l);if(a in m)b.set(a,Math.abs(y-m[a]))}const x=new Set;const $=new Set;function _(e){fn(e,1);e.m(a,f);i.set(e.key,e);f=e.first;h--}while(p&&h){const t=g[h-1];const n=e[p-1];const r=t.key;const s=n.key;if(t===n){f=t.first;p--;h--}else if(!v.has(s)){l(n,i);p--}else if(!i.has(r)||x.has(r)){_(t)}else if($.has(s)){p--}else if(b.get(r)>b.get(s)){$.add(r);_(t)}else{x.add(s);p--}}while(p--){const t=e[p];if(!v.has(t.key))l(t,i)}while(h)_(g[h-1]);u(w);return g}function Sn(e,t,n,r){const s=new Set;for(let o=0;o<t.length;o++){const i=r(n(e,t,o));if(s.has(i)){throw new Error("Cannot have duplicate keys in a keyed each")}s.add(i)}}function kn(e,t){const n={};const r={};const s={$$scope:1};let o=e.length;while(o--){const i=e[o];const a=t[o];if(a){for(const e in i){if(!(e in a))r[e]=1}for(const e in a){if(!s[e]){n[e]=a[e];s[e]=1}}e[o]=a}else{for(const e in i){s[e]=1}}}for(const e in r){if(!(e in n))n[e]=undefined}return n}function En(e){return typeof e==="object"&&e!==null?e:{}}const An=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];const Pn=new Set([...An]);const Cn=/^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;function On(e){return Cn.test(e)||e.toLowerCase()==="!doctype"}const Rn=/[\s'">/=\u{FDD0}-\u{FDEF}\u{FFFE}\u{FFFF}\u{1FFFE}\u{1FFFF}\u{2FFFE}\u{2FFFF}\u{3FFFE}\u{3FFFF}\u{4FFFE}\u{4FFFF}\u{5FFFE}\u{5FFFF}\u{6FFFE}\u{6FFFF}\u{7FFFE}\u{7FFFF}\u{8FFFE}\u{8FFFF}\u{9FFFE}\u{9FFFF}\u{AFFFE}\u{AFFFF}\u{BFFFE}\u{BFFFF}\u{CFFFE}\u{CFFFF}\u{DFFFE}\u{DFFFF}\u{EFFFE}\u{EFFFF}\u{FFFFE}\u{FFFFF}\u{10FFFE}\u{10FFFF}]/u;function Fn(e,t){const n=Object.assign({},...e);if(t){const e=t.classes;const r=t.styles;if(e){if(n.class==null){n.class=e}else{n.class+=" "+e}}if(r){if(n.style==null){n.style=Vn(r)}else{n.style=Vn(In(n.style,r))}}}let r="";Object.keys(n).forEach((e=>{if(Rn.test(e))return;const t=n[e];if(t===true)r+=" "+e;else if(Pn.has(e.toLowerCase())){if(t)r+=" "+e}else if(t!=null){r+=` ${e}="${t}"`}}));return r}function In(e,t){const n={};for(const t of e.split(";")){const e=t.indexOf(":");const r=t.slice(0,e).trim();const s=t.slice(e+1).trim();if(!r)continue;n[r]=s}for(const e in t){const r=t[e];if(r){n[e]=r}else{delete n[e]}}return n}const jn=/[&"]/g;const Mn=/[&<]/g;function Tn(e,t=false){const n=String(e);const r=t?jn:Mn;r.lastIndex=0;let s="";let o=0;while(r.test(n)){const e=r.lastIndex-1;const t=n[e];s+=n.substring(o,e)+(t==="&"?"&amp;":t==='"'?"&quot;":"&lt;");o=e+1}return s+n.substring(o)}function Nn(e){const t=typeof e==="string"||e&&typeof e==="object";return t?Tn(e,true):e}function Ln(e){const t={};for(const n in e){t[n]=Nn(e[n])}return t}function Dn(e,t){let n="";for(let r=0;r<e.length;r+=1){n+=t(e[r],r)}return n}const Un={$$render:()=>""};function Bn(e,t){if(!e||!e.$$render){if(t==="svelte:component")t+=" this={...}";throw new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`)}return e}function qn(e,t,n,r){console.log(`{@debug} ${e?e+" ":""}(${t}:${n})`);console.log(r);return""}let Hn;function Wn(e){function t(t,n,r,s,o){const i=Pt;const a={on_destroy:Hn,context:new Map(o||(i?i.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:c()};Ct({$$:a});const l=e(t,n,r,s);Ct(i);return l}return{render:(e={},{$$slots:n={},context:r=new Map}={})=>{Hn=[];const s={title:"",head:"",css:new Set};const o=t(s,e,{},n,r);u(Hn);return{html:o,css:{code:Array.from(s.css).map((e=>e.code)).join("\n"),map:null},head:s.title+s.head}},$$render:t}}function Xn(e,t,n){if(t==null||n&&!t)return"";const r=n&&t===true?"":`="${Tn(t,true)}"`;return` ${e}${r}`}function zn(e){return e?` class="${e}"`:""}function Vn(e){return Object.keys(e).filter((t=>e[t])).map((t=>`${t}: ${Nn(e[t])};`)).join(" ")}function Jn(e){const t=Vn(e);return t?` style="${t}"`:""}function Gn(e,t,n){const r=e.$$.props[t];if(r!==undefined){e.$$.bound[r]=n;n(e.$$.ctx[r])}}function Kn(e){e&&e.c()}function Qn(e,t){e&&e.l(t)}function Yn(e,t,n,r){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n);if(!r){Kt((()=>{const t=e.$$.on_mount.map(l).filter(f);if(e.$$.on_destroy){e.$$.on_destroy.push(...t)}else{u(t)}e.$$.on_mount=[]}))}o.forEach(Kt)}function Zn(e,t){const n=e.$$;if(n.fragment!==null){nn(n.after_update);u(n.on_destroy);n.fragment&&n.fragment.d(t);n.on_destroy=n.fragment=null;n.ctx=[]}}function er(e,t){if(e.$$.dirty[0]===-1){Bt.push(e);Jt();e.$$.dirty.fill(0)}e.$$.dirty[t/31|0]|=1<<t%31}function tr(e,t,n,s,o,i,a,l=[-1]){const f=Pt;Ct(e);const d=e.$$={fragment:null,ctx:[],props:i,update:r,not_equal:o,bound:c(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:c(),dirty:l,skip_bound:false,root:t.target||f.$$.root};a&&a(d.root);let p=false;d.ctx=n?n(e,t.props||{},((t,n,...r)=>{const s=r.length?r[0]:n;if(d.ctx&&o(d.ctx[t],d.ctx[t]=s)){if(!d.skip_bound&&d.bound[t])d.bound[t](s);if(p)er(e,t)}return n})):[];d.update();p=true;u(d.before_update);d.fragment=s?s(d.ctx):false;if(t.target){if(t.hydrate){G();const e=Te(t.target);d.fragment&&d.fragment.l(e);e.forEach(ae)}else{d.fragment&&d.fragment.c()}if(t.intro)fn(e.$$.fragment);Yn(e,t.target,t.anchor,t.customElement);K();en()}Ct(f)}let nr;if(typeof HTMLElement==="function"){nr=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(l).filter(f);for(const e in this.$$.slotted){this.appendChild(this.$$.slotted[e])}}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){u(this.$$.on_disconnect)}$destroy(){Zn(this,1);this.$destroy=r}$on(e,t){if(!f(t)){return r}const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);n.push(t);return()=>{const e=n.indexOf(t);if(e!==-1)n.splice(e,1)}}$set(e){if(this.$$set&&!m(e)){this.$$.skip_bound=true;this.$$set(e);this.$$.skip_bound=false}}}}class rr{$destroy(){Zn(this,1);this.$destroy=r}$on(e,t){if(!f(t)){return r}const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);n.push(t);return()=>{const e=n.indexOf(t);if(e!==-1)n.splice(e,1)}}$set(e){if(this.$$set&&!m(e)){this.$$.skip_bound=true;this.$$set(e);this.$$.skip_bound=false}}}function sr(e,t){document.dispatchEvent(ut(e,Object.assign({version:"3.59.2"},t),{bubbles:true}))}function or(e,t){sr("SvelteDOMInsert",{target:e,node:t});Z(e,t)}function ir(e,t){sr("SvelteDOMInsert",{target:e,node:t});se(e,t)}function ar(e,t,n){sr("SvelteDOMInsert",{target:e,node:t,anchor:n});oe(e,t,n)}function lr(e,t,n){sr("SvelteDOMInsert",{target:e,node:t,anchor:n});ie(e,t,n)}function cr(e){sr("SvelteDOMRemove",{node:e});ae(e)}function ur(e,t){while(e.nextSibling&&e.nextSibling!==t){cr(e.nextSibling)}}function fr(e){while(e.previousSibling){cr(e.previousSibling)}}function dr(e){while(e.nextSibling){cr(e.nextSibling)}}function pr(e,t,n,r,s,o,i){const a=r===true?["capture"]:r?Array.from(Object.keys(r)):[];if(s)a.push("preventDefault");if(o)a.push("stopPropagation");if(i)a.push("stopImmediatePropagation");sr("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:a});const l=ge(e,t,n,r);return()=>{sr("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:a});l()}}function hr(e,t,n){_e(e,t,n);if(n==null)sr("SvelteDOMRemoveAttribute",{node:e,attribute:t});else sr("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function yr(e,t,n){e[t]=n;sr("SvelteDOMSetProperty",{node:e,property:t,value:n})}function mr(e,t,n){e.dataset[t]=n;sr("SvelteDOMSetDataset",{node:e,property:t,value:n})}function gr(e,t){t=""+t;if(e.data===t)return;sr("SvelteDOMSetData",{node:e,data:t});e.data=t}function vr(e,t){t=""+t;if(e.wholeText===t)return;sr("SvelteDOMSetData",{node:e,data:t});e.data=t}function br(e,t,n){if(~T.indexOf(n)){vr(e,t)}else{gr(e,t)}}function wr(e){if(typeof e!=="string"&&!(e&&typeof e==="object"&&"length"in e)){let t="{#each} only iterates over array-like objects.";if(typeof Symbol==="function"&&e&&Symbol.iterator in e){t+=" You can use a spread to convert this iterable into an array."}throw new Error(t)}}function xr(e,t,n){for(const r of Object.keys(t)){if(!~n.indexOf(r)){console.warn(`<${e}> received an unexpected slot "${r}".`)}}}function $r(e){const t=typeof e==="string";if(e&&!t){throw new Error('<svelte:element> expects "this" attribute to be a string.')}}function _r(e){if(e&&On(e)){console.warn(`<svelte:element this="${e}"> is self-closing and cannot have content.`)}}function Sr(e,t){const n="this={...} of <svelte:component> should specify a Svelte component.";try{const r=new e(t);if(!r.$$||!r.$set||!r.$on||!r.$destroy){throw new Error(n)}return r}catch(e){const{message:t}=e;if(typeof t==="string"&&t.indexOf("is not a constructor")!==-1){throw new Error(n)}else{throw e}}}class kr extends(null&&rr){constructor(e){if(!e||!e.target&&!e.$$inline){throw new Error("'target' is a required option")}super()}$destroy(){super.$destroy();this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}class Er extends(null&&kr){constructor(e){super(e)}}function Ar(e){const t=Date.now();return()=>{if(Date.now()-t>e){throw new Error("Infinite loop detected")}}}const Pr=parseFloat;function Cr(e,t=";"){let n;if(Array.isArray(e)){n=e.filter((e=>e))}else{n=[];for(const t in e){if(e[t]){n.push(`${t}:${e[t]}`)}}}return n.join(t)}function Or(e,t,n,r){let s;let o;const i="1em";let a;let l;let c;let u="-.125em";const f="visible";if(r){c="center";o="1.25em"}if(n){s=n}if(t){if(t=="lg"){l="1.33333em";a=".75em";u="-.225em"}else if(t=="xs"){l=".75em"}else if(t=="sm"){l=".875em"}else{l=t.replace("x","em")}}return Cr([Cr({float:s,width:o,height:i,"line-height":a,"font-size":l,"text-align":c,"vertical-align":u,"transform-origin":"center",overflow:f}),e])}function Rr(e,t,n,r,s,o=1,i="",a=""){let l=1;let c=1;if(s){if(s=="horizontal"){l=-1}else if(s=="vertical"){c=-1}else{l=c=-1}}return Cr([`translate(${Pr(t)*o}${i},${Pr(n)*o}${i})`,`scale(${l*Pr(e)},${c*Pr(e)})`,r&&`rotate(${r}${a})`]," ")}function Fr(e){let t;let n;let r;let s;let o;let i;let a;let l;function c(e,t){if(typeof e[10][4]=="string")return jr;return Ir}let u=c(e,-1);let f=u(e);return{c(){t=de("svg");n=de("g");r=de("g");f.c();_e(r,"transform",e[12]);_e(n,"transform",s="translate("+e[10][0]/2+" "+e[10][1]/2+")");_e(n,"transform-origin",o=""+(e[10][0]/4+" 0"));_e(t,"id",i=e[1]||undefined);_e(t,"class",a="svelte-fa "+e[0]+" f");_e(t,"style",e[11]);_e(t,"viewBox",l="0 0 "+e[10][0]+" "+e[10][1]);_e(t,"aria-hidden","true");_e(t,"role","img");_e(t,"xmlns","http://www.w3.org/2000/svg");ct(t,"pulse",e[4]);ct(t,"spin",e[3])},m(e,s){oe(e,t,s);Z(t,n);Z(n,r);f.m(r,null)},p(e,d){if(u===(u=c(e,d))&&f){f.p(e,d)}else{f.d(1);f=u(e);if(f){f.c();f.m(r,null)}}if(d&4096){_e(r,"transform",e[12])}if(d&1024&&s!==(s="translate("+e[10][0]/2+" "+e[10][1]/2+")")){_e(n,"transform",s)}if(d&1024&&o!==(o=""+(e[10][0]/4+" 0"))){_e(n,"transform-origin",o)}if(d&2&&i!==(i=e[1]||undefined)){_e(t,"id",i)}if(d&1&&a!==(a="svelte-fa "+e[0]+" f")){_e(t,"class",a)}if(d&2048){_e(t,"style",e[11])}if(d&1024&&l!==(l="0 0 "+e[10][0]+" "+e[10][1])){_e(t,"viewBox",l)}if(d&17){ct(t,"pulse",e[4])}if(d&9){ct(t,"spin",e[3])}},d(e){if(e)ae(t);f.d()}}}function Ir(e){let t;let n;let r;let s;let o;let i;let a;let l;let c;let u;return{c(){t=de("path");i=de("path");_e(t,"d",n=e[10][4][0]);_e(t,"fill",r=e[6]||e[2]||"currentColor");_e(t,"fill-opacity",s=e[9]!=false?e[7]:e[8]);_e(t,"transform",o="translate("+e[10][0]/-2+" "+e[10][1]/-2+")");_e(i,"d",a=e[10][4][1]);_e(i,"fill",l=e[5]||e[2]||"currentColor");_e(i,"fill-opacity",c=e[9]!=false?e[8]:e[7]);_e(i,"transform",u="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")},m(e,n){oe(e,t,n);oe(e,i,n)},p(e,f){if(f&1024&&n!==(n=e[10][4][0])){_e(t,"d",n)}if(f&68&&r!==(r=e[6]||e[2]||"currentColor")){_e(t,"fill",r)}if(f&896&&s!==(s=e[9]!=false?e[7]:e[8])){_e(t,"fill-opacity",s)}if(f&1024&&o!==(o="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")){_e(t,"transform",o)}if(f&1024&&a!==(a=e[10][4][1])){_e(i,"d",a)}if(f&36&&l!==(l=e[5]||e[2]||"currentColor")){_e(i,"fill",l)}if(f&896&&c!==(c=e[9]!=false?e[8]:e[7])){_e(i,"fill-opacity",c)}if(f&1024&&u!==(u="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")){_e(i,"transform",u)}},d(e){if(e)ae(t);if(e)ae(i)}}}function jr(e){let t;let n;let r;let s;return{c(){t=de("path");_e(t,"d",n=e[10][4]);_e(t,"fill",r=e[2]||e[5]||"currentColor");_e(t,"transform",s="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")},m(e,n){oe(e,t,n)},p(e,o){if(o&1024&&n!==(n=e[10][4])){_e(t,"d",n)}if(o&36&&r!==(r=e[2]||e[5]||"currentColor")){_e(t,"fill",r)}if(o&1024&&s!==(s="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")){_e(t,"transform",s)}},d(e){if(e)ae(t)}}}function Mr(e){let t;let n=e[10][4]&&Fr(e);return{c(){if(n)n.c();t=ye()},m(e,r){if(n)n.m(e,r);oe(e,t,r)},p(e,[r]){if(e[10][4]){if(n){n.p(e,r)}else{n=Fr(e);n.c();n.m(t.parentNode,t)}}else if(n){n.d(1);n=null}},i:r,o:r,d(e){if(n)n.d(e);if(e)ae(t)}}}function Tr(e,t,n){let{class:r=""}=t;let{id:s=""}=t;let{style:o=""}=t;let{icon:i}=t;let{size:a=""}=t;let{color:l=""}=t;let{fw:c=false}=t;let{pull:u=""}=t;let{scale:f=1}=t;let{translateX:d=0}=t;let{translateY:p=0}=t;let{rotate:h=""}=t;let{flip:y=false}=t;let{spin:m=false}=t;let{pulse:g=false}=t;let{primaryColor:v=""}=t;let{secondaryColor:b=""}=t;let{primaryOpacity:w=1}=t;let{secondaryOpacity:x=.4}=t;let{swapOpacity:$=false}=t;let _;let S;let k;e.$$set=e=>{if("class"in e)n(0,r=e.class);if("id"in e)n(1,s=e.id);if("style"in e)n(13,o=e.style);if("icon"in e)n(14,i=e.icon);if("size"in e)n(15,a=e.size);if("color"in e)n(2,l=e.color);if("fw"in e)n(16,c=e.fw);if("pull"in e)n(17,u=e.pull);if("scale"in e)n(18,f=e.scale);if("translateX"in e)n(19,d=e.translateX);if("translateY"in e)n(20,p=e.translateY);if("rotate"in e)n(21,h=e.rotate);if("flip"in e)n(22,y=e.flip);if("spin"in e)n(3,m=e.spin);if("pulse"in e)n(4,g=e.pulse);if("primaryColor"in e)n(5,v=e.primaryColor);if("secondaryColor"in e)n(6,b=e.secondaryColor);if("primaryOpacity"in e)n(7,w=e.primaryOpacity);if("secondaryOpacity"in e)n(8,x=e.secondaryOpacity);if("swapOpacity"in e)n(9,$=e.swapOpacity)};e.$$.update=()=>{if(e.$$.dirty&16384){e:n(10,_=i&&i.icon||[0,0,"",[],""])}if(e.$$.dirty&237568){e:n(11,S=Or(o,a,u,c))}if(e.$$.dirty&8126464){e:n(12,k=Rr(f,d,p,h,y,512))}};return[r,s,l,m,g,v,b,w,x,$,_,S,k,o,i,a,c,u,f,d,p,h,y]}class Nr extends rr{constructor(e){super();tr(this,e,Tr,Mr,d,{class:0,id:1,style:13,icon:14,size:15,color:2,fw:16,pull:17,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:3,pulse:4,primaryColor:5,secondaryColor:6,primaryOpacity:7,secondaryOpacity:8,swapOpacity:9})}}const Lr=Nr;function Dr(e){return new Promise((t=>{setTimeout(t,e)}))}function Ur(e){return new Promise(((t,n)=>{setTimeout((()=>n(new Error(`Timeout ${e} ms`))),e)}))}function Br(e){const t=parseFloat(e);return!Number.isNaN(t)&&Number.isFinite(t)?t:null}function qr(e){const t=parseInt(e,10);return!Number.isNaN(t)&&Number.isFinite(t)?t:null}function Hr(){try{return crypto.randomUUID()}catch{try{return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}catch{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}))}}}function Wr(e,t){try{const n=JSON.parse(localStorage.getItem(e));return n!==null&&typeof n===typeof t&&n.constructor.name===t.constructor.name?n.constructor.name==="Object"?Object.assign(t,n):n:t}catch(n){log(`Warning: Failed to load ${e} from localStorage: ${n.message}`,n);return t}}function Xr(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){log(`Warning: Failed to save ${e} to localStorage: ${t.message}`,t)}}function zr(e,t,n){const r=new Blob([n],{type:e});const s=window.document.createElement("a");s.href=window.URL.createObjectURL(r);s.download=t;document.body.appendChild(s);s.click();document.body.removeChild(s)}function Vr(e){const t="position: absolute; width: 0; height: 0; overflow: hidden;";document.querySelector("#uploadFileUtil")?.remove();document.body.insertAdjacentHTML("beforeEnd",`<input type="file" id="uploadFileUtil" accept="${e}" style="${t}" />`);const n=document.querySelector("#uploadFileUtil");return new Promise(((e,t)=>{let r=false;n.addEventListener("change",(async()=>{r=true;try{e(JSON.parse(await n.files[0].text()))}catch(e){t(e)}n.remove()}),{once:true});window.addEventListener("focus",(()=>{setTimeout((()=>{if(r)return;e(null);n.remove()}),300)}),{once:true});n.click()}))}var Jr=n(286);const Gr="0.5.4";class Kr extends Error{constructor(e,t,n,r){super(n||(t===null||t===void 0?void 0:t.message)||"Unknown error occurred.");this.status=e;this.headers=r;this.error=t}static generate(e,t,n,r){if(!e){return new Qr({cause:lo(t)})}const s=t;if(e===400){return new Zr(e,s,n,r)}if(e===401){return new es(e,s,n,r)}if(e===403){return new ts(e,s,n,r)}if(e===404){return new ns(e,s,n,r)}if(e===409){return new rs(e,s,n,r)}if(e===422){return new ss(e,s,n,r)}if(e===429){return new os(e,s,n,r)}if(e>=500){return new is(e,s,n,r)}return new Kr(e,s,n,r)}}class Qr extends Kr{constructor({message:e,cause:t}){super(undefined,undefined,e||"Connection error.",undefined);this.status=undefined;if(t)this.cause=t}}class Yr extends Qr{constructor(){super({message:"Request timed out."})}}class Zr extends Kr{constructor(){super(...arguments);this.status=400}}class es extends Kr{constructor(){super(...arguments);this.status=401}}class ts extends Kr{constructor(){super(...arguments);this.status=403}}class ns extends Kr{constructor(){super(...arguments);this.status=404}}class rs extends Kr{constructor(){super(...arguments);this.status=409}}class ss extends Kr{constructor(){super(...arguments);this.status=422}}class os extends Kr{constructor(){super(...arguments);this.status=429}}class is extends Kr{}class as{constructor(e,t){this.response=e;this.controller=t;this.decoder=new ls;this.responseHeaders=Gs(e.headers)}async*iterMessages(){if(!this.response.body){this.controller.abort();throw new Error(`Attempted to iterate over a response with no body`)}const e=new cs;const t=fs(this.response.body);for await(const n of t){for(const t of e.decode(n)){const e=this.decoder.decode(t);if(e)yield e}}for(const t of e.flush()){const e=this.decoder.decode(t);if(e)yield e}}async*[Symbol.asyncIterator](){try{for await(const e of this.iterMessages()){if(e.event==="completion"){try{yield JSON.parse(e.data)}catch(t){console.error(`Could not parse message into JSON:`,e.data);console.error(`From chunk:`,e.raw);throw t}}if(e.event==="ping"){continue}if(e.event==="error"){const t=e.data;const n=ro(t);const r=n?undefined:t;throw Kr.generate(undefined,n,r,this.responseHeaders)}}}catch(e){if(e instanceof Error&&e.name==="AbortError")return;throw e}finally{this.controller.abort()}}}class ls{constructor(){this.event=null;this.data=[];this.chunks=[]}decode(e){if(e.endsWith("\r")){e=e.substring(0,e.length-1)}if(!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};this.event=null;this.data=[];this.chunks=[];return e}this.chunks.push(e);if(e.startsWith(":")){return null}let[t,n,r]=us(e,":");if(r.startsWith(" ")){r=r.substring(1)}if(t==="event"){this.event=r}else if(t==="data"){this.data.push(r)}return null}}class cs{constructor(){this.buffer=[];this.trailingCR=false}decode(e){let t=this.decodeText(e);if(this.trailingCR){t="\r"+t;this.trailingCR=false}if(t.endsWith("\r")){this.trailingCR=true;t=t.slice(0,-1)}if(!t){return[]}const n=cs.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split(cs.NEWLINE_REGEXP);if(r.length===1&&!n){this.buffer.push(r[0]);return[]}if(this.buffer.length>0){r=[this.buffer.join("")+r[0],...r.slice(1)];this.buffer=[]}if(!n){this.buffer=[r.pop()||""]}return r}decodeText(e){var t;if(e==null)return"";if(typeof e==="string")return e;if(typeof Buffer!=="undefined"){if(e instanceof Buffer){return e.toString()}if(e instanceof Uint8Array){return Buffer.from(e).toString()}throw new Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder!=="undefined"){if(e instanceof Uint8Array||e instanceof ArrayBuffer){(t=this.textDecoder)!==null&&t!==void 0?t:this.textDecoder=new TextDecoder("utf8");return this.textDecoder.decode(e)}throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Error(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`)}flush(){if(!this.buffer.length&&!this.trailingCR){return[]}const e=[this.buffer.join("")];this.buffer=[];this.trailingCR=false;return e}}cs.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","","","","","\u2028","\u2029"]);cs.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function us(e,t){const n=e.indexOf(t);if(n!==-1){return[e.substring(0,n),t,e.substring(n+t.length)]}return[e,"",""]}function fs(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();if(e===null||e===void 0?void 0:e.done)t.releaseLock();return e}catch(e){t.releaseLock();throw e}},async return(){const e=t.cancel();t.releaseLock();await e;return{done:true,value:undefined}},[Symbol.asyncIterator](){return this}}}const ds=e=>undefined;const ps=fetch.bind(undefined);const hs=null&&Request;const ys=null&&Response;const ms=null&&Headers;const gs=false;const vs=null&&FormData;const bs=File;const ws=null&&Blob;const xs=false;async function $s(e,t){return{...t,body:new MultipartBody(e)}}async function _s(){throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads")}const Ss=e=>e!=null&&typeof e==="object"&&typeof e.url==="string"&&typeof e.blob==="function";const ks=e=>e!=null&&typeof e==="object"&&typeof e.name==="string"&&typeof e.lastModified==="number"&&Es(e);const Es=e=>e!=null&&typeof e==="object"&&typeof e.size==="number"&&typeof e.type==="string"&&typeof e.text==="function"&&typeof e.slice==="function"&&typeof e.arrayBuffer==="function";const As=e=>ks(e)||Ss(e)||isFsReadStream(e);async function Ps(e,t,n={}){var r,s,o;if(Ss(e)){const s=await e.blob();t||(t=(r=new URL(e.url).pathname.split(/[\\/]/).pop())!==null&&r!==void 0?r:"unknown_file");return new bs([s],t,n)}const i=await Cs(e);t||(t=(s=Rs(e))!==null&&s!==void 0?s:"unknown_file");if(!n.type){const e=(o=i[0])===null||o===void 0?void 0:o.type;if(typeof e==="string"){n={...n,type:e}}}return new bs(i,t,n)}async function Cs(e){var t;e=await e;let n=[];if(typeof e==="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer){n.push(e)}else if(Es(e)){n.push(await e.arrayBuffer())}else if(Is(e)){for await(const t of e){n.push(t)}}else{throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(t=e===null||e===void 0?void 0:e.constructor)===null||t===void 0?void 0:t.name}; props: ${Os(e)}`)}return n}function Os(e){const t=Object.getOwnPropertyNames(e);return`[${t.map((e=>`"${e}"`)).join(", ")}]`}function Rs(e){var t;return Fs(e.name)||Fs(e.filename)||((t=Fs(e.path))===null||t===void 0?void 0:t.split(/[\\/]/).pop())}const Fs=e=>{if(typeof e==="string")return e;if(typeof Buffer!=="undefined"&&e instanceof Buffer)return String(e);return undefined};const Is=e=>e!=null&&typeof e==="object"&&typeof e[Symbol.asyncIterator]==="function";class js{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const Ms=e=>e&&typeof e==="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody";const Ts=async e=>{if(!Ds(e.body))return e;const t=await Ls(e.body);return getMultipartRequestOptions(t,e)};const Ns=async e=>{const t=await Ls(e.body);return getMultipartRequestOptions(t,e)};const Ls=async e=>{const t=new FormData;await Promise.all(Object.entries(e||{}).map((([e,n])=>Us(t,e,n))));return t};const Ds=e=>{if(As(e))return true;if(Array.isArray(e))return e.some(Ds);if(e&&typeof e==="object"){for(const t in e){if(Ds(e[t]))return true}}return false};const Us=async(e,t,n)=>{if(n===undefined)return;if(n==null){throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`)}if(typeof n==="string"||typeof n==="number"||typeof n==="boolean"){e.append(t,n)}else if(As(n)){const r=await Ps(n);e.append(t,r)}else if(Array.isArray(n)){await Promise.all(n.map((n=>Us(e,t+"[]",n))))}else if(typeof n==="object"){await Promise.all(Object.entries(n).map((([n,r])=>Us(e,`${t}[${n}]`,r))))}else{throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Bs=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n};var qs=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)};var Hs;const Ws=2;class Xs{constructor({baseURL:e,maxRetries:t,timeout:n=60*1e3,httpAgent:r,fetch:s}){this.baseURL=e;this.maxRetries=ao("maxRetries",t!==null&&t!==void 0?t:Ws);this.timeout=ao("timeout",n);this.httpAgent=r;this.fetch=s!==null&&s!==void 0?s:ps}authHeaders(){return{}}defaultHeaders(){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...no(),...this.authHeaders()}}validateHeaders(e,t){}qsOptions(){return{}}defaultIdempotencyKey(){return`stainless-node-retry-${mo()}`}get(e,t){return this.request({method:"get",path:e,...t})}post(e,t){return this.request({method:"post",path:e,...t})}patch(e,t){return this.request({method:"patch",path:e,...t})}put(e,t){return this.request({method:"put",path:e,...t})}delete(e,t){return this.request({method:"delete",path:e,...t})}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e==="string"){if(typeof Buffer!=="undefined"){return Buffer.byteLength(e,"utf8").toString()}const t=new TextEncoder;const n=t.encode(e);return n.length.toString()}return null}buildRequest(e){var t,n,r,s;const{method:o,path:i,query:a,headers:l={}}=e;const c=Ms(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null;const u=this.calculateContentLength(c);const f=this.buildURL(i,a);if("timeout"in e)ao("timeout",e.timeout);const d=(t=e.timeout)!==null&&t!==void 0?t:this.timeout;const p=(r=(n=e.httpAgent)!==null&&n!==void 0?n:this.httpAgent)!==null&&r!==void 0?r:ds(f);const h=d+1e3;if((p===null||p===void 0?void 0:p.options)&&h>((s=p.options.timeout)!==null&&s!==void 0?s:0)){p.options.timeout=h}if(this.idempotencyHeader&&o!=="get"){if(!e.idempotencyKey)e.idempotencyKey=this.defaultIdempotencyKey();l[this.idempotencyHeader]=e.idempotencyKey}const y={...u&&{"Content-Length":u},...this.defaultHeaders(),...l};if(Ms(e.body)&&!gs){delete y["Content-Type"]}Object.keys(y).forEach((e=>y[e]===null&&delete y[e]));const m={method:o,...c&&{body:c},headers:y,...p&&{agent:p}};this.validateHeaders(y,l);return{req:m,url:f,timeout:d}}async prepareRequest(e,{url:t}){}makeStatusError(e,t,n,r){return Kr.generate(e,t,n,r)}async request(e,t){var n;if(t===void 0){t=(n=e.maxRetries)!==null&&n!==void 0?n:this.maxRetries}const{req:r,url:s,timeout:o}=this.buildRequest(e);await this.prepareRequest(r,{url:s});this.debug("request",s,e,r.headers);const i=new AbortController;const a=await this.fetchWithTimeout(s,r,o,i).catch(lo);if(a instanceof Error){if(t)return this.retryRequest(e,t);if(a.name==="AbortError")throw new Yr;throw new Qr({cause:a})}const l=Gs(a.headers);if(!a.ok){if(t&&this.shouldRetry(a)){return this.retryRequest(e,t,l)}const n=await a.text().catch((()=>"Unknown"));const r=ro(n);const o=r?undefined:n;this.debug("response",a.status,s,l,o);const i=this.makeStatusError(a.status,r,o,l);throw i}if(e.stream){return new as(a,i)}const c=a.headers.get("content-type");if(c===null||c===void 0?void 0:c.includes("application/json")){const e=await a.json();if(typeof e==="object"&&e!=null){Object.defineProperty(e,"responseHeaders",{enumerable:false,writable:false,value:l})}this.debug("response",a.status,s,l,e);return e}const u=a.text();this.debug("response",a.status,s,l,u);return u}requestAPIList(e,t){const n=this.request(t);return new Js(this,n,t,e)}buildURL(e,t){const n=oo(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e));const r=this.defaultQuery();if(!ho(r)){t={...r,...t}}if(t){n.search=Jr.stringify(t,this.qsOptions())}return n.toString()}async fetchWithTimeout(e,t,n,r){const{signal:s,...o}=t||{};if(s)s.addEventListener("abort",(()=>r.abort()));const i=setTimeout((()=>r.abort()),n);return this.getRequestClient().fetch(e,{signal:r.signal,...o}).finally((()=>{clearTimeout(i)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");if(t==="true")return true;if(t==="false")return false;if(e.status===409)return true;if(e.status===429)return true;if(e.status>=500)return true;return false}async retryRequest(e,t,n){var r;t-=1;const s=parseInt((n===null||n===void 0?void 0:n["retry-after"])||"");const o=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;const i=this.calculateRetryTimeoutSeconds(t,s,o)*1e3;await io(i);return this.request(e,t)}calculateRetryTimeoutSeconds(e,t,n){const r=.5;const s=2;if(Number.isInteger(t)&&t<=60){return t}const o=n-e;const i=Math.min(r*Math.pow(o-1,2),s);const a=Math.random()-.5;return i+a}getUserAgent(){return`${this.constructor.name}/JS ${Gr}`}debug(e,...t){if(typeof process!=="undefined"&&"MISSING_ENV_VAR"["DEBUG"]==="true"){console.log(`${this.constructor.name}:DEBUG:${e}`,...t)}}}class zs{constructor(e){this.client=e;this.get=e.get.bind(e);this.post=e.post.bind(e);this.patch=e.patch.bind(e);this.put=e.put.bind(e);this.delete=e.delete.bind(e);this.getAPIList=e.getAPIList.bind(e)}}class Vs{constructor(e,t,n){Hs.set(this,void 0);Bs(this,Hs,e,"f");this.options=n}hasNextPage(){const e=this.getPaginatedItems();if(!e.length)return false;return this.nextPageInfo()!=null}async getNextPage(){const e=this.nextPageInfo();if(!e){throw new Error("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.")}const t={...this.options};if("params"in e){t.query={...t.query,...e.params}}else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n){e.url.searchParams.set(t,r)}t.query=undefined;t.path=e.url.toString()}return await qs(this,Hs,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;yield e;while(e.hasNextPage()){e=await e.getNextPage();yield e}}async*[(Hs=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages()){for(const t of e.getPaginatedItems()){yield t}}}}class Js extends Promise{constructor(e,t,n,r){super(((s,o)=>t.then((t=>s(new r(e,t,n)))).catch(o)))}static get[Symbol.species](){return Promise}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e){yield t}}}const Gs=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}});const Ks={method:true,path:true,query:true,body:true,headers:true,maxRetries:true,stream:true,timeout:true,httpAgent:true,idempotencyKey:true};const Qs=e=>typeof e==="object"&&e!==null&&!ho(e)&&Object.keys(e).every((e=>yo(Ks,e)));const Ys=()=>{if(typeof Deno!=="undefined"&&Deno.build!=null){return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gr,"X-Stainless-OS":eo(Deno.build.os),"X-Stainless-Arch":Zs(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version}}if(typeof EdgeRuntime!=="undefined"){return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version}}if(Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"){return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gr,"X-Stainless-OS":eo(process.platform),"X-Stainless-Arch":Zs(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version}}return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const Zs=e=>{if(e==="x32")return"x32";if(e==="x86_64"||e==="x64")return"x64";if(e==="arm")return"arm";if(e==="aarch64"||e==="arm64")return"arm64";if(e)return`other:${e}`;return"unknown"};const eo=e=>{e=e.toLowerCase();if(e.includes("ios"))return"iOS";if(e==="android")return"Android";if(e==="darwin")return"MacOS";if(e==="win32")return"Windows";if(e==="freebsd")return"FreeBSD";if(e==="openbsd")return"OpenBSD";if(e==="linux")return"Linux";if(e)return`Other:${e}`;return"Unknown"};let to;const no=()=>to!==null&&to!==void 0?to:to=Ys();const ro=e=>{try{return JSON.parse(e)}catch(e){return undefined}};const so=new RegExp("^(?:[a-z]+:)?//","i");const oo=e=>so.test(e);const io=e=>new Promise((t=>setTimeout(t,e)));const ao=(e,t)=>{if(!Number.isInteger(t)){throw new Error(`${e} must be an integer`)}if(t<0){throw new Error(`${e} must be a positive integer`)}return t};const lo=e=>{if(e instanceof Error)return e;return new Error(e)};const co=e=>{if(e==null)throw new Error(`Expected a value to be given but received ${e} instead.`);return e};const uo=e=>{if(typeof e==="number")return Math.round(e);if(typeof e==="string")return parseInt(e,10);throw new Error(`Could not coerce ${e} (type: ${typeof e}) into a number`)};const fo=e=>{if(typeof e==="number")return e;if(typeof e==="string")return parseFloat(e);throw new Error(`Could not coerce ${e} (type: ${typeof e}) into a number`)};const po=e=>{if(typeof e==="boolean")return e;if(typeof e==="string")return e==="true";return Boolean(e)};function ho(e){if(!e)return true;for(const t in e)return false;return true}function yo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const mo=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=Math.random()*16|0;const n=e==="x"?t:t&3|8;return n.toString(16)}));const go=e=>typeof(e===null||e===void 0?void 0:e.get)==="function";const vo=(e,t)=>{const n=t.toLowerCase();if(go(e))return e.get(t)||e.get(n);const r=e[t]||e[n];if(Array.isArray(r)){if(r.length<=1)return r[0];console.warn(`Received ${r.length} entries for the ${t} header, using the first entry.`);return r[0]}return r};class bo{constructor(e){this.client=e;this.get=e.get.bind(e);this.post=e.post.bind(e);this.patch=e.patch.bind(e);this.put=e.put.bind(e);this.delete=e.delete.bind(e);this.getAPIList=e.getAPIList.bind(e)}}class wo extends bo{create(e,t){var n;return this.post("/v1/complete",{body:e,timeout:6e5,...t,stream:(n=e.stream)!==null&&n!==void 0?n:false})}}(function(e){})(wo||(wo={}));class xo extends Xs{constructor(e){const t={apiKey:typeof process==="undefined"?"":"MISSING_ENV_VAR"["ANTHROPIC_API_KEY"]||"",baseURL:"https://api.anthropic.com",...e};super({baseURL:t.baseURL,timeout:t.timeout,httpAgent:t.httpAgent,maxRetries:t.maxRetries,fetch:t.fetch});this.completions=new wo(this);this.apiKey=t.apiKey||null;this._options=t;this.authToken=(e===null||e===void 0?void 0:e.authToken)||"MISSING_ENV_VAR"["ANTHROPIC_AUTH_TOKEN"]||null}defaultQuery(){return this._options.defaultQuery}defaultHeaders(){return{...super.defaultHeaders(),"anthropic-version":"2023-06-01",...this._options.defaultHeaders}}validateHeaders(e,t){if(this.apiKey&&e["X-Api-Key"]){return}if(t["X-Api-Key"]===null){return}if(this.authToken&&e["Authorization"]){return}if(t["Authorization"]===null){return}throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(){const e=this.apiKeyHeader();if(e!=null&&!ho(e)){return e}const t=this.authTokenBearer();if(t!=null&&!ho(t)){return t}return{}}apiKeyHeader(){if(this.apiKey==null){return{}}return{"X-Api-Key":this.apiKey}}authTokenBearer(){if(this.authToken==null){return{}}return{Authorization:`Bearer ${this.authToken}`}}qsOptions(){return{arrayFormat:"comma"}}}xo.HUMAN_PROMPT="\n\nHuman:";xo.AI_PROMPT="\n\nAssistant:";xo.APIError=Kr;xo.APIConnectionError=Qr;xo.APIConnectionTimeoutError=Yr;xo.NotFoundError=ns;xo.ConflictError=rs;xo.RateLimitError=os;xo.BadRequestError=Zr;xo.AuthenticationError=es;xo.InternalServerError=is;xo.PermissionDeniedError=ts;xo.UnprocessableEntityError=ss;const{HUMAN_PROMPT:$o,AI_PROMPT:_o}=xo;const{APIError:So,APIConnectionError:ko,APIConnectionTimeoutError:Eo,NotFoundError:Ao,ConflictError:Po,RateLimitError:Co,BadRequestError:Oo,AuthenticationError:Ro,InternalServerError:Fo,PermissionDeniedError:Io,UnprocessableEntityError:jo}=e;var Mo=Ps;var To=_s;(function(e){e.toFile=Ps;e.fileFromPath=_s;e.Completions=wo})(xo||(xo={}));const No=null&&xo;const Lo="4.20.1";let Do=false;let Uo=undefined;let Bo=undefined;let qo=null&&undefined;let Ho=null&&undefined;let Wo=null&&undefined;let Xo=undefined;let zo=null&&undefined;let Vo=undefined;let Jo=undefined;let Go=undefined;let Ko=undefined;let Qo=undefined;let Yo=undefined;function Zo(e,t={auto:false}){if(Do){throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`)}if(Uo){throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${Uo}'\``)}Do=t.auto;Uo=e.kind;Bo=e.fetch;qo=e.Request;Ho=e.Response;Wo=e.Headers;Xo=e.FormData;zo=e.Blob;Vo=e.File;Jo=e.ReadableStream;Go=e.getMultipartRequestOptions;Ko=e.getDefaultAgent;Qo=e.fileFromPath;Yo=e.isFsReadStream}class ei{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function ti({manuallyImported:e}={}){const t=e?`You may need to use polyfills`:`Add one of these imports before your first \`import … from 'openai'\`:\n- \`import 'openai/shims/node'\` (if you're running on Node)\n- \`import 'openai/shims/web'\` (otherwise)\n`;let n,r,s,o;try{n=fetch;r=Request;s=Response;o=Headers}catch(e){throw new Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:o,FormData:typeof FormData!=="undefined"?FormData:class e{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob!=="undefined"?Blob:class e{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File!=="undefined"?File:class e{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream!=="undefined"?ReadableStream:class e{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new ei(e)}),getDefaultAgent:e=>undefined,fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>false}}if(!Uo)Zo(ti(),{auto:true});class ni extends Error{}class ri extends ni{constructor(e,t,n,r){super(`${ri.makeMessage(e,t,n)}`);this.status=e;this.headers=r;const s=t;this.error=s;this.code=s?.["code"];this.param=s?.["param"];this.type=s?.["type"]}static makeMessage(e,t,n){const r=t?.message?typeof t.message==="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;if(e&&r){return`${e} ${r}`}if(e){return`${e} status code (no body)`}if(r){return r}return"(no status code or body)"}static generate(e,t,n,r){if(!e){return new oi({cause:sa(t)})}const s=t?.["error"];if(e===400){return new ai(e,s,n,r)}if(e===401){return new li(e,s,n,r)}if(e===403){return new ci(e,s,n,r)}if(e===404){return new ui(e,s,n,r)}if(e===409){return new fi(e,s,n,r)}if(e===422){return new di(e,s,n,r)}if(e===429){return new pi(e,s,n,r)}if(e>=500){return new hi(e,s,n,r)}return new ri(e,s,n,r)}}class si extends ri{constructor({message:e}={}){super(undefined,undefined,e||"Request was aborted.",undefined);this.status=undefined}}class oi extends ri{constructor({message:e,cause:t}){super(undefined,undefined,e||"Connection error.",undefined);this.status=undefined;if(t)this.cause=t}}class ii extends oi{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ai extends ri{constructor(){super(...arguments);this.status=400}}class li extends ri{constructor(){super(...arguments);this.status=401}}class ci extends ri{constructor(){super(...arguments);this.status=403}}class ui extends ri{constructor(){super(...arguments);this.status=404}}class fi extends ri{constructor(){super(...arguments);this.status=409}}class di extends ri{constructor(){super(...arguments);this.status=422}}class pi extends ri{constructor(){super(...arguments);this.status=429}}class hi extends ri{}class yi{constructor(e,t){this.iterator=e;this.controller=t}static fromSSEResponse(e,t){let n=false;const r=new mi;async function*s(){if(!e.body){t.abort();throw new ni(`Attempted to iterate over a response with no body`)}const n=new gi;const s=bi(e.body);for await(const e of s){for(const t of n.decode(e)){const e=r.decode(t);if(e)yield e}}for(const e of n.flush()){const t=r.decode(e);if(t)yield t}}async function*o(){if(n){throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.")}n=true;let e=false;try{for await(const t of s()){if(e)continue;if(t.data.startsWith("[DONE]")){e=true;continue}if(t.event===null){let e;try{e=JSON.parse(t.data)}catch(e){console.error(`Could not parse message into JSON:`,t.data);console.error(`From chunk:`,t.raw);throw e}if(e&&e.error){throw new ri(undefined,e.error,undefined,undefined)}yield e}}e=true}catch(e){if(e instanceof Error&&e.name==="AbortError")return;throw e}finally{if(!e)t.abort()}}return new yi(o,t)}static fromReadableStream(e,t){let n=false;async function*r(){const t=new gi;const n=bi(e);for await(const e of n){for(const n of t.decode(e)){yield n}}for(const e of t.flush()){yield e}}async function*s(){if(n){throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.")}n=true;let e=false;try{for await(const t of r()){if(e)continue;if(t)yield JSON.parse(t)}e=true}catch(e){if(e instanceof Error&&e.name==="AbortError")return;throw e}finally{if(!e)t.abort()}}return new yi(s,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[];const t=[];const n=this.iterator();const r=r=>({next:()=>{if(r.length===0){const r=n.next();e.push(r);t.push(r)}return r.shift()}});return[new yi((()=>r(e)),this.controller),new yi((()=>r(t)),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new Jo({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:s}=await t.next();if(s)return e.close();const o=n.encode(JSON.stringify(r)+"\n");e.enqueue(o)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}class mi{constructor(){this.event=null;this.data=[];this.chunks=[]}decode(e){if(e.endsWith("\r")){e=e.substring(0,e.length-1)}if(!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};this.event=null;this.data=[];this.chunks=[];return e}this.chunks.push(e);if(e.startsWith(":")){return null}let[t,n,r]=vi(e,":");if(r.startsWith(" ")){r=r.substring(1)}if(t==="event"){this.event=r}else if(t==="data"){this.data.push(r)}return null}}class gi{constructor(){this.buffer=[];this.trailingCR=false}decode(e){let t=this.decodeText(e);if(this.trailingCR){t="\r"+t;this.trailingCR=false}if(t.endsWith("\r")){this.trailingCR=true;t=t.slice(0,-1)}if(!t){return[]}const n=gi.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split(gi.NEWLINE_REGEXP);if(r.length===1&&!n){this.buffer.push(r[0]);return[]}if(this.buffer.length>0){r=[this.buffer.join("")+r[0],...r.slice(1)];this.buffer=[]}if(!n){this.buffer=[r.pop()||""]}return r}decodeText(e){if(e==null)return"";if(typeof e==="string")return e;if(typeof Buffer!=="undefined"){if(e instanceof Buffer){return e.toString()}if(e instanceof Uint8Array){return Buffer.from(e).toString()}throw new ni(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder!=="undefined"){if(e instanceof Uint8Array||e instanceof ArrayBuffer){this.textDecoder??(this.textDecoder=new TextDecoder("utf8"));return this.textDecoder.decode(e)}throw new ni(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new ni(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`)}flush(){if(!this.buffer.length&&!this.trailingCR){return[]}const e=[this.buffer.join("")];this.buffer=[];this.trailingCR=false;return e}}gi.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","","","","","\u2028","\u2029"]);gi.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function vi(e,t){const n=e.indexOf(t);if(n!==-1){return[e.substring(0,n),t,e.substring(n+t.length)]}return[e,"",""]}function bi(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();if(e?.done)t.releaseLock();return e}catch(e){t.releaseLock();throw e}},async return(){const e=t.cancel();t.releaseLock();await e;return{done:true,value:undefined}},[Symbol.asyncIterator](){return this}}}const wi=e=>e!=null&&typeof e==="object"&&typeof e.url==="string"&&typeof e.blob==="function";const xi=e=>e!=null&&typeof e==="object"&&typeof e.name==="string"&&typeof e.lastModified==="number"&&$i(e);const $i=e=>e!=null&&typeof e==="object"&&typeof e.size==="number"&&typeof e.type==="string"&&typeof e.text==="function"&&typeof e.slice==="function"&&typeof e.arrayBuffer==="function";const _i=e=>xi(e)||wi(e)||Yo(e);async function Si(e,t,n={}){e=await e;if(wi(e)){const r=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");return new Vo([r],t,n)}const r=await ki(e);t||(t=Ai(e)??"unknown_file");if(!n.type){const e=r[0]?.type;if(typeof e==="string"){n={...n,type:e}}}return new Vo(r,t,n)}async function ki(e){let t=[];if(typeof e==="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer){t.push(e)}else if($i(e)){t.push(await e.arrayBuffer())}else if(Ci(e)){for await(const n of e){t.push(n)}}else{throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${Ei(e)}`)}return t}function Ei(e){const t=Object.getOwnPropertyNames(e);return`[${t.map((e=>`"${e}"`)).join(", ")}]`}function Ai(e){return Pi(e.name)||Pi(e.filename)||Pi(e.path)?.split(/[\\/]/).pop()}const Pi=e=>{if(typeof e==="string")return e;if(typeof Buffer!=="undefined"&&e instanceof Buffer)return String(e);return undefined};const Ci=e=>e!=null&&typeof e==="object"&&typeof e[Symbol.asyncIterator]==="function";const Oi=e=>e&&typeof e==="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody";const Ri=async e=>{if(!ji(e.body))return e;const t=await Ii(e.body);return getMultipartRequestOptions(t,e)};const Fi=async e=>{const t=await Ii(e.body);return Go(t,e)};const Ii=async e=>{const t=new Xo;await Promise.all(Object.entries(e||{}).map((([e,n])=>Mi(t,e,n))));return t};const ji=e=>{if(_i(e))return true;if(Array.isArray(e))return e.some(ji);if(e&&typeof e==="object"){for(const t in e){if(ji(e[t]))return true}}return false};const Mi=async(e,t,n)=>{if(n===undefined)return;if(n==null){throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`)}if(typeof n==="string"||typeof n==="number"||typeof n==="boolean"){e.append(t,String(n))}else if(_i(n)){const r=await Si(n);e.append(t,r)}else if(Array.isArray(n)){await Promise.all(n.map((n=>Mi(e,t+"[]",n))))}else if(typeof n==="object"){await Promise.all(Object.entries(n).map((([n,r])=>Mi(e,`${t}[${n}]`,r))))}else{throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Ti=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n};var Ni=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)};var Li;async function Di(e){const{response:t}=e;if(e.options.stream){ya("response",t.status,t.url,t.headers,t.body);return yi.fromSSEResponse(t,e.controller)}if(t.status===204){return null}if(e.options.__binaryResponse){return t}const n=t.headers.get("content-type");if(n?.includes("application/json")){const e=await t.json();ya("response",t.status,t.url,t.headers,e);return e}const r=await t.text();ya("response",t.status,t.url,t.headers,r);return r}class Ui extends Promise{constructor(e,t=Di){super((e=>{e(null)}));this.responsePromise=e;this.parseResponse=t}_thenUnwrap(e){return new Ui(this.responsePromise,(async t=>e(await this.parseResponse(t))))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){if(!this.parsedPromise){this.parsedPromise=this.responsePromise.then(this.parseResponse)}return this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Bi{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:s}){this.baseURL=e;this.maxRetries=ra("maxRetries",t);this.timeout=ra("timeout",n);this.httpAgent=r;this.fetch=s??Bo}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Yi(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${ma()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then((n=>({method:e,path:t,...n}))))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e==="string"){if(typeof Buffer!=="undefined"){return Buffer.byteLength(e,"utf8").toString()}if(typeof TextEncoder!=="undefined"){const t=new TextEncoder;const n=t.encode(e);return n.length.toString()}}return null}buildRequest(e){const{method:t,path:n,query:r,headers:s={}}=e;const o=Oi(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null;const i=this.calculateContentLength(o);const a=this.buildURL(n,r);if("timeout"in e)ra("timeout",e.timeout);const l=e.timeout??this.timeout;const c=e.httpAgent??this.httpAgent??Ko(a);const u=l+1e3;if(typeof c?.options?.timeout==="number"&&u>(c.options.timeout??0)){c.options.timeout=u}if(this.idempotencyHeader&&t!=="get"){if(!e.idempotencyKey)e.idempotencyKey=this.defaultIdempotencyKey();s[this.idempotencyHeader]=e.idempotencyKey}const f={...i&&{"Content-Length":i},...this.defaultHeaders(e),...s};if(Oi(e.body)&&Uo!=="node"){delete f["Content-Type"]}Object.keys(f).forEach((e=>f[e]===null&&delete f[e]));const d={method:t,...o&&{body:o},headers:f,...c&&{agent:c},signal:e.signal??null};this.validateHeaders(f,s);return{req:d,url:a,timeout:l}}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return!e?{}:Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}}makeStatusError(e,t,n,r){return ri.generate(e,t,n,r)}request(e,t=null){return new Ui(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e;if(t==null){t=n.maxRetries??this.maxRetries}const{req:r,url:s,timeout:o}=this.buildRequest(n);await this.prepareRequest(r,{url:s,options:n});ya("request",s,n,r.headers);if(n.signal?.aborted){throw new si}const i=new AbortController;const a=await this.fetchWithTimeout(s,r,o,i).catch(sa);if(a instanceof Error){if(n.signal?.aborted){throw new si}if(t){return this.retryRequest(n,t)}if(a.name==="AbortError"){throw new ii}throw new oi({cause:a})}const l=Wi(a.headers);if(!a.ok){if(t&&this.shouldRetry(a)){return this.retryRequest(n,t,l)}const e=await a.text().catch((e=>sa(e).message));const r=Zi(e);const o=r?undefined:e;ya("response",a.status,s,l,o);const i=this.makeStatusError(a.status,r,o,l);throw i}return{response:a,options:n,controller:i}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Hi(this,n,e)}buildURL(e,t){const n=ta(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e));const r=this.defaultQuery();if(!pa(r)){t={...r,...t}}if(t){n.search=this.stringifyQuery(t)}return n.toString()}stringifyQuery(e){return Object.entries(e).filter((([e,t])=>typeof t!=="undefined")).map((([e,t])=>{if(typeof t==="string"||typeof t==="number"||typeof t==="boolean"){return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`}if(t===null){return`${encodeURIComponent(e)}=`}throw new ni(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:s,...o}=t||{};if(s)s.addEventListener("abort",(()=>r.abort()));const i=setTimeout((()=>r.abort()),n);return this.getRequestClient().fetch.call(undefined,e,{signal:r.signal,...o}).finally((()=>{clearTimeout(i)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");if(t==="true")return true;if(t==="false")return false;if(e.status===408)return true;if(e.status===409)return true;if(e.status===429)return true;if(e.status>=500)return true;return false}async retryRequest(e,t,n){let r;const s=n?.["retry-after"];if(s){const e=parseInt(s);if(!Number.isNaN(e)){r=e*1e3}else{r=Date.parse(s)-Date.now()}}if(!r||!Number.isInteger(r)||r<=0||r>60*1e3){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}await na(r);return this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=.5;const r=8;const s=t-e;const o=Math.min(n*Math.pow(2,s),r);const i=1-Math.random()*.25;return o*i*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Lo}`}}class qi{constructor(e,t,n,r){Li.set(this,void 0);Ti(this,Li,e,"f");this.options=r;this.response=t;this.body=n}hasNextPage(){const e=this.getPaginatedItems();if(!e.length)return false;return this.nextPageInfo()!=null}async getNextPage(){const e=this.nextPageInfo();if(!e){throw new ni("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.")}const t={...this.options};if("params"in e){t.query={...t.query,...e.params}}else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n){e.url.searchParams.set(t,r)}t.query=undefined;t.path=e.url.toString()}return await Ni(this,Li,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;yield e;while(e.hasNextPage()){e=await e.getNextPage();yield e}}async*[(Li=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages()){for(const t of e.getPaginatedItems()){yield t}}}}class Hi extends Ui{constructor(e,t,n){super(t,(async t=>new n(e,t.response,await Di(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e){yield t}}}const Wi=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}});const Xi={method:true,path:true,query:true,body:true,headers:true,maxRetries:true,stream:true,timeout:true,httpAgent:true,signal:true,idempotencyKey:true,__binaryResponse:true};const zi=e=>typeof e==="object"&&e!==null&&!pa(e)&&Object.keys(e).every((e=>ha(Xi,e)));const Vi=()=>{if(typeof Deno!=="undefined"&&Deno.build!=null){return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lo,"X-Stainless-OS":Ki(Deno.build.os),"X-Stainless-Arch":Gi(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version}}if(typeof EdgeRuntime!=="undefined"){return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version}}if(Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"){return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lo,"X-Stainless-OS":Ki(process.platform),"X-Stainless-Arch":Gi(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version}}const e=Ji();if(e){return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}}return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ji(){if(typeof navigator==="undefined"||!navigator){return null}const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){const n=e[1]||0;const r=e[2]||0;const s=e[3]||0;return{browser:t,version:`${n}.${r}.${s}`}}}return null}const Gi=e=>{if(e==="x32")return"x32";if(e==="x86_64"||e==="x64")return"x64";if(e==="arm")return"arm";if(e==="aarch64"||e==="arm64")return"arm64";if(e)return`other:${e}`;return"unknown"};const Ki=e=>{e=e.toLowerCase();if(e.includes("ios"))return"iOS";if(e==="android")return"Android";if(e==="darwin")return"MacOS";if(e==="win32")return"Windows";if(e==="freebsd")return"FreeBSD";if(e==="openbsd")return"OpenBSD";if(e==="linux")return"Linux";if(e)return`Other:${e}`;return"Unknown"};let Qi;const Yi=()=>Qi??(Qi=Vi());const Zi=e=>{try{return JSON.parse(e)}catch(e){return undefined}};const ea=new RegExp("^(?:[a-z]+:)?//","i");const ta=e=>ea.test(e);const na=e=>new Promise((t=>setTimeout(t,e)));const ra=(e,t)=>{if(typeof t!=="number"||!Number.isInteger(t)){throw new ni(`${e} must be an integer`)}if(t<0){throw new ni(`${e} must be a positive integer`)}return t};const sa=e=>{if(e instanceof Error)return e;return new Error(e)};const oa=e=>{if(e==null)throw new OpenAIError(`Expected a value to be given but received ${e} instead.`);return e};const ia=e=>{if(typeof process!=="undefined"){return"MISSING_ENV_VAR"?.[e]??undefined}if(typeof Deno!=="undefined"){return Deno.env?.get?.(e)}return undefined};const aa=e=>{if(typeof e==="number")return Math.round(e);if(typeof e==="string")return parseInt(e,10);throw new OpenAIError(`Could not coerce ${e} (type: ${typeof e}) into a number`)};const la=e=>{if(typeof e==="number")return e;if(typeof e==="string")return parseFloat(e);throw new OpenAIError(`Could not coerce ${e} (type: ${typeof e}) into a number`)};const ca=e=>{if(typeof e==="boolean")return e;if(typeof e==="string")return e==="true";return Boolean(e)};const ua=e=>{if(e===undefined){return undefined}return aa(e)};const fa=e=>{if(e===undefined){return undefined}return la(e)};const da=e=>{if(e===undefined){return undefined}return ca(e)};function pa(e){if(!e)return true;for(const t in e)return false;return true}function ha(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ya(e,...t){if(typeof process!=="undefined"&&"MISSING_ENV_VAR"["DEBUG"]==="true"){console.log(`OpenAI:DEBUG:${e}`,...t)}}const ma=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=Math.random()*16|0;const n=e==="x"?t:t&3|8;return n.toString(16)}));const ga=()=>typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof navigator!=="undefined";const va=e=>typeof e?.get==="function";const ba=(e,t)=>{const n=t.toLowerCase();if(va(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,((e,t,n)=>t+n.toUpperCase()));for(const s of[t,n,t.toUpperCase(),r]){const t=e.get(s);if(t){return t}}}for(const[r,s]of Object.entries(e)){if(r.toLowerCase()===n){if(Array.isArray(s)){if(s.length<=1)return s[0];console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`);return s[0]}return s}}throw new Error(`Could not find ${t} header`)};const wa=e=>{if(!e)return"";if(typeof Buffer!=="undefined"){return Buffer.from(e).toString("base64")}if(typeof btoa!=="undefined"){return btoa(e)}throw new OpenAIError("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined")};class xa extends qi{constructor(e,t,n,r){super(e,t,n,r);this.data=n.data;this.object=n.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class $a extends qi{constructor(e,t,n,r){super(e,t,n,r);this.data=n.data}getPaginatedItems(){return this.data}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);if(!Object.keys(t).length)return null;return t}nextPageInfo(){if(!this.data?.length){return null}const e=this.data[this.data.length-1]?.id;if(!e)return null;return{params:{after:e}}}}class _a{constructor(e){this._client=e}}class Sa extends _a{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??false})}}(function(e){})(Sa||(Sa={}));class ka extends _a{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??false})}}(function(e){})(ka||(ka={}));class Ea extends _a{constructor(){super(...arguments);this.completions=new ka(this._client)}}(function(e){e.Completions=ka})(Ea||(Ea={}));class Aa extends _a{create(e,t){return this._client.post("/edits",{body:e,...t})}}(function(e){})(Aa||(Aa={}));class Pa extends _a{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}(function(e){})(Pa||(Pa={}));class Ca extends _a{create(e,t){return this._client.post("/files",Fi({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){if(zi(e)){return this.list({},e)}return this._client.getAPIList("/files",Oa,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:true})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]);const s=Date.now();let o=await this.retrieve(e);while(!o.status||!r.has(o.status)){await na(t);o=await this.retrieve(e);if(Date.now()-s>n){throw new ii({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`})}}return o}}class Oa extends xa{}(function(e){e.FileObjectsPage=Oa})(Ca||(Ca={}));class Ra extends _a{createVariation(e,t){return this._client.post("/images/variations",Fi({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Fi({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}(function(e){})(Ra||(Ra={}));class Fa extends _a{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:true})}}(function(e){})(Fa||(Fa={}));class Ia extends _a{create(e,t){return this._client.post("/audio/transcriptions",Fi({body:e,...t}))}}(function(e){})(Ia||(Ia={}));class ja extends _a{create(e,t){return this._client.post("/audio/translations",Fi({body:e,...t}))}}(function(e){})(ja||(ja={}));class Ma extends _a{constructor(){super(...arguments);this.transcriptions=new Ia(this._client);this.translations=new ja(this._client);this.speech=new Fa(this._client)}}(function(e){e.Transcriptions=Ia;e.Translations=ja;e.Speech=Fa})(Ma||(Ma={}));class Ta extends _a{create(e,t){return this._client.post("/moderations",{body:e,...t})}}(function(e){})(Ta||(Ta={}));class Na extends _a{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",La,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class La extends xa{}(function(e){e.ModelsPage=La})(Na||(Na={}));class Da extends _a{create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){if(zi(e)){return this.list({},e)}return this._client.getAPIList("/fine_tuning/jobs",Ua,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){if(zi(t)){return this.listEvents(e,{},t)}return this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Ba,{query:t,...n})}}class Ua extends $a{}class Ba extends $a{}(function(e){e.FineTuningJobsPage=Ua;e.FineTuningJobEventsPage=Ba})(Da||(Da={}));class qa extends _a{constructor(){super(...arguments);this.jobs=new Da(this._client)}}(function(e){e.Jobs=Da;e.FineTuningJobsPage=Ua;e.FineTuningJobEventsPage=Ba})(qa||(qa={}));class Ha extends _a{create(e,t){return this._client.post("/fine-tunes",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine-tunes/${e}`,t)}list(e){return this._client.getAPIList("/fine-tunes",Wa,e)}cancel(e,t){return this._client.post(`/fine-tunes/${e}/cancel`,t)}listEvents(e,t,n){return this._client.get(`/fine-tunes/${e}/events`,{query:t,timeout:864e5,...n,stream:t?.stream??false})}}class Wa extends xa{}(function(e){e.FineTunesPage=Wa})(Ha||(Ha={}));class Xa extends _a{create(e,t,n){return this._client.post(`/assistants/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/assistants/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t={},n){if(zi(t)){return this.list(e,{},t)}return this._client.getAPIList(`/assistants/${e}/files`,za,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}del(e,t,n){return this._client.delete(`/assistants/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class za extends $a{}(function(e){e.AssistantFilesPage=za})(Xa||(Xa={}));class Va extends _a{constructor(){super(...arguments);this.files=new Xa(this._client)}create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e={},t){if(zi(e)){return this.list({},e)}return this._client.getAPIList("/assistants",Ja,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}}class Ja extends $a{}(function(e){e.AssistantsPage=Ja;e.Files=Xa;e.AssistantFilesPage=za})(Va||(Va={}));function Ga(e){return typeof e.parse==="function"}class Ka{constructor(e){this.function=e.function;this.parse=e.parse;this.parameters=e.parameters;this.description=e.description;this.name=e.name}}const Qa=e=>e?.role==="assistant";const Ya=e=>e?.role==="function";const Za=e=>e?.role==="tool";function el(e){return e!=null}var tl=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n};var nl=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)};var rl,sl,ol,il,al,ll,cl,ul,fl,dl,pl,hl,yl,ml,gl,vl,bl,wl,xl,$l;const _l=10;class Sl{constructor(){rl.add(this);this.controller=new AbortController;sl.set(this,void 0);ol.set(this,(()=>{}));il.set(this,(()=>{}));al.set(this,void 0);ll.set(this,(()=>{}));cl.set(this,(()=>{}));ul.set(this,{});this._chatCompletions=[];this.messages=[];fl.set(this,false);dl.set(this,false);pl.set(this,false);hl.set(this,false);wl.set(this,(e=>{tl(this,dl,true,"f");if(e instanceof Error&&e.name==="AbortError"){e=new si}if(e instanceof si){tl(this,pl,true,"f");return this._emit("abort",e)}if(e instanceof ni){return this._emit("error",e)}if(e instanceof Error){const t=new ni(e.message);t.cause=e;return this._emit("error",t)}return this._emit("error",new ni(String(e)))}));tl(this,sl,new Promise(((e,t)=>{tl(this,ol,e,"f");tl(this,il,t,"f")})),"f");tl(this,al,new Promise(((e,t)=>{tl(this,ll,e,"f");tl(this,cl,t,"f")})),"f");nl(this,sl,"f").catch((()=>{}));nl(this,al,"f").catch((()=>{}))}_run(e){setTimeout((()=>{e().then((()=>{this._emitFinal();this._emit("end")}),nl(this,wl,"f"))}),0)}_addChatCompletion(e){this._chatCompletions.push(e);this._emit("chatCompletion",e);const t=e.choices[0]?.message;if(t)this._addMessage(t);return e}_addMessage(e,t=true){this.messages.push(e);if(t){this._emit("message",e);if((Ya(e)||Za(e))&&e.content){this._emit("functionCallResult",e.content)}else if(Qa(e)&&e.function_call){this._emit("functionCall",e.function_call)}else if(Qa(e)&&e.tool_calls){for(const t of e.tool_calls){if(t.type==="function"){this._emit("functionCall",t.function)}}}}}_connected(){if(this.ended)return;nl(this,ol,"f").call(this);this._emit("connect")}get ended(){return nl(this,fl,"f")}get errored(){return nl(this,dl,"f")}get aborted(){return nl(this,pl,"f")}abort(){this.controller.abort()}on(e,t){const n=nl(this,ul,"f")[e]||(nl(this,ul,"f")[e]=[]);n.push({listener:t});return this}off(e,t){const n=nl(this,ul,"f")[e];if(!n)return this;const r=n.findIndex((e=>e.listener===t));if(r>=0)n.splice(r,1);return this}once(e,t){const n=nl(this,ul,"f")[e]||(nl(this,ul,"f")[e]=[]);n.push({listener:t,once:true});return this}emitted(e){return new Promise(((t,n)=>{tl(this,hl,true,"f");if(e!=="error")this.once("error",n);this.once(e,t)}))}async done(){tl(this,hl,true,"f");await nl(this,al,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ni("stream ended without producing a ChatCompletion");return e}async finalContent(){await this.done();return nl(this,rl,"m",yl).call(this)}async finalMessage(){await this.done();return nl(this,rl,"m",ml).call(this)}async finalFunctionCall(){await this.done();return nl(this,rl,"m",gl).call(this)}async finalFunctionCallResult(){await this.done();return nl(this,rl,"m",vl).call(this)}async totalUsage(){await this.done();return nl(this,rl,"m",bl).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...t){if(nl(this,fl,"f"))return;if(e==="end"){tl(this,fl,true,"f");nl(this,ll,"f").call(this)}const n=nl(this,ul,"f")[e];if(n){nl(this,ul,"f")[e]=n.filter((e=>!e.once));n.forEach((({listener:e})=>e(...t)))}if(e==="abort"){const e=t[0];if(!nl(this,hl,"f")&&!n?.length){Promise.reject(e)}nl(this,il,"f").call(this,e);nl(this,cl,"f").call(this,e);this._emit("end");return}if(e==="error"){const e=t[0];if(!nl(this,hl,"f")&&!n?.length){Promise.reject(e)}nl(this,il,"f").call(this,e);nl(this,cl,"f").call(this,e);this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];if(e)this._emit("finalChatCompletion",e);const t=this.messages[this.messages.length-1];if(t)this._emit("finalMessage",t);const n=nl(this,rl,"m",yl).call(this);if(n)this._emit("finalContent",n);const r=nl(this,rl,"m",gl).call(this);if(r)this._emit("finalFunctionCall",r);const s=nl(this,rl,"m",vl).call(this);if(s!=null)this._emit("finalFunctionCallResult",s);if(this._chatCompletions.some((e=>e.usage))){this._emit("totalUsage",nl(this,rl,"m",bl).call(this))}}async _createChatCompletion(e,t,n){const r=n?.signal;if(r){if(r.aborted)this.controller.abort();r.addEventListener("abort",(()=>this.controller.abort()))}nl(this,rl,"m",xl).call(this,t);const s=await e.create({...t,stream:false},{...n,signal:this.controller.signal});this._connected();return this._addChatCompletion(s)}async _runChatCompletion(e,t,n){for(const e of t.messages){this._addMessage(e,false)}return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const r="function";const{function_call:s="auto",stream:o,...i}=t;const a=typeof s!=="string"&&s?.name;const{maxChatCompletions:l=_l}=n||{};const c={};for(const e of t.functions){c[e.name||e.function.name]=e}const u=t.functions.map((e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description})));for(const e of t.messages){this._addMessage(e,false)}for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...i,function_call:s,functions:u,messages:[...this.messages]},n);const o=t.choices[0]?.message;if(!o){throw new ni(`missing message in ChatCompletion response`)}if(!o.function_call)return;const{name:l,arguments:f}=o.function_call;const d=c[l];if(!d){const e=`Invalid function_call: ${JSON.stringify(l)}. Available options are: ${u.map((e=>JSON.stringify(e.name))).join(", ")}. Please try again`;this._addMessage({role:r,name:l,content:e});continue}else if(a&&a!==l){const e=`Invalid function_call: ${JSON.stringify(l)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:r,name:l,content:e});continue}let p;try{p=Ga(d)?await d.parse(f):f}catch(e){this._addMessage({role:r,name:l,content:e instanceof Error?e.message:String(e)});continue}const h=await d.function(p,this);const y=nl(this,rl,"m",$l).call(this,h);this._addMessage({role:r,name:l,content:y});if(a)return}}async _runTools(e,t,n){const r="tool";const{tool_choice:s="auto",stream:o,...i}=t;const a=typeof s!=="string"&&s?.function?.name;const{maxChatCompletions:l=_l}=n||{};const c={};for(const e of t.tools){if(e.type==="function"){c[e.function.name||e.function.function.name]=e.function}}const u="tools"in t?t.tools.map((e=>e.type==="function"?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description}}:e)):undefined;for(const e of t.messages){this._addMessage(e,false)}for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...i,tool_choice:s,tools:u,messages:[...this.messages]},n);const o=t.choices[0]?.message;if(!o){throw new ni(`missing message in ChatCompletion response`)}if(!o.tool_calls)return;for(const e of o.tool_calls){if(e.type!=="function")continue;const t=e.id;const{name:n,arguments:s}=e.function;const o=c[n];if(!o){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${u.map((e=>JSON.stringify(e.function.name))).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}else if(a&&a!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let i;try{i=Ga(o)?await o.parse(s):s}catch(e){const n=e instanceof Error?e.message:String(e);this._addMessage({role:r,tool_call_id:t,content:n});continue}const l=await o.function(i,this);const f=nl(this,rl,"m",$l).call(this,l);this._addMessage({role:r,tool_call_id:t,content:f});if(a)return}}}}sl=new WeakMap,ol=new WeakMap,il=new WeakMap,al=new WeakMap,ll=new WeakMap,cl=new WeakMap,ul=new WeakMap,fl=new WeakMap,dl=new WeakMap,pl=new WeakMap,hl=new WeakMap,wl=new WeakMap,rl=new WeakSet,yl=function e(){return nl(this,rl,"m",ml).call(this).content},ml=function e(){let t=this.messages.length;while(t-- >0){const e=this.messages[t];if(Qa(e)){return e}}throw new ni("stream ended without producing a ChatCompletionMessage with role=assistant")},gl=function e(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Qa(t)&&t?.function_call){return t.function_call}}return},vl=function e(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Ya(t)&&t.content!=null){return t.content}}return},bl=function e(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:e}of this._chatCompletions){if(e){t.completion_tokens+=e.completion_tokens;t.prompt_tokens+=e.prompt_tokens;t.total_tokens+=e.total_tokens}}return t},xl=function e(t){if(t.n!=null&&t.n>1){throw new ni("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")}},$l=function e(t){return typeof t==="string"?t:t===undefined?"undefined":JSON.stringify(t)};class kl extends Sl{static runFunctions(e,t,n){const r=new kl;r._run((()=>r._runFunctions(e,t,n)));return r}static runTools(e,t,n){const r=new kl;r._run((()=>r._runTools(e,t,n)));return r}_addMessage(e){super._addMessage(e);if(Qa(e)&&e.content){this._emit("content",e.content)}}}var El=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)};var Al=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n};var Pl,Cl,Ol,Rl,Fl,Il;class jl extends Sl{constructor(){super(...arguments);Pl.add(this);Cl.set(this,void 0)}get currentChatCompletionSnapshot(){return El(this,Cl,"f")}static fromReadableStream(e){const t=new jl;t._run((()=>t._fromReadableStream(e)));return t}static createChatCompletion(e,t,n){const r=new jl;r._run((()=>r._runChatCompletion(e,{...t,stream:true},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})));return r}async _createChatCompletion(e,t,n){const r=n?.signal;if(r){if(r.aborted)this.controller.abort();r.addEventListener("abort",(()=>this.controller.abort()))}El(this,Pl,"m",Ol).call(this);const s=await e.create({...t,stream:true},{...n,signal:this.controller.signal});this._connected();for await(const e of s){El(this,Pl,"m",Rl).call(this,e)}if(s.controller.signal?.aborted){throw new si}return this._addChatCompletion(El(this,Pl,"m",Fl).call(this))}async _fromReadableStream(e,t){const n=t?.signal;if(n){if(n.aborted)this.controller.abort();n.addEventListener("abort",(()=>this.controller.abort()))}El(this,Pl,"m",Ol).call(this);this._connected();const r=yi.fromReadableStream(e,this.controller);let s;for await(const e of r){if(s&&s!==e.id){this._addChatCompletion(El(this,Pl,"m",Fl).call(this))}El(this,Pl,"m",Rl).call(this,e);s=e.id}if(r.controller.signal?.aborted){throw new si}return this._addChatCompletion(El(this,Pl,"m",Fl).call(this))}[(Cl=new WeakMap,Pl=new WeakSet,Ol=function e(){if(this.ended)return;Al(this,Cl,undefined,"f")},Rl=function e(t){if(this.ended)return;const n=El(this,Pl,"m",Il).call(this,t);this._emit("chunk",t,n);const r=t.choices[0]?.delta?.content;const s=n.choices[0]?.message;if(r!=null&&s?.role==="assistant"&&s?.content){this._emit("content",r,s.content)}},Fl=function e(){if(this.ended){throw new ni(`stream has ended, this shouldn't happen`)}const t=El(this,Cl,"f");if(!t){throw new ni(`request ended without sending any chunks`)}Al(this,Cl,undefined,"f");return Ml(t)},Il=function e(t){var n,r;let s=El(this,Cl,"f");const{choices:o,...i}=t;if(!s){s=Al(this,Cl,{...i,choices:[]},"f")}else{Object.assign(s,i)}for(const{delta:e,finish_reason:o,index:i,...a}of t.choices){let t=s.choices[i];if(!t){s.choices[i]={finish_reason:o,index:i,message:e,...a};continue}if(o)t.finish_reason=o;Object.assign(t,a);if(!e)continue;const{content:l,function_call:c,role:u,tool_calls:f}=e;if(l)t.message.content=(t.message.content||"")+l;if(u)t.message.role=u;if(c){if(!t.message.function_call){t.message.function_call=c}else{if(c.name)t.message.function_call.name=c.name;if(c.arguments){(n=t.message.function_call).arguments??(n.arguments="");t.message.function_call.arguments+=c.arguments}}}if(f){if(!t.message.tool_calls)t.message.tool_calls=[];for(const{index:e,id:n,type:s,function:o}of f){const i=(r=t.message.tool_calls)[e]??(r[e]={});if(n)i.id=n;if(s)i.type=s;if(o)i.function??(i.function={arguments:""});if(o?.name)i.function.name=o.name;if(o?.arguments)i.function.arguments+=o.arguments}}}return s},Symbol.asyncIterator)](){const e=[];const t=[];let n=false;this.on("chunk",(n=>{const r=t.shift();if(r){r(n)}else{e.push(n)}}));this.on("end",(()=>{n=true;for(const e of t){e(undefined)}t.length=0}));return{next:async()=>{if(!e.length){if(n){return{value:undefined,done:true}}return new Promise((e=>t.push(e))).then((e=>e?{value:e,done:false}:{value:undefined,done:true}))}const r=e.shift();return{value:r,done:false}}}}toReadableStream(){const e=new yi(this[Symbol.asyncIterator].bind(this),this.controller);return e.toReadableStream()}}function Ml(e){const{id:t,choices:n,created:r,model:s}=e;return{id:t,choices:n.map((({message:t,finish_reason:n,index:r})=>{if(!n)throw new ni(`missing finish_reason for choice ${r}`);const{content:s=null,function_call:o,tool_calls:i}=t;const a=t.role;if(!a)throw new ni(`missing role for choice ${r}`);if(o){const{arguments:e,name:t}=o;if(e==null)throw new ni(`missing function_call.arguments for choice ${r}`);if(!t)throw new ni(`missing function_call.name for choice ${r}`);return{message:{content:s,function_call:{arguments:e,name:t},role:a},finish_reason:n,index:r}}if(i){return{index:r,finish_reason:n,message:{role:a,content:s,tool_calls:i.map(((t,n)=>{const{function:s,type:o,id:i}=t;const{arguments:a,name:l}=s||{};if(i==null)throw new ni(`missing choices[${r}].tool_calls[${n}].id\n${Tl(e)}`);if(o==null)throw new ni(`missing choices[${r}].tool_calls[${n}].type\n${Tl(e)}`);if(l==null)throw new ni(`missing choices[${r}].tool_calls[${n}].function.name\n${Tl(e)}`);if(a==null)throw new ni(`missing choices[${r}].tool_calls[${n}].function.arguments\n${Tl(e)}`);return{id:i,type:o,function:{name:l,arguments:a}}}))}}}return{message:{content:s,role:a},finish_reason:n,index:r}})),created:r,model:s,object:"chat.completion"}}function Tl(e){return JSON.stringify(e)}class Nl extends jl{static fromReadableStream(e){const t=new Nl;t._run((()=>t._fromReadableStream(e)));return t}static runFunctions(e,t,n){const r=new Nl;r._run((()=>r._runFunctions(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}})));return r}static runTools(e,t,n){const r=new Nl;r._run((()=>r._runTools(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}})));return r}}class Ll extends _a{runFunctions(e,t){if(e.stream){return Nl.runFunctions(this._client.chat.completions,e,t)}return kl.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){if(e.stream){return Nl.runTools(this._client.chat.completions,e,t)}return kl.runTools(this._client.chat.completions,e,t)}stream(e,t){return jl.createChatCompletion(this._client.chat.completions,e,t)}}class Dl extends _a{constructor(){super(...arguments);this.completions=new Ll(this._client)}}(function(e){e.Completions=Ll})(Dl||(Dl={}));class Ul extends _a{retrieve(e,t,n,r){return this._client.get(`/threads/${e}/messages/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(e,t,n={},r){if(zi(n)){return this.list(e,t,{},n)}return this._client.getAPIList(`/threads/${e}/messages/${t}/files`,Bl,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class Bl extends $a{}(function(e){e.MessageFilesPage=Bl})(Ul||(Ul={}));class ql extends _a{constructor(){super(...arguments);this.files=new Ul(this._client)}create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(e,t={},n){if(zi(t)){return this.list(e,{},t)}return this._client.getAPIList(`/threads/${e}/messages`,Hl,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class Hl extends $a{}(function(e){e.ThreadMessagesPage=Hl;e.Files=Ul;e.MessageFilesPage=Bl})(ql||(ql={}));class Wl extends _a{retrieve(e,t,n,r){return this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(e,t,n={},r){if(zi(n)){return this.list(e,t,{},n)}return this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Xl,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class Xl extends $a{}(function(e){e.RunStepsPage=Xl})(Wl||(Wl={}));class zl extends _a{constructor(){super(...arguments);this.steps=new Wl(this._client)}create(e,t,n){return this._client.post(`/threads/${e}/runs`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(e,t={},n){if(zi(t)){return this.list(e,{},t)}return this._client.getAPIList(`/threads/${e}/runs`,Vl,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class Vl extends $a{}(function(e){e.RunsPage=Vl;e.Steps=Wl;e.RunStepsPage=Xl})(zl||(zl={}));class Jl extends _a{constructor(){super(...arguments);this.runs=new zl(this._client);this.messages=new ql(this._client)}create(e={},t){if(zi(e)){return this.create({},e)}return this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}}(function(e){e.Runs=zl;e.RunsPage=Vl;e.Messages=ql;e.ThreadMessagesPage=Hl})(Jl||(Jl={}));class Gl extends _a{constructor(){super(...arguments);this.chat=new Dl(this._client);this.assistants=new Va(this._client);this.threads=new Jl(this._client)}}(function(e){e.Chat=Dl;e.Assistants=Va;e.AssistantsPage=Ja;e.Threads=Jl})(Gl||(Gl={}));var Kl;class Ql extends Bi{constructor({apiKey:e=ia("OPENAI_API_KEY"),organization:t=ia("OPENAI_ORG_ID")??null,...n}={}){if(e===undefined){throw new ni("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).")}const r={apiKey:e,organization:t,...n,baseURL:n.baseURL??`https://api.openai.com/v1`};if(!r.dangerouslyAllowBrowser&&ga()){throw new ni("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n")}super({baseURL:r.baseURL,timeout:r.timeout??6e5,httpAgent:r.httpAgent,maxRetries:r.maxRetries,fetch:r.fetch});this.completions=new Sa(this);this.chat=new Ea(this);this.edits=new Aa(this);this.embeddings=new Pa(this);this.files=new Ca(this);this.images=new Ra(this);this.audio=new Ma(this);this.moderations=new Ta(this);this.models=new Na(this);this.fineTuning=new qa(this);this.fineTunes=new Ha(this);this.beta=new Gl(this);this._options=r;this.apiKey=e;this.organization=t}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}Kl=Ql;Ql.OpenAI=Kl;Ql.OpenAIError=ni;Ql.APIError=ri;Ql.APIConnectionError=oi;Ql.APIConnectionTimeoutError=ii;Ql.APIUserAbortError=si;Ql.NotFoundError=ui;Ql.ConflictError=fi;Ql.RateLimitError=pi;Ql.BadRequestError=ai;Ql.AuthenticationError=li;Ql.InternalServerError=hi;Ql.PermissionDeniedError=ci;Ql.UnprocessableEntityError=di;const{OpenAIError:Yl,APIError:Zl,APIConnectionError:ec,APIConnectionTimeoutError:tc,APIUserAbortError:nc,NotFoundError:rc,ConflictError:sc,RateLimitError:oc,BadRequestError:ic,AuthenticationError:ac,InternalServerError:lc,PermissionDeniedError:cc,UnprocessableEntityError:uc}=t;var fc=Si;var dc=Qo;(function(e){e.toFile=Si;e.fileFromPath=Qo;e.Page=xa;e.CursorPage=$a;e.Completions=Sa;e.Chat=Ea;e.Edits=Aa;e.Embeddings=Pa;e.Files=Ca;e.FileObjectsPage=Oa;e.Images=Ra;e.Audio=Ma;e.Moderations=Ta;e.Models=Na;e.ModelsPage=La;e.FineTuning=qa;e.FineTunes=Ha;e.FineTunesPage=Wa;e.Beta=Gl})(Ql||(Ql={}));const pc=Ql;class hc{static providers=[];static proxies=[];displayName;id;defaultConfig;messageRoles;models;runner;constructor(e,t,n,r,s,o){Object.assign(this,{id:e,displayName:t,runner:n,configGetter:r,messageRoles:s,models:o})}static init(){hc.providers=[new hc("","",mc,{},[],[]),new hc("openai-text","OpenAI Text",gc,{key:"",url:"",model:"",stream:false},[],["gpt-3.5-turbo-instruct"]),new hc("openai-chat","OpenAI Chat",vc,{key:"",url:"",model:"",stream:false},["user","assistant","system"],["gpt-4","gpt-4-32k","gpt-3.5-turbo"]),new hc("anthropic-chat","Anthropic",bc,{key:"",url:"",model:"",stream:false},["human","assistant","system"],["claude-v1","claude-v1.0","claude-v1.2","claude-v1.3","claude-instant-v1","claude-instant-v1.0"]),new hc("natdev","Nat.dev",wc,{key:"",url:"",model:"",stream:false},[],["textgeneration:llama-65b","replicate:alpaca-7b","replicate:llama-13b","huggingface:bigscience/bloomz","openai:gpt-3.5-turbo","openai:gpt-4","openai:text-davinci-002",,"openai:text-davinci-003","anthropic:claude-instant-v1.0","anthropic:claude-v1.2"]),new hc("steamship-plugin","SteamShip Plugin",xc,{key:"",workspace:"",model:""},[],["gpt-3","gpt-4"]),new hc("scale-spellbook","Scale Spellbook",$c,{key:"",url:""},[],[]),new hc("scale-spellbook-fish","Scale Spellbook (Fish proxy)",_c,{key:"",url:""},[],[]),new hc("chatbotkit","ChatBotKit",Sc,{key:"",url:"",model:"",stream:false},["user","bot","context","instruction","backstory"],["gpt-4","gbt-3.5-turbo","text-davinci-003","text-davinci-002","text-algo-003","text-algo-002","text-algo-001"])];hc.proxies=[new hc("","Direct",Ec,{}),new hc("cors-anywhere","CORS Anywhere",Ac,{url:""})]}createConfig(){return Object.assign({},{typeId:this.id,name:"Name"},this.defaultConfig)}static createConnection(e,t,n){if(e==null)return null;const r=hc.getProvider(e.typeId);if(r.runner===mc)return null;const s=hc.getProxy(t?.typeId);const o={maxTokens:qr(n.maxTokens),temperature:Br(n.temperature),frequencyPenalty:Br(n.frequencyPenalty),presencePenalty:Br(n.presencePenalty)};return new r.runner(Object.assign(o,e),new s.runner(t))}static getProvider(e){return hc.providers.filter((t=>t.id==e))[0]??hc.providers[0]}static getProxy(e){return hc.proxies.filter((t=>t.id==e))[0]??hc.proxies[0]}static createDefaultProviderConfig(){return hc.providers[0].createConfig()}static createDefaultProxyConfig(){return hc.proxies[0].createConfig()}}class yc{config;proxy;onMessage;onLogMessage;onError;constructor(e,t){if(this.constructor===yc)throw new Cc(this);Object.assign(this,{config:e,proxy:t})}async sendRequest(e){return{error:"Provider not implemented"}}async fetch(e,t){const n=await fetch(e,t);const r={};n.headers.forEach(((e,t)=>r[t]=e));console.log("Received HTTP response:",n,"headers:",r);return n}async handleJsonResponse(e,t){let n;try{n=await t.text()}catch(n){this.raiseError("Failed to decode message",n,e,t);return false}try{return await this.handleJson(JSON.parse(n),e,t)}catch(r){this.raiseError(n.length>4096?"Failed to parse message":n,r,e,t);return false}}async handleJson(e,t,n){throw new Pc("handleJson")}raiseLogMessage(e){this.onLogMessage?.call(this,e)}raiseMessage(e){this.onMessage?.call(this,e);return true}raiseError(e,t,n,r){const s=r==null||r.ok?"":` (HTTP code: ${r.status}${` ${r.statusText}`.trim()})`;this.onError?.call(this,{text:`${e}${n.extraText}: ${t?.message}${s}`,error:t});return false}}class mc extends yc{async sendRequest(e){return{error:"Provider not set"}}}class gc extends yc{async sendRequest(e){const t=new pc({apiKey:this.config.key,baseURL:this.proxy.modifyUrl(this.config.url||"https://api.openai.com"),dangerouslyAllowBrowser:true});const n=e.messages.filter((e=>e.text?.length>0));const r={prompt:n.map((e=>`${e.text}\n\n`)).join(""),model:this.config.model,max_tokens:this.config.maxTokens,temperature:this.config.temperature,frequency_penalty:this.config.frequencyPenalty,presence_penalty:this.config.presencePenalty};let s=null;try{if(this.config.stream){const n=await t.completions.create({...r,stream:true});e.signal.addEventListener("abort",(()=>n.controller.abort()));for await(const e of n)this.raiseMessage({text:e.choices[0]?.text??"",role:"assistant",mode:"append"});return this.raiseMessage({text:"",role:"assistant",mode:"done"})}else{const e=await t.completions.create({...r,stream:false});return this.raiseMessage({text:e.choices[0]?.text??"",role:"assistant",mode:"complete"})}}catch(t){return this.raiseError("Query failed",t,e,s)}}}class vc extends yc{async sendRequest(e){const t=e=>(e||"").match(/system/i)?"system":(e||"").match(/user|human/i)?"user":"assistant";const n=new pc({apiKey:this.config.key,baseURL:this.proxy.modifyUrl(this.config.url||"https://api.openai.com"),dangerouslyAllowBrowser:true});const r=e.messages.filter((e=>e.text?.length>0));const s={messages:r.map((e=>({role:t(e.role),content:e.text}))),model:this.config.model,max_tokens:this.config.maxTokens,temperature:this.config.temperature,frequency_penalty:this.config.frequencyPenalty,presence_penalty:this.config.presencePenalty};let o=null;try{if(this.config.stream){const t=await n.chat.completions.create({...s,stream:true});e.signal.addEventListener("abort",(()=>t.controller.abort()));for await(const e of t)this.raiseMessage({text:e.choices[0]?.delta?.content??"",role:"assistant",mode:"append"});return this.raiseMessage({text:"",role:"assistant",mode:"done"})}else{const e=await n.chat.completions.create({...s,stream:false});return this.raiseMessage({text:e.choices[0]?.message?.content??"",role:"assistant",mode:"complete"})}}catch(t){return this.raiseError("Query failed",t,e,o)}}}class bc extends yc{async sendRequest(e){const t=e=>(e||"").match(/system/i)?"System Note":(e||"").match(/user|human/i)?$o:_o;const n=new xo({apiKey:this.config.key,baseURL:this.proxy.modifyUrl(this.config.url||"https://api.anthropic.com")});const r=e.messages.filter((e=>e.text?.length>0));const s={prompt:r.map((e=>`${t(e.role)} ${e.text}`)).join("")+_o,model:this.config.model,max_tokens_to_sample:this.config.maxTokens,temperature:this.config.temperature,stop_sequences:[$o]};let o=null;try{if(this.config.stream){const t=await n.completions.create({...s,stream:true});o=t.response;e.signal.addEventListener("abort",(()=>t.controller.abort()));for await(const e of t)this.raiseMessage({text:e.completion,role:"assistant",mode:"append"});return this.raiseMessage({text:"",role:"assistant",mode:"done"})}else{const e=await n.completions.create({...s,stream:false});return this.raiseMessage({text:e.completion,role:"assistant",mode:"complete"})}}catch(t){return this.raiseError("Query failed",t,e,o)}}}class wc extends yc{constructor(e,t){super(e,t)}async sendRequest(e){let t,n;console.log(this);t=await this.fetch(this.proxy.modifyUrl("https://clerk.nat.dev/v1/client?_clerk_js_version=4.35.0"),{method:"GET",credentials:"include",headers:{Origin:"https://nat.dev",Referer:"https://nat.dev/"},signal:e.signal});console.log(await t.json());console.log("All models",n)}async sendAsyncApi(e){const t=1e4;if(this.pusher!=null)return;const n={key:"a9198d6754ae6285290b",cluster:"mt1"};const r=new URLSearchParams({protocol:7,client:"js",version:"8.0.1"});let s=null;this.pusher=new WebSocket(`wss://ws-${n.cluster}.pusher.com/app/${n.key}?${r}`);this.pusher.addEventListener("message",(t=>{if(e.signal.aborted){this.pusher.close();return}const n=JSON.parse(t.data);const r=typeof n.data==="string"?JSON.parse(n.data):null;console.log("Pusher message",n,"data",r);switch(n.event){case"pusher:connection_established":s?.call();break;case"batchTokensBegin":console.log("Pusher begin tokens",n.channel);break;case"batchTokensAvailable":const e=r.tokens.join("");console.log("Pusher tokens",n.channel,e);this.raiseMessage({text:e,role:"bot",mode:"append"});break;case"batchTokensEnd":console.log("Pusher end tokens",n.channel,r.messageId);this.pusher.close();break}}));this.pusher.addEventListener("error",(t=>{this.raiseError("Pusher error",new Error(`${t}`),e,null)}));console.log(this.pusher);await Promise.race([Ur(t),new Promise((e=>{s=e}))])}async callApi(e,t,n,r){const s=this.config.url||"https://nat.dev/api/";const o=await this.fetch(this.proxy.modifyUrl(new URL(n,s).toString()),{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.key}`,Origin:"https://nat.dev",Referer:"https://nat.dev/"},body:t=="POST"&&r!=null?JSON.stringify(r):null,signal:e.signal});const i=await this.handleJsonResponse(e,o);return[o,i]}async handleJson(e,t,n){return e}}class xc extends yc{async sendRequest(e){const t=2e3;const n=e.messages.filter((e=>e.text?.length>0));let[r,s]=await this.callApi(e,"plugin/instance/generate",{appendOutputToFile:false,text:n.map((e=>e.text)).join("\n"),pluginInstance:this.config.workspace});if(s===false)return false;console.log("SteamShip init",s);const o=s?.status?.taskId;if(o==null)return this.raiseError("Failed to generate",new Error("No task id"),e,r);else this.raiseLogMessage({text:"Sending message (done: generate)"});let i="";while(true){[r,s]=await this.callApi(e,"task/status",{taskId:o});if(s===false)return;console.log("SteamShip poll",s.status.state,s);if(s.data!=null){const e=s.data.blocks[0];return this.raiseMessage({text:e.text,role:e.tags.filter((e=>e.kind=="role"))[0]?.name??"assistant",mode:"complete"})}if(i!=s.status.state){i=s.status.state;this.raiseLogMessage({text:`Sending message (${i})`})}await Dr(t)}}async callApi(e,t,n){const r=this.config.url||"https://api.steamship.com/api/v1/";const s=await this.fetch(this.proxy.modifyUrl(new URL(t,r).toString()),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.key}`,"X-Workspace-Handle":this.config.workspace},body:JSON.stringify(n),signal:e.signal});const o=await this.handleJsonResponse(e,s);return[s,o]}async handleJson(e,t,n){if(e?.status?.state=="failed"){const{statusCode:r,statusMessage:s}=e.status;const o=`${r!=null?`${r}: `:""}${s}`;return this.raiseError("Received error message",new Error(o),t,n)}return e}}class $c extends yc{async sendRequest(e){let t=e.messages.map((e=>e.text)).join("\n");let n=await this.getResponse(e,t);return await this.handleJsonResponse(e,n)}async getResponse(e,t){return await this.fetch(this.proxy.modifyUrl(this.config.url),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+this.config.key},body:JSON.stringify({input:{input:t}}),signal:e.signal})}async handleJson(e,t,n){if(e.output==null||e.message!=null)return this.raiseError("Received error message",new Error(e.message||"Unknown"),t,n);else return this.raiseMessage({text:e.output,role:"",mode:"complete"})}}class _c extends yc{pusher;async getResponse(e,t){return await this.fetch(`https://fishtailprotocol.com/projects/betterGPT4/scale-api.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({OAIToken:this.config.key,scaleURL:this.config.url,chatLog:t}),signal:e.signal})}async handleJson(e,t,n){return super.handleJson(e.response,t,n)}}class Sc extends yc{static baseApiUrl="https://api.chatbotkit.com/v1/";async sendRequest(e){const t={assistant:"bot",system:"backstory"};const n=e=>e=="backstory"||e=="system";let r,s;const o=e.messages.filter((e=>e.text?.length>0));const i=o.filter((e=>!n(e.role)));const a=o.filter((e=>n(e.role)));const l=i.slice(0,-1);[r,s]=await this.callApi(e,"conversation/create",{backstory:a.map((e=>e.text)).join("\n"),model:this.config.model,datasetId:"",skillsetId:"",messages:l.map((e=>({type:t[e.role]||e.role||"user",text:e.text})))});if(s===false)return false;const c=s.id;let u=null;try{const t=i.slice(-1)[0];[r,s]=await this.callApi(e,`conversation/${c}/send`,{text:t.text,entities:[]});if(s===false)return false;if(this.config.stream){try{await this.connectToPusher(e)}catch(t){this.raiseError("Failed to receive message",t,e,null);return false}const t=Hr();this.pusher.send(JSON.stringify({event:"pusher:subscribe",data:{auto:"",channel:t}}));[r,s]=await this.callApi(e,`conversation/${c}/receive`,{parse:false,channel:t});u={text:"",role:"bot",mode:"done"}}else{[r,s]=await this.callApi(e,`conversation/${c}/receive`,{parse:false});if(s===false)return false;u={role:"bot",text:s.text,mode:"complete"}}}finally{try{[r,s]=await this.callApi(e,`conversation/${c}/delete`,{},false)}finally{if(u!=null)this.raiseMessage(u)}}return true}async connectToPusher(e){const t=1e4;if(this.pusher!=null)return;const n={key:"a9198d6754ae6285290b",cluster:"mt1"};const r=new URLSearchParams({protocol:7,client:"js",version:"8.0.1"});let s=null;this.pusher=new WebSocket(`wss://ws-${n.cluster}.pusher.com/app/${n.key}?${r}`);this.pusher.addEventListener("message",(t=>{if(e.signal.aborted){this.pusher.close();return}const n=JSON.parse(t.data);const r=typeof n.data==="string"?JSON.parse(n.data):null;console.log("Pusher message",n,"data",r);switch(n.event){case"pusher:connection_established":s?.call();break;case"batchTokensBegin":console.log("Pusher begin tokens",n.channel);break;case"batchTokensAvailable":const e=r.tokens.join("");console.log("Pusher tokens",n.channel,e);this.raiseMessage({text:e,role:"bot",mode:"append"});break;case"batchTokensEnd":console.log("Pusher end tokens",n.channel,r.messageId);this.pusher.close();break}}));this.pusher.addEventListener("error",(t=>{this.raiseError("Pusher error",new Error(`${t}`),e,null)}));console.log(this.pusher);await Promise.race([Ur(t),new Promise((e=>{s=e}))])}async callApi(e,t,n,r=true){const s=this.config.url||Sc.baseApiUrl;const o=await this.fetch(this.proxy.modifyUrl(new URL(t,s).toString()),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.key}`},body:JSON.stringify(n),signal:e.signal});const i=t.replace(/\/(.*\/)?/," - ");const a=await this.handleJsonResponse(e,o);if(a!==false&&r)this.raiseLogMessage({text:`Sending message (done: ${i})`,data:[a]});return[o,a]}async handleJson(e,t,n){if(e.message!=null)return this.raiseError("Received error message",new Error(`${e.code}: ${e.message}`),t,n);return e}}class kc{config;constructor(e){if(this.constructor===kc)throw new Cc(this);Object.assign(this,{config:e})}modifyUrl(e){return e}}class Ec extends kc{}class Ac extends kc{modifyUrl(e){return(this.config.url||"https://cors-anywhere.herokuapp.com/")+e}}class Pc extends Error{constructor(e){super(`Method ${e} not impleented`)}}class Cc extends Error{constructor(e){super(`Can not instantiate abstract class ${e.constructor.name}`)}}var Oc=n(282);var Rc=n(634);var Fc=n(232);var Ic=n(362);var jc=n(338);var Mc=n(199);var Tc=n(742);var Nc=n(505);var Lc=n(494);var Dc=n(55);var Uc=n(221);var Bc=n(948);const{window:qc}=z;function Hc(e,t,n){const r=e.slice();r[89]=t[n];return r}function Wc(e,t,n){const r=e.slice();r[92]=t[n];return r}function Xc(e,t,n){const r=e.slice();r[95]=t[n];return r}function zc(e,t,n){const r=e.slice();r[98]=t[n];r[99]=t;r[100]=n;return r}function Vc(e,t,n){const r=e.slice();r[101]=t[n];r[102]=t;r[103]=n;return r}function Jc(e,t,n){const r=e.slice();r[101]=t[n];return r}function Gc(e,t,n){const r=e.slice();r[106]=t[n];r[107]=t;r[108]=n;return r}function Kc(e,t,n){const r=e.slice();r[89]=t[n];return r}function Qc(e){let t;let n=e[89].displayName+"";let s;let o;return{c(){t=ce("option");s=pe(n);t.__value=o=e[89].id;t.value=t.__value;_e(t,"class","a")},m(e,n){oe(e,t,n);Z(t,s)},p:r,d(e){if(e)ae(t)}}}function Yc(e){return{c:r,m:r,p:r,d:r}}function Zc(e){let t;let n;let r;function s(e,t){if(e[89].id=="openai-text"||e[89].id=="openai-chat"||e[89].id=="chatbotkit"||e[89].id=="anthropic-chat"||e[89].id=="natdev")return ru;if(e[89].id=="steamship-plugin")return nu;if(e[89].id=="scale-spellbook"||e[89].id=="scale-spellbook-fish")return tu;return eu}let o=s(e,[-1,-1,-1,-1]);let i=o(e);let a=e[89].models.length>0&&su(e);let l=(e[89].id=="openai-text"||e[89].id=="openai-chat"||e[89].id=="chatbotkit"||e[89].id=="anthropic-chat")&&ou(e);return{c(){i.c();t=he();if(a)a.c();n=he();if(l)l.c();r=ye()},m(e,s){i.m(e,s);oe(e,t,s);if(a)a.m(e,s);oe(e,n,s);if(l)l.m(e,s);oe(e,r,s)},p(e,c){if(o===(o=s(e,c))&&i){i.p(e,c)}else{i.d(1);i=o(e);if(i){i.c();i.m(t.parentNode,t)}}if(e[89].models.length>0){if(a){a.p(e,c)}else{a=su(e);a.c();a.m(n.parentNode,n)}}else if(a){a.d(1);a=null}if(e[89].id=="openai-text"||e[89].id=="openai-chat"||e[89].id=="chatbotkit"||e[89].id=="anthropic-chat"){if(l){l.p(e,c)}else{l=ou(e);l.c();l.m(r.parentNode,r)}}else if(l){l.d(1);l=null}},d(e){i.d(e);if(e)ae(t);if(a)a.d(e);if(e)ae(n);if(l)l.d(e);if(e)ae(r)}}}function eu(e){let t;return{c(){t=ce("b");t.textContent="Choose endpoint provider";_e(t,"class","a")},m(e,n){oe(e,t,n)},p:r,d(e){if(e)ae(t)}}}function tu(e){let t;let n;let r;let s;let o;let i;let a;let l;let c;let f;let d;function p(){e[39].call(s,e[107],e[108])}function h(){e[40].call(c,e[107],e[108])}return{c(){t=ce("label");n=ce("b");n.textContent="Deployment key";r=he();s=ce("input");o=he();i=ce("label");a=ce("b");a.textContent="Deployment URL";l=he();c=ce("input");_e(n,"class","a");_e(s,"type","text");_e(s,"placeholder","Deployment key");_e(s,"class","a");_e(t,"class","over a");_e(a,"class","a");_e(c,"type","text");_e(c,"placeholder","Deployment URL");_e(c,"class","a");_e(i,"class","over a")},m(u,y){oe(u,t,y);Z(t,n);Z(t,r);Z(t,s);Ke(s,e[106].key);oe(u,o,y);oe(u,i,y);Z(i,a);Z(i,l);Z(i,c);Ke(c,e[106].url);if(!f){d=[ge(s,"input",p),ge(c,"input",h)];f=true}},p(t,n){e=t;if(n[0]&2&&s.value!==e[106].key){Ke(s,e[106].key)}if(n[0]&2&&c.value!==e[106].url){Ke(c,e[106].url)}},d(e){if(e)ae(t);if(e)ae(o);if(e)ae(i);f=false;u(d)}}}function nu(e){let t;let n;let r;let s;let o;let i;let a;let l;let c;let f;let d;function p(){e[37].call(s,e[107],e[108])}function h(){e[38].call(c,e[107],e[108])}return{c(){t=ce("label");n=ce("b");n.textContent="API key";r=he();s=ce("input");o=he();i=ce("label");a=ce("b");a.textContent="Workspace";l=he();c=ce("input");_e(n,"class","a");_e(s,"type","text");_e(s,"placeholder","API key");_e(s,"class","a");_e(t,"class","over a");_e(a,"class","a");_e(c,"type","text");_e(c,"placeholder","Workspace");_e(c,"class","a");_e(i,"class","over a")},m(u,y){oe(u,t,y);Z(t,n);Z(t,r);Z(t,s);Ke(s,e[106].key);oe(u,o,y);oe(u,i,y);Z(i,a);Z(i,l);Z(i,c);Ke(c,e[106].workspace);if(!f){d=[ge(s,"input",p),ge(c,"input",h)];f=true}},p(t,n){e=t;if(n[0]&2&&s.value!==e[106].key){Ke(s,e[106].key)}if(n[0]&2&&c.value!==e[106].workspace){Ke(c,e[106].workspace)}},d(e){if(e)ae(t);if(e)ae(o);if(e)ae(i);f=false;u(d)}}}function ru(e){let t;let n;let r;let s;let o;let i;let a;let l;let c;let f;let d;function p(){e[35].call(s,e[107],e[108])}function h(){e[36].call(c,e[107],e[108])}return{c(){t=ce("label");n=ce("b");n.textContent="API key";r=he();s=ce("input");o=he();i=ce("label");a=ce("b");a.textContent="Base URL";l=he();c=ce("input");_e(n,"class","a");_e(s,"type","text");_e(s,"placeholder","API key");_e(s,"class","a");_e(t,"class","over a");_e(a,"class","a");_e(c,"type","text");_e(c,"placeholder","Base URL");_e(c,"class","a");_e(i,"class","over a")},m(u,y){oe(u,t,y);Z(t,n);Z(t,r);Z(t,s);Ke(s,e[106].key);oe(u,o,y);oe(u,i,y);Z(i,a);Z(i,l);Z(i,c);Ke(c,e[106].url);if(!f){d=[ge(s,"input",p),ge(c,"input",h)];f=true}},p(t,n){e=t;if(n[0]&2&&s.value!==e[106].key){Ke(s,e[106].key)}if(n[0]&2&&c.value!==e[106].url){Ke(c,e[106].url)}},d(e){if(e)ae(t);if(e)ae(o);if(e)ae(i);f=false;u(d)}}}function su(e){let t;let n;let r;let s;let o;let i;let a;function l(){e[41].call(s,e[107],e[108])}return{c(){t=ce("label");n=ce("b");n.textContent="Model name";r=he();s=ce("input");_e(n,"class","a");_e(s,"type","text");_e(s,"placeholder","Model name");_e(s,"list",o=""+(e[89].id+"-models"));_e(s,"class","a");_e(t,"class","over a")},m(o,c){oe(o,t,c);Z(t,n);Z(t,r);Z(t,s);Ke(s,e[106].model);if(!i){a=ge(s,"input",l);i=true}},p(t,n){e=t;if(n[0]&2&&o!==(o=""+(e[89].id+"-models"))){_e(s,"list",o)}if(n[0]&2&&s.value!==e[106].model){Ke(s,e[106].model)}},d(e){if(e)ae(t);i=false;a()}}}function ou(e){let t;let n;let r;let s;let o;let i;function a(){e[42].call(n,e[107],e[108])}return{c(){t=ce("label");n=ce("input");r=he();s=ce("b");s.textContent="Stream";_e(n,"type","checkbox");_e(n,"class","a");_e(s,"class","a");_e(t,"class","side a")},m(l,c){oe(l,t,c);Z(t,n);n.checked=e[106].stream;Z(t,r);Z(t,s);if(!o){i=ge(n,"change",a);o=true}},p(t,r){e=t;if(r[0]&2){n.checked=e[106].stream}},d(e){if(e)ae(t);o=false;i()}}}function iu(e){return{c:r,m:r,p:r,d:r}}function au(e){let t;let n;let r;let s;let i;let a;let l;let c;let f;let d;let p;let h;let y;let m;let g;let v;let b;let w;let x;let $;let _;let S;let k;let E;let A;let P;let C;function O(){e[33].call(f,e[107],e[108])}let R=hc.providers;let F=[];for(let t=0;t<R.length;t+=1){F[t]=Qc(Kc(e,R,t))}function I(){e[34].call(m,e[107],e[108])}let j={ctx:e,current:null,token:null,hasCatch:false,pending:iu,then:Zc,catch:Yc,value:89};gn(v=hc.getProvider(e[106].typeId),j);const M=[{icon:Dc.M6},e[4]];let T={};for(let e=0;e<M.length;e+=1){T=o(T,M[e])}$=new Lr({props:T});function N(){return e[43](e[108])}const L=[{icon:Bc.FG},e[4]];let D={};for(let e=0;e<L.length;e+=1){D=o(D,L[e])}k=new Lr({props:D});function U(){return e[44](e[108])}A=Fe(e[32][1]);return{c(){t=ce("div");n=ce("label");r=ce("input");i=he();a=ce("label");l=ce("b");l.textContent="Display name";c=he();f=ce("input");d=he();p=ce("label");h=ce("b");h.textContent="Provider";y=he();m=ce("select");for(let e=0;e<F.length;e+=1){F[e].c()}g=he();j.block.c();b=he();w=ce("div");x=ce("button");Kn($.$$.fragment);_=he();S=ce("button");Kn(k.$$.fragment);_e(r,"type","radio");_e(r,"name","selectedEndpoint");r.__value=s=e[108];r.value=r.__value;_e(r,"title","Set endpoint as current");_e(r,"class","a");_e(n,"class","side a");_e(l,"class","a");_e(f,"type","text");_e(f,"placeholder","Display name");_e(f,"class","a");_e(a,"class","over a");_e(h,"class","a");_e(m,"placeholder","Provider");_e(m,"class","a");if(e[106].typeId===void 0)Kt(I);_e(p,"class","over a");_e(x,"type","button");_e(x,"title","Share endpoint link");_e(x,"class","a");_e(S,"type","button");_e(S,"title","Delete endpoint");_e(S,"class","a");_e(w,"class","buttons a");_e(t,"class","endpoint a");A.p(r)},m(s,o){oe(s,t,o);Z(t,n);Z(n,r);r.checked=r.__value===e[0].selectedEndpointIndex;Z(t,i);Z(t,a);Z(a,l);Z(a,c);Z(a,f);Ke(f,e[106].name);Z(t,d);Z(t,p);Z(p,h);Z(p,y);Z(p,m);for(let e=0;e<F.length;e+=1){if(F[e]){F[e].m(m,null)}}Ze(m,e[106].typeId,true);Z(t,g);j.block.m(t,j.anchor=null);j.mount=()=>t;j.anchor=b;Z(t,b);Z(t,w);Z(w,x);Yn($,x,null);Z(w,_);Z(w,S);Yn(k,S,null);E=true;if(!P){C=[ge(r,"change",e[31]),ge(f,"input",O),ge(m,"change",I),ge(x,"click",N),ge(S,"click",U)];P=true}},p(t,n){e=t;if(n[0]&3){r.checked=r.__value===e[0].selectedEndpointIndex}if(n[0]&2&&f.value!==e[106].name){Ke(f,e[106].name)}if(n&0){R=hc.providers;let t;for(t=0;t<R.length;t+=1){const r=Kc(e,R,t);if(F[t]){F[t].p(r,n)}else{F[t]=Qc(r);F[t].c();F[t].m(m,null)}}for(;t<F.length;t+=1){F[t].d(1)}F.length=R.length}if(n[0]&2){Ze(m,e[106].typeId)}j.ctx=e;if(n[0]&2&&v!==(v=hc.getProvider(e[106].typeId))&&gn(v,j)){}else{vn(j,e,n)}const s=n[0]&16?kn(M,[n&0&&{icon:Dc.M6},n[0]&16&&En(e[4])]):{};$.$set(s);const o=n[0]&16?kn(L,[n&0&&{icon:Bc.FG},n[0]&16&&En(e[4])]):{};k.$set(o)},i(e){if(E)return;fn($.$$.fragment,e);fn(k.$$.fragment,e);E=true},o(e){dn($.$$.fragment,e);dn(k.$$.fragment,e);E=false},d(e){if(e)ae(t);le(F,e);j.block.d();j.token=null;j=null;Zn($);Zn(k);A.r();P=false;u(C)}}}function lu(e){let t;let n=e[101].displayName+"";let s;let o;return{c(){t=ce("option");s=pe(n);t.__value=o=e[101].id;t.value=t.__value;_e(t,"class","a")},m(e,n){oe(e,t,n);Z(t,s)},p:r,d(e){if(e)ae(t)}}}function cu(e){return{c:r,m:r,p:r,d:r}}function uu(e){let t;function n(e,t){if(e[89].id=="cors-anywhere")return du;if(e[89].id!="")return fu}let r=n(e,[-1,-1,-1,-1]);let s=r&&r(e);return{c(){if(s)s.c();t=ye()},m(e,n){if(s)s.m(e,n);oe(e,t,n)},p(e,o){if(r===(r=n(e,o))&&s){s.p(e,o)}else{if(s)s.d(1);s=r&&r(e);if(s){s.c();s.m(t.parentNode,t)}}},d(e){if(s){s.d(e)}if(e)ae(t)}}}function fu(e){let t;return{c(){t=ce("b");t.textContent="Choose proxy provider";_e(t,"class","a")},m(e,n){oe(e,t,n)},p:r,d(e){if(e)ae(t)}}}function du(e){let t;let n;let r;let s;let o;let i;function a(){e[48].call(s,e[102],e[103])}return{c(){t=ce("label");n=ce("b");n.textContent="Proxy URL";r=he();s=ce("input");_e(n,"class","a");_e(s,"type","text");_e(s,"placeholder","Proxy URL");_e(s,"class","a");_e(t,"class","over a")},m(l,c){oe(l,t,c);Z(t,n);Z(t,r);Z(t,s);Ke(s,e[101].url);if(!o){i=ge(s,"input",a);o=true}},p(t,n){e=t;if(n[0]&4&&s.value!==e[101].url){Ke(s,e[101].url)}},d(e){if(e)ae(t);o=false;i()}}}function pu(e){return{c:r,m:r,p:r,d:r}}function hu(e){let t;let n;let r;let s;let i;let a;let l;let c;let f;let d;let p;let h;let y;let m;let g;let v;let b;let w;let x;let $;let _;let S;let k;function E(){e[46].call(c,e[102],e[103])}let A=hc.proxies;let P=[];for(let t=0;t<A.length;t+=1){P[t]=lu(Jc(e,A,t))}function C(){e[47].call(y,e[102],e[103])}let O={ctx:e,current:null,token:null,hasCatch:false,pending:pu,then:uu,catch:cu,value:89};gn(g=hc.getProxy(e[101].typeId),O);const R=[{icon:Bc.FG},e[4]];let F={};for(let e=0;e<R.length;e+=1){F=o(F,R[e])}x=new Lr({props:F});function I(){return e[49](e[103])}_=Fe(e[32][0]);return{c(){t=ce("div");n=ce("input");s=he();i=ce("label");a=ce("b");a.textContent="Display name";l=he();c=ce("input");f=he();d=ce("label");p=ce("b");p.textContent="Provider";h=he();y=ce("select");for(let e=0;e<P.length;e+=1){P[e].c()}m=he();O.block.c();v=he();b=ce("div");w=ce("button");Kn(x.$$.fragment);_e(n,"type","radio");_e(n,"name","selectedProxy");n.__value=r=e[103];n.value=n.__value;_e(n,"title","Set proxy as current");_e(n,"class","a");_e(a,"class","a");_e(c,"type","text");_e(c,"placeholder","Display name");_e(c,"class","a");_e(i,"class","over a");_e(p,"class","a");_e(y,"placeholder","Provider");_e(y,"class","a");if(e[101].typeId===void 0)Kt(C);_e(d,"class","over a");_e(w,"type","button");_e(w,"title","Delete proxy");_e(w,"class","a");_e(b,"class","buttons a");_e(t,"class","endpoint a");_.p(n)},m(r,o){oe(r,t,o);Z(t,n);n.checked=n.__value===e[0].selectedProxyIndex;Z(t,s);Z(t,i);Z(i,a);Z(i,l);Z(i,c);Ke(c,e[101].name);Z(t,f);Z(t,d);Z(d,p);Z(d,h);Z(d,y);for(let e=0;e<P.length;e+=1){if(P[e]){P[e].m(y,null)}}Ze(y,e[101].typeId,true);Z(t,m);O.block.m(t,O.anchor=null);O.mount=()=>t;O.anchor=v;Z(t,v);Z(t,b);Z(b,w);Yn(x,w,null);$=true;if(!S){k=[ge(n,"change",e[45]),ge(c,"input",E),ge(y,"change",C),ge(w,"click",I)];S=true}},p(t,r){e=t;if(r[0]&5){n.checked=n.__value===e[0].selectedProxyIndex}if(r[0]&4&&c.value!==e[101].name){Ke(c,e[101].name)}if(r&0){A=hc.proxies;let t;for(t=0;t<A.length;t+=1){const n=Jc(e,A,t);if(P[t]){P[t].p(n,r)}else{P[t]=lu(n);P[t].c();P[t].m(y,null)}}for(;t<P.length;t+=1){P[t].d(1)}P.length=A.length}if(r[0]&4){Ze(y,e[101].typeId)}O.ctx=e;if(r[0]&4&&g!==(g=hc.getProxy(e[101].typeId))&&gn(g,O)){}else{vn(O,e,r)}const s=r[0]&16?kn(R,[r&0&&{icon:Bc.FG},r[0]&16&&En(e[4])]):{};x.$set(s)},i(e){if($)return;fn(x.$$.fragment,e);$=true},o(e){dn(x.$$.fragment,e);$=false},d(e){if(e)ae(t);le(P,e);O.block.d();O.token=null;O=null;Zn(x);_.r();S=false;u(k)}}}function yu(e){let t;let n;let r;let s;let i;let a;let l;let c;let f;let d;let p;let h;let y;let m;let g;let v;let b;let w;let x;let $;let _;let S;function k(){e[63].call(n,e[99],e[100])}function E(){e[64].call(s,e[99],e[100])}const A=[{icon:Rc.FP},e[4]];let P={};for(let e=0;e<A.length;e+=1){P=o(P,A[e])}d=new Lr({props:P});function C(){return e[65](e[100])}const O=[{icon:Oc.r5},e[4]];let R={};for(let e=0;e<O.length;e+=1){R=o(R,O[e])}m=new Lr({props:R});function F(){return e[66](e[100])}const I=[{icon:Bc.FG},e[4]];let M={};for(let e=0;e<I.length;e+=1){M=o(M,I[e])}w=new Lr({props:M});function T(){return e[67](e[100])}return{c(){t=ce("div");n=ce("input");r=he();s=ce("textarea");l=he();c=ce("div");f=ce("button");Kn(d.$$.fragment);h=he();y=ce("button");Kn(m.$$.fragment);v=he();b=ce("button");Kn(w.$$.fragment);x=he();_e(n,"type","text");_e(n,"list","messageRole");_e(n,"placeholder","Role");_e(n,"class","a");_e(s,"placeholder",i="Message #"+e[98].id+" text");_e(s,"autocomplete","false");_e(s,"class","a");f.disabled=p=e[100]<=0;_e(f,"title","Move message up");_e(f,"class","a");_e(y,"type","button");y.disabled=g=e[100]>=e[3].length-1;_e(y,"title","Move message down");_e(y,"class","a");_e(b,"type","button");_e(b,"title","Delete message");_e(b,"class","a");_e(c,"class","buttons a");_e(t,"class","message a")},m(o,i){oe(o,t,i);Z(t,n);Ke(n,e[98].role);Z(t,r);Z(t,s);Ke(s,e[98].text);Z(t,l);Z(t,c);Z(c,f);Yn(d,f,null);Z(c,h);Z(c,y);Yn(m,y,null);Z(c,v);Z(c,b);Yn(w,b,null);Z(t,x);$=true;if(!_){S=[ge(n,"input",k),ge(s,"input",E),j(a=Eu.call(null,s)),ge(f,"click",C),ge(y,"click",F),ge(b,"click",T)];_=true}},p(t,r){e=t;if(r[0]&8&&n.value!==e[98].role){Ke(n,e[98].role)}if(!$||r[0]&8&&i!==(i="Message #"+e[98].id+" text")){_e(s,"placeholder",i)}if(r[0]&8){Ke(s,e[98].text)}const o=r[0]&16?kn(A,[r&0&&{icon:Rc.FP},r[0]&16&&En(e[4])]):{};d.$set(o);const a=r[0]&16?kn(O,[r&0&&{icon:Oc.r5},r[0]&16&&En(e[4])]):{};m.$set(a);if(!$||r[0]&8&&g!==(g=e[100]>=e[3].length-1)){y.disabled=g}const l=r[0]&16?kn(I,[r&0&&{icon:Bc.FG},r[0]&16&&En(e[4])]):{};w.$set(l)},i(e){if($)return;fn(d.$$.fragment,e);fn(m.$$.fragment,e);fn(w.$$.fragment,e);$=true},o(e){dn(d.$$.fragment,e);dn(m.$$.fragment,e);dn(w.$$.fragment,e);$=false},d(e){if(e)ae(t);Zn(d);Zn(m);Zn(w);_=false;u(S)}}}function mu(e){let t;let n=e[95]+"";let r;let s;return{c(){t=ce("option");r=pe(n);t.__value=s=e[95];t.value=t.__value;_e(t,"class","a")},m(e,n){oe(e,t,n);Z(t,r)},p(e,o){if(o[0]&512&&n!==(n=e[95]+""))Ve(r,n);if(o[0]&512&&s!==(s=e[95])){t.__value=s;t.value=t.__value}},d(e){if(e)ae(t)}}}function gu(e){let t;let n=e[92]+"";let s;let o;return{c(){t=ce("option");s=pe(n);t.__value=o=e[92];t.value=t.__value;_e(t,"class","a")},m(e,n){oe(e,t,n);Z(t,s)},p:r,d(e){if(e)ae(t)}}}function vu(e){let t;let n;let r=e[89].models;let s=[];for(let t=0;t<r.length;t+=1){s[t]=gu(Wc(e,r,t))}return{c(){t=ce("datalist");for(let e=0;e<s.length;e+=1){s[e].c()}_e(t,"id",n=""+(e[89].id+"-models"));_e(t,"class","a")},m(e,n){oe(e,t,n);for(let e=0;e<s.length;e+=1){if(s[e]){s[e].m(t,null)}}},p(e,n){if(n&0){r=e[89].models;let o;for(o=0;o<r.length;o+=1){const i=Wc(e,r,o);if(s[o]){s[o].p(i,n)}else{s[o]=gu(i);s[o].c();s[o].m(t,null)}}for(;o<s.length;o+=1){s[o].d(1)}s.length=r.length}},d(e){if(e)ae(t);le(s,e)}}}function bu(e){let t;let n;let r;let s;let i;let a;let l;let c;let f;let d;let p;let h;let y;let m;let g;let v;let b;let w;let x;let $;let _;let S;let k;let E;let A;let P;let C;let O;let R;let F;let I;let M;let T;let N;let L;let D;let U;let B;let q;let H;let W;let X;let z;let V;let J;let G;let K;let Q;let Y;let ee;let te;let ne;let re;let se;let ie;let ue;let fe;let de;let ye;let me;let ve;let be;let we;let xe;let $e;let Se;let ke;let Ee;let Ae;let Pe;let Ce;let Oe;let Re;let Fe;let Ie;let je;let Me;let Te;let Ne;let Le;let De;let Ue;let Be;let qe;let He;let We;let Xe;let ze;let Je;let Ge;let Qe;let et;let tt;let nt;let rt;let st;let ot;let it;let at;let lt;let ct;let ut;let ft;let dt;let pt;let ht;let yt;let mt;let gt;let vt;let bt;let wt;let xt;let $t;let _t;let St;let kt;let Et;let At;let Pt;let Ct;let Ot;let Rt;let Ft;let It;let jt;let Mt;let Tt;let Nt;let Lt;let Dt;let Ut;let Bt;let qt;let Ht;let Wt;let Xt;let zt;let Vt;let Jt;let Gt;let Qt;let Yt;let Zt;let en;let tn;let nn;let rn;let sn;let on;let an;let ln;let pn;let hn;let yn;let mn;let gn;let vn;let bn;let wn;let xn;let $n;let _n;let Sn;let An;let Pn;let Cn;let On;let Rn;let Fn;let In;let jn;let Mn;let Tn;let Nn;let Ln;let Dn;let Un;let Bn;let qn;let Hn;let Wn;const Xn=[{icon:Nc.RL},e[4]];let zn={};for(let e=0;e<Xn.length;e+=1){zn=o(zn,Xn[e])}f=new Lr({props:zn});let Vn=e[1];let Jn=[];for(let t=0;t<Vn.length;t+=1){Jn[t]=au(Gc(e,Vn,t))}const Gn=e=>dn(Jn[e],1,1,(()=>{Jn[e]=null}));const Qn=[{icon:Nc.RL},e[4]];let er={};for(let e=0;e<Qn.length;e+=1){er=o(er,Qn[e])}g=new Lr({props:er});let tr=e[2];let nr=[];for(let t=0;t<tr.length;t+=1){nr[t]=hu(Vc(e,tr,t))}const rr=e=>dn(nr[e],1,1,(()=>{nr[e]=null}));const sr=[{icon:Mc.cC},e[10]];let or={};for(let e=0;e<sr.length;e+=1){or=o(or,sr[e])}Oe=new Lr({props:or});const ir=[{icon:Mc.cC},e[10]];let ar={};for(let e=0;e<ir.length;e+=1){ar=o(ar,ir[e])}je=new Lr({props:ar});const lr=[{icon:jc.Ed},e[10]];let cr={};for(let e=0;e<lr.length;e+=1){cr=o(cr,lr[e])}Le=new Lr({props:cr});const ur=[{icon:Mc.cC},e[10]];let fr={};for(let e=0;e<ur.length;e+=1){fr=o(fr,ur[e])}Xe=new Lr({props:fr});const dr=[{icon:Mc.cC},e[10]];let pr={};for(let e=0;e<dr.length;e+=1){pr=o(pr,dr[e])}Qe=new Lr({props:pr});const hr=[{icon:jc.Ed},e[10]];let yr={};for(let e=0;e<hr.length;e+=1){yr=o(yr,hr[e])}rt=new Lr({props:yr});let mr=e[3];let gr=[];for(let t=0;t<mr.length;t+=1){gr[t]=yu(zc(e,mr,t))}const vr=e=>dn(gr[e],1,1,(()=>{gr[e]=null}));const br=[{icon:Tc.XC},e[4]];let wr={};for(let e=0;e<br.length;e+=1){wr=o(wr,br[e])}an=new Lr({props:wr});const xr=[{icon:Lc.XE},e[4]];let $r={};for(let e=0;e<xr.length;e+=1){$r=o($r,xr[e])}hn=new Lr({props:$r});const _r=[{icon:Uc.ct},e[4]];let Sr={};for(let e=0;e<_r.length;e+=1){Sr=o(Sr,_r[e])}vn=new Lr({props:Sr});const kr=[{icon:Fc.gP},e[4]];let Er={};for(let e=0;e<kr.length;e+=1){Er=o(Er,kr[e])}$n=new Lr({props:Er});const Ar=[{icon:Nc.RL},e[4]];let Pr={};for(let e=0;e<Ar.length;e+=1){Pr=o(Pr,Ar[e])}Pn=new Lr({props:Pr});const Cr=[{icon:Ic.kZ},e[4],{flip:"vertical"}];let Or={};for(let e=0;e<Cr.length;e+=1){Or=o(Or,Cr[e])}Rn=new Lr({props:Or});let Rr=hc.getProvider(e[9]?.typeId).messageRoles;let Fr=[];for(let t=0;t<Rr.length;t+=1){Fr[t]=mu(Xc(e,Rr,t))}let Ir=hc.providers.filter(Au);let jr=[];for(let t=0;t<Ir.length;t+=1){jr[t]=vu(Hc(e,Ir,t))}return{c(){t=ce("div");n=ce("details");r=ce("summary");r.textContent="Options";s=he();i=ce("div");a=ce("h3");l=pe("API Endpoints ");c=ce("button");Kn(f.$$.fragment);d=he();for(let e=0;e<Jn.length;e+=1){Jn[e].c()}p=he();h=ce("h3");y=pe("Proxies ");m=ce("button");Kn(g.$$.fragment);v=he();for(let e=0;e<nr.length;e+=1){nr[e].c()}b=he();w=ce("h3");w.textContent="Model options";x=he();$=ce("div");_=ce("div");S=ce("label");S.textContent="Max tokens";k=he();E=ce("input");A=he();P=ce("div");C=ce("label");C.textContent="Temperature";O=he();R=ce("input");F=he();I=ce("div");M=ce("label");M.textContent="Frequency penalty";T=he();N=ce("input");L=he();D=ce("div");U=ce("label");U.textContent="Presence penalty";B=he();q=ce("input");H=he();W=ce("h3");W.textContent="Behavior";X=he();z=ce("div");V=ce("div");J=ce("label");J.textContent="UI Density";G=he();K=ce("select");Q=ce("option");Q.textContent="Compact";ee=ce("option");ee.textContent="Comfortable";ne=ce("option");ne.textContent="Accessible";se=he();ie=ce("div");ue=ce("label");ue.textContent="Multi-message count";fe=he();de=ce("input");ye=he();me=ce("div");ve=ce("label");ve.textContent="Retry message count";be=he();we=ce("input");xe=he();$e=ce("h3");$e.textContent="Backups";Se=he();ke=ce("div");Ee=ce("div");Ae=ce("header");Ae.textContent="Endpoints";Pe=he();Ce=ce("button");Kn(Oe.$$.fragment);Re=pe("Load");Fe=he();Ie=ce("button");Kn(je.$$.fragment);Me=pe("Append");Te=he();Ne=ce("button");Kn(Le.$$.fragment);De=pe("Save");Ue=he();Be=ce("div");qe=ce("header");qe.textContent="Messages";He=he();We=ce("button");Kn(Xe.$$.fragment);ze=pe("Load");Je=he();Ge=ce("button");Kn(Qe.$$.fragment);et=pe("Append");tt=he();nt=ce("button");Kn(rt.$$.fragment);st=pe("Save");ot=he();it=ce("details");at=ce("summary");at.textContent="Instructions";lt=he();ct=ce("h3");ct.textContent="Scale API keys";ut=he();ft=ce("p");ft.textContent="You can use one of the public keys or provide your own. Having your own keys gives more flexibility and better privacy. ";dt=ce("ol");pt=ce("li");pt.innerHTML=`Register on <a href="https://spellbook.scale.com/" class="a">Scale Spellbook</a>. `;ht=ce("li");ht.textContent='Create an "app". ';yt=ce("li");mt=pe('Add a "prompt" with ');gt=ce("code");gt.textContent="model=GPT-4";vt=pe(", ");bt=ce("code");bt.textContent="max_tokens=512";wt=pe(", ");xt=ce("code");xt.textContent="temperature=1";$t=pe(", ");_t=ce("code");_t.textContent=`user_template=${"{{"}input${"}}"}`;St=pe(". ");kt=ce("ul");Et=ce("li");Et.textContent="Max token limit drastically (non-linearly) affects how fast the website responds. You can try lowering it, especially if you plan to use it for chat, but forget about going above 1024 tokens. ";At=ce("li");At.textContent="Temperature affects how wild the generations are, where 0.0 generates consistent responses and 2.0 is completely nuts. Default value in OpenAI interface is 0.7. Recommended values are 0.4–1.0. ";Pt=ce("li");Ct=pe("Adjust the template if you plan to use the app for chat or other purposes. GPT-4 model will see the text around ");Ot=ce("code");Ot.textContent=`${"{{"}input${"}}"}`;Rt=pe(", but the chat app will not.");Ft=he();It=ce("li");It.textContent='Add a "deployment" with this "prompt". ';jt=ce("li");jt.textContent="Add a new Scale API endpoint in the chat's options and copy API key and URL from Scale website.";Mt=he();Tt=ce("h3");Tt.textContent="Proxy";Nt=he();Lt=ce("p");Lt.textContent="The method of bypassing CORS restrictions for the chat script. One is enough. ";Dt=ce("ul");Dt.innerHTML=`<li class="a"><b class="a">Direct</b>: <ul class="a"><li class="a"><b class="a">User script</b> <i class="a">(desktop/mobile)</i>: Install <a href="https://athari.github.io/ScaleChat/userscripts/bypasscors.user.js" class="a">Bypass CORS</a> userscript. Install <a href="https://www.tampermonkey.net/" class="a">TamperMonkey</a> extension or any other user script manager first, in case you don&#39;t an option to install the script when you click the link. This method enables bypassing CORS only for specific user script and domain, however running locally is impossible and running on another server requires editing the user script. </li><li class="a"><b class="a">Extension</b> <i class="a">(desktop)</i>: Install <a href="https://microsoftedge.microsoft.com/addons/detail/cors-unblock/hkjklmhkbkdhlgnnfbbcihcajofmjgbh" class="a">CORS Unblock</a> extension. Click on the extension&#39;s button to enable it. This method allows to choose what websites bypass CORS and when. It allows running the script locally or on any server. </li><li class="a"><b class="a">Command Line</b> <i class="a">(desktop)</i>: Close all Chrome windows, then run it with <b class="a"><code class="a">chrome --no-web-security</code></b> command line. This method applies to all websites until you restart Chrome.</li></ul>  </li><li class="a"><b class="a">CORS demo</b> <i class="a">(desktop/mobile)</i>: Go to <a href="https://cors-anywhere.herokuapp.com/corsdemo" class="a">CORS Anywhere Demo</a> page and click on the button to enable it. You may be asked to solve CAPTCHA. Note that CORS Demo can timeout way earlier than actual API. This method allows all websites using that specific website to bypass CORS. </li><li class="a"><b class="a">Web proxy</b> <i class="a">(desktop/mobile)</i>: Use <a href="https://fishtailprotocol.com/projects/betterGPT4/" class="a">Web proxy by Feril</a>. No configuration required. This method works exclusively with Scale API.</li>`;Ut=he();Bt=ce("h3");Bt.textContent="Privacy";qt=he();Ht=ce("p");Ht.textContent="Privacy does not exist. ";Wt=ce("ul");Wt.innerHTML=`<li class="a">All your prompts and responses are visible to the owner of the Scale API key. </li><li class="a">All your prompts, responses and keys are visible to the company that owns Scale API. </li><li class="a">All your prompts, responses and keys are visible to the owner of CORS and web proxies.</li>`;Xt=he();zt=ce("p");zt.textContent="Recommendations for maximum privacy: ";Vt=ce("ul");Vt.innerHTML=`<li class="a">Do not use public Scale API keys. <lI class="a">Do not use proxies owned by people you don&#39;t trust. <li class="a">Do not send any information which could be used to identify you. </li><li class="a">Do register on Scale with fake data, including fake email. </li><li class="a">Do live in countries where FBI can&#39;t reach you and put in jail for having bad thoughts.</li></lI></li>`;Jt=he();Gt=ce("div");for(let e=0;e<gr.length;e+=1){gr[e].c()}Qt=he();Yt=ce("div");Zt=ce("input");en=he();tn=ce("textarea");rn=he();sn=ce("div");on=ce("button");Kn(an.$$.fragment);ln=he();pn=ce("button");Kn(hn.$$.fragment);mn=he();gn=ce("button");Kn(vn.$$.fragment);wn=he();xn=ce("button");Kn($n.$$.fragment);Sn=he();An=ce("button");Kn(Pn.$$.fragment);Cn=he();On=ce("button");Kn(Rn.$$.fragment);Fn=he();In=ce("div");jn=ce("p");Mn=pe(e[8]);Tn=he();Nn=ce("p");Ln=pe(e[7]);Dn=he();Un=ce("datalist");for(let e=0;e<Fr.length;e+=1){Fr[e].c()}Bn=he();for(let e=0;e<jr.length;e+=1){jr[e].c()}_e(r,"class","a");_e(c,"title","Add endpoint");_e(c,"class","a");_e(a,"class","a");_e(m,"title","Add proxy");_e(m,"class","a");_e(h,"class","a");_e(w,"class","a");_e(S,"for","maxTokens");_e(S,"class","a");_e(E,"type","text");_e(E,"id","maxTokens");_e(E,"class","a");_e(_,"class","option a");_e(C,"for","temperature");_e(C,"class","a");_e(R,"type","text");_e(R,"id","temperature");_e(R,"class","a");_e(P,"class","option a");_e(M,"for","frequencyPenalty");_e(M,"class","a");_e(N,"type","text");_e(N,"id","frequencyPenalty");_e(N,"class","a");_e(I,"class","option a");_e(U,"for","presencePenalty");_e(U,"class","a");_e(q,"type","text");_e(q,"id","presencePenalty");_e(q,"class","a");_e(D,"class","option a");_e($,"class","options a");_e(W,"class","a");_e(J,"for","density");_e(J,"class","a");Q.__value=Y="compact";Q.value=Q.__value;_e(Q,"class","a");ee.__value=te="mobile";ee.value=ee.__value;_e(ee,"class","a");ne.__value=re="access";ne.value=ne.__value;_e(ne,"class","a");_e(K,"id","density");_e(K,"class","a");if(e[0].density===void 0)Kt((()=>e[54].call(K)));_e(V,"class","option a");_e(ue,"for","multiMessageCount");_e(ue,"class","a");_e(de,"type","text");_e(de,"id","multiMessageCount");_e(de,"class","a");_e(ie,"class","option a");_e(ve,"for","retryMessageCount");_e(ve,"class","a");_e(we,"type","text");_e(we,"id","retryMessageCount");_e(we,"class","a");_e(me,"class","option a");_e(z,"class","options a");_e($e,"class","a");_e(Ae,"class","a");_e(Ce,"type","button");_e(Ce,"class","a");_e(Ie,"type","button");_e(Ie,"class","a");_e(Ne,"type","button");_e(Ne,"class","a");_e(Ee,"class","option-long a");_e(qe,"class","a");_e(We,"type","button");_e(We,"class","a");_e(Ge,"type","button");_e(Ge,"class","a");_e(nt,"type","button");_e(nt,"class","a");_e(Be,"class","option-long a");_e(ke,"class","options a");_e(i,"class","endpoints a");_e(at,"class","a");_e(ct,"class","a");_e(ft,"class","a");_e(pt,"class","a");_e(ht,"class","a");_e(gt,"class","a");_e(bt,"class","a");_e(xt,"class","a");_e(_t,"class","a");_e(Et,"class","a");_e(At,"class","a");_e(Ot,"class","a");_e(Pt,"class","a");_e(kt,"class","a");_e(yt,"class","a");_e(It,"class","a");_e(jt,"class","a");_e(dt,"class","a");_e(Tt,"class","a");_e(Lt,"class","a");_e(Dt,"class","a");_e(Bt,"class","a");_e(Ht,"class","a");_e(Wt,"class","a");_e(zt,"class","a");_e(Vt,"class","a");_e(it,"class","a");n.open=true;_e(n,"class","a");_e(Gt,"class","messages a");_e(Zt,"type","text");Zt.disabled=e[6];_e(Zt,"list","messageRole");_e(Zt,"placeholder","New message role");_e(Zt,"class","a");tn.disabled=e[6];_e(tn,"placeholder","New message text");_e(tn,"autocomplete","false");_e(tn,"class","a");_e(on,"type","button");on.disabled=e[6];_e(on,"title","Send message");_e(on,"class","a");_e(pn,"type","button");pn.disabled=e[6];_e(pn,"title",yn="Send message and receive "+e[0].multiMessageCount+" messages");_e(pn,"class","a");_e(gn,"type","button");gn.disabled=e[6];_e(gn,"title",bn="Try sending message "+e[0].retryMessageCount+" times");_e(gn,"class","a");_e(xn,"type","button");xn.disabled=_n=!e[6];_e(xn,"title","Cancel sending");_e(xn,"class","a");_e(An,"type","button");An.disabled=e[6];_e(An,"title","Add message without sending");_e(An,"class","a");_e(On,"type","button");_e(On,"title","Copy all messages to clipboard");_e(On,"class","a");_e(sn,"class","buttons a");_e(Yt,"class","message new-message a");_e(jn,"class","message a");_e(Nn,"class","time a");Ye(Nn,"display",e[6]?"block":"none");_e(In,"class","status a");_e(Un,"id","messageRole");_e(Un,"class","a");_e(t,"class","app a")},m(o,u){oe(o,t,u);Z(t,n);Z(n,r);Z(n,s);Z(n,i);Z(i,a);Z(a,l);Z(a,c);Yn(f,c,null);Z(i,d);for(let e=0;e<Jn.length;e+=1){if(Jn[e]){Jn[e].m(i,null)}}Z(i,p);Z(i,h);Z(h,y);Z(h,m);Yn(g,m,null);Z(i,v);for(let e=0;e<nr.length;e+=1){if(nr[e]){nr[e].m(i,null)}}Z(i,b);Z(i,w);Z(i,x);Z(i,$);Z($,_);Z(_,S);Z(_,k);Z(_,E);Ke(E,e[0].maxTokens);Z($,A);Z($,P);Z(P,C);Z(P,O);Z(P,R);Ke(R,e[0].temperature);Z($,F);Z($,I);Z(I,M);Z(I,T);Z(I,N);Ke(N,e[0].frequencyPenalty);Z($,L);Z($,D);Z(D,U);Z(D,B);Z(D,q);Ke(q,e[0].presencePenalty);Z(i,H);Z(i,W);Z(i,X);Z(i,z);Z(z,V);Z(V,J);Z(V,G);Z(V,K);Z(K,Q);Z(K,ee);Z(K,ne);Ze(K,e[0].density,true);Z(z,se);Z(z,ie);Z(ie,ue);Z(ie,fe);Z(ie,de);Ke(de,e[0].multiMessageCount);Z(z,ye);Z(z,me);Z(me,ve);Z(me,be);Z(me,we);Ke(we,e[0].retryMessageCount);Z(i,xe);Z(i,$e);Z(i,Se);Z(i,ke);Z(ke,Ee);Z(Ee,Ae);Z(Ee,Pe);Z(Ee,Ce);Yn(Oe,Ce,null);Z(Ce,Re);Z(Ee,Fe);Z(Ee,Ie);Yn(je,Ie,null);Z(Ie,Me);Z(Ee,Te);Z(Ee,Ne);Yn(Le,Ne,null);Z(Ne,De);Z(ke,Ue);Z(ke,Be);Z(Be,qe);Z(Be,He);Z(Be,We);Yn(Xe,We,null);Z(We,ze);Z(Be,Je);Z(Be,Ge);Yn(Qe,Ge,null);Z(Ge,et);Z(Be,tt);Z(Be,nt);Yn(rt,nt,null);Z(nt,st);Z(n,ot);Z(n,it);Z(it,at);Z(it,lt);Z(it,ct);Z(it,ut);Z(it,ft);Z(it,dt);Z(dt,pt);Z(dt,ht);Z(dt,yt);Z(yt,mt);Z(yt,gt);Z(yt,vt);Z(yt,bt);Z(yt,wt);Z(yt,xt);Z(yt,$t);Z(yt,_t);Z(yt,St);Z(yt,kt);Z(kt,Et);Z(kt,At);Z(kt,Pt);Z(Pt,Ct);Z(Pt,Ot);Z(Pt,Rt);Z(yt,Ft);Z(dt,It);Z(dt,jt);Z(it,Mt);Z(it,Tt);Z(it,Nt);Z(it,Lt);Z(it,Dt);Z(it,Ut);Z(it,Bt);Z(it,qt);Z(it,Ht);Z(it,Wt);Z(it,Xt);Z(it,zt);Z(it,Vt);Z(t,Jt);Z(t,Gt);for(let e=0;e<gr.length;e+=1){if(gr[e]){gr[e].m(Gt,null)}}Z(t,Qt);Z(t,Yt);Z(Yt,Zt);Ke(Zt,e[5].role);Z(Yt,en);Z(Yt,tn);Ke(tn,e[5].text);Z(Yt,rn);Z(Yt,sn);Z(sn,on);Yn(an,on,null);Z(sn,ln);Z(sn,pn);Yn(hn,pn,null);Z(sn,mn);Z(sn,gn);Yn(vn,gn,null);Z(sn,wn);Z(sn,xn);Yn($n,xn,null);Z(sn,Sn);Z(sn,An);Yn(Pn,An,null);Z(sn,Cn);Z(sn,On);Yn(Rn,On,null);Z(t,Fn);Z(t,In);Z(In,jn);Z(jn,Mn);Z(In,Tn);Z(In,Nn);Z(Nn,Ln);Z(t,Dn);Z(t,Un);for(let e=0;e<Fr.length;e+=1){if(Fr[e]){Fr[e].m(Un,null)}}Z(t,Bn);for(let e=0;e<jr.length;e+=1){if(jr[e]){jr[e].m(t,null)}}qn=true;if(!Hn){Wn=[ge(qc,"resize",ku),ge(c,"click",e[23]),ge(m,"click",e[26]),ge(E,"input",e[50]),ge(R,"input",e[51]),ge(N,"input",e[52]),ge(q,"input",e[53]),ge(K,"change",e[54]),ge(de,"input",e[55]),ge(we,"input",e[56]),ge(Ce,"click",e[57]),ge(Ie,"click",e[58]),ge(Ne,"click",e[59]),ge(We,"click",e[60]),ge(Ge,"click",e[61]),ge(nt,"click",e[62]),ge(Zt,"input",e[68]),ge(tn,"input",e[69]),j(nn=Eu.call(null,tn)),ge(on,"click",e[70]),ge(pn,"click",e[71]),ge(gn,"click",e[72]),ge(xn,"click",e[18]),ge(An,"click",e[73]),ge(On,"click",e[22])];Hn=true}},p(e,n){const r=n[0]&16?kn(Xn,[n&0&&{icon:Nc.RL},n[0]&16&&En(e[4])]):{};f.$set(r);if(n[0]&50331667){Vn=e[1];let t;for(t=0;t<Vn.length;t+=1){const r=Gc(e,Vn,t);if(Jn[t]){Jn[t].p(r,n);fn(Jn[t],1)}else{Jn[t]=au(r);Jn[t].c();fn(Jn[t],1);Jn[t].m(i,p)}}cn();for(t=Vn.length;t<Jn.length;t+=1){Gn(t)}un()}const s=n[0]&16?kn(Qn,[n&0&&{icon:Nc.RL},n[0]&16&&En(e[4])]):{};g.$set(s);if(n[0]&134217749){tr=e[2];let t;for(t=0;t<tr.length;t+=1){const r=Vc(e,tr,t);if(nr[t]){nr[t].p(r,n);fn(nr[t],1)}else{nr[t]=hu(r);nr[t].c();fn(nr[t],1);nr[t].m(i,b)}}cn();for(t=tr.length;t<nr.length;t+=1){rr(t)}un()}if(n[0]&1&&E.value!==e[0].maxTokens){Ke(E,e[0].maxTokens)}if(n[0]&1&&R.value!==e[0].temperature){Ke(R,e[0].temperature)}if(n[0]&1&&N.value!==e[0].frequencyPenalty){Ke(N,e[0].frequencyPenalty)}if(n[0]&1&&q.value!==e[0].presencePenalty){Ke(q,e[0].presencePenalty)}if(n[0]&1){Ze(K,e[0].density)}if(n[0]&1&&de.value!==e[0].multiMessageCount){Ke(de,e[0].multiMessageCount)}if(n[0]&1&&we.value!==e[0].retryMessageCount){Ke(we,e[0].retryMessageCount)}const o=n[0]&1024?kn(sr,[n&0&&{icon:Mc.cC},n[0]&1024&&En(e[10])]):{};Oe.$set(o);const a=n[0]&1024?kn(ir,[n&0&&{icon:Mc.cC},n[0]&1024&&En(e[10])]):{};je.$set(a);const l=n[0]&1024?kn(lr,[n&0&&{icon:jc.Ed},n[0]&1024&&En(e[10])]):{};Le.$set(l);const c=n[0]&1024?kn(ur,[n&0&&{icon:Mc.cC},n[0]&1024&&En(e[10])]):{};Xe.$set(c);const u=n[0]&1024?kn(dr,[n&0&&{icon:Mc.cC},n[0]&1024&&En(e[10])]):{};Qe.$set(u);const d=n[0]&1024?kn(hr,[n&0&&{icon:jc.Ed},n[0]&1024&&En(e[10])]):{};rt.$set(d);if(n[0]&3145752){mr=e[3];let t;for(t=0;t<mr.length;t+=1){const r=zc(e,mr,t);if(gr[t]){gr[t].p(r,n);fn(gr[t],1)}else{gr[t]=yu(r);gr[t].c();fn(gr[t],1);gr[t].m(Gt,null)}}cn();for(t=mr.length;t<gr.length;t+=1){vr(t)}un()}if(!qn||n[0]&64){Zt.disabled=e[6]}if(n[0]&32&&Zt.value!==e[5].role){Ke(Zt,e[5].role)}if(!qn||n[0]&64){tn.disabled=e[6]}if(n[0]&32){Ke(tn,e[5].text)}const h=n[0]&16?kn(br,[n&0&&{icon:Tc.XC},n[0]&16&&En(e[4])]):{};an.$set(h);if(!qn||n[0]&64){on.disabled=e[6]}const y=n[0]&16?kn(xr,[n&0&&{icon:Lc.XE},n[0]&16&&En(e[4])]):{};hn.$set(y);if(!qn||n[0]&64){pn.disabled=e[6]}if(!qn||n[0]&1&&yn!==(yn="Send message and receive "+e[0].multiMessageCount+" messages")){_e(pn,"title",yn)}const m=n[0]&16?kn(_r,[n&0&&{icon:Uc.ct},n[0]&16&&En(e[4])]):{};vn.$set(m);if(!qn||n[0]&64){gn.disabled=e[6]}if(!qn||n[0]&1&&bn!==(bn="Try sending message "+e[0].retryMessageCount+" times")){_e(gn,"title",bn)}const v=n[0]&16?kn(kr,[n&0&&{icon:Fc.gP},n[0]&16&&En(e[4])]):{};$n.$set(v);if(!qn||n[0]&64&&_n!==(_n=!e[6])){xn.disabled=_n}const w=n[0]&16?kn(Ar,[n&0&&{icon:Nc.RL},n[0]&16&&En(e[4])]):{};Pn.$set(w);if(!qn||n[0]&64){An.disabled=e[6]}const x=n[0]&16?kn(Cr,[n&0&&{icon:Ic.kZ},n[0]&16&&En(e[4]),Cr[2]]):{};Rn.$set(x);if(!qn||n[0]&256)Ve(Mn,e[8]);if(!qn||n[0]&128)Ve(Ln,e[7]);if(n[0]&64){Ye(Nn,"display",e[6]?"block":"none")}if(n[0]&512){Rr=hc.getProvider(e[9]?.typeId).messageRoles;let t;for(t=0;t<Rr.length;t+=1){const r=Xc(e,Rr,t);if(Fr[t]){Fr[t].p(r,n)}else{Fr[t]=mu(r);Fr[t].c();Fr[t].m(Un,null)}}for(;t<Fr.length;t+=1){Fr[t].d(1)}Fr.length=Rr.length}if(n&0){Ir=hc.providers.filter(Au);let r;for(r=0;r<Ir.length;r+=1){const s=Hc(e,Ir,r);if(jr[r]){jr[r].p(s,n)}else{jr[r]=vu(s);jr[r].c();jr[r].m(t,null)}}for(;r<jr.length;r+=1){jr[r].d(1)}jr.length=Ir.length}},i(e){if(qn)return;fn(f.$$.fragment,e);for(let e=0;e<Vn.length;e+=1){fn(Jn[e])}fn(g.$$.fragment,e);for(let e=0;e<tr.length;e+=1){fn(nr[e])}fn(Oe.$$.fragment,e);fn(je.$$.fragment,e);fn(Le.$$.fragment,e);fn(Xe.$$.fragment,e);fn(Qe.$$.fragment,e);fn(rt.$$.fragment,e);for(let e=0;e<mr.length;e+=1){fn(gr[e])}fn(an.$$.fragment,e);fn(hn.$$.fragment,e);fn(vn.$$.fragment,e);fn($n.$$.fragment,e);fn(Pn.$$.fragment,e);fn(Rn.$$.fragment,e);qn=true},o(e){dn(f.$$.fragment,e);Jn=Jn.filter(Boolean);for(let e=0;e<Jn.length;e+=1){dn(Jn[e])}dn(g.$$.fragment,e);nr=nr.filter(Boolean);for(let e=0;e<nr.length;e+=1){dn(nr[e])}dn(Oe.$$.fragment,e);dn(je.$$.fragment,e);dn(Le.$$.fragment,e);dn(Xe.$$.fragment,e);dn(Qe.$$.fragment,e);dn(rt.$$.fragment,e);gr=gr.filter(Boolean);for(let e=0;e<gr.length;e+=1){dn(gr[e])}dn(an.$$.fragment,e);dn(hn.$$.fragment,e);dn(vn.$$.fragment,e);dn($n.$$.fragment,e);dn(Pn.$$.fragment,e);dn(Rn.$$.fragment,e);qn=false},d(e){if(e)ae(t);Zn(f);le(Jn,e);Zn(g);le(nr,e);Zn(Oe);Zn(je);Zn(Le);Zn(Xe);Zn(Qe);Zn(rt);le(gr,e);Zn(an);Zn(hn);Zn(vn);Zn($n);Zn(Pn);Zn(Rn);le(Fr,e);le(jr,e);Hn=false;u(Wn)}}}const wu=20;function xu(){return(new Date).toISOString().substring(0,19).replace("T"," ").replaceAll(":","-")}function $u(e){Su({target:e.target.closest(".message").querySelector("textarea")})}function _u({target:e}){const t=window.pageYOffset;e.style.height="0";e.style.overflow="hidden";e.style.height=`${Math.max(e.scrollHeight,wu)+2}px`;e.style.overflow="";window.scrollTo(window.pageXOffset,t)}function Su({target:e}){_u({target:e});setTimeout((()=>{_u({target:e})}),50)}function ku(){for(const e of document.querySelectorAll("textarea"))_u({target:e})}function Eu(e){Su({target:e});e.addEventListener("input",_u);return{destroy:()=>e.removeEventListener("input",_u)}}const Au=e=>e.models.length>0;function Pu(e,t,n){"use strict";hc.init();let r={selectedEndpointIndex:0,selectedProxyIndex:0,multiMessageCount:10,retryMessageCount:5,density:"compact",maxTokens:1024,temperature:1,frequencyPenalty:0,presencePenalty:0};let s=[hc.createDefaultProviderConfig()];let o=[hc.createDefaultProxyConfig()];let i=[{id:1,role:"user",text:"Hello GPT-4!"}];let a={id:0,role:"user",text:""};let l=false;let c=null;let u="";let f=0;let d="Welcome!";let p=null;let h=false;let y=null;let m=null;let g=null;let v={scale:1.3};let b=Object.assign({},v);const w={compact:1.3,mobile:1.7,access:2.1};const x=new Intl.NumberFormat("en-gb",{style:"unit",unit:"second",unitDisplay:"short",maximumFractionDigits:0});const $=new Intl.NumberFormat("en-gb",{style:"unit",unit:"millisecond",unitDisplay:"short",maximumFractionDigits:2});Ft((()=>{n(3,i=Wr("messages",i));n(1,s=Wr("endpoints",s));n(2,o=Wr("proxies",o));n(0,r=Wr("options",r));try{const e=q(new URLSearchParams(location.search));if(e!==null)n(0,r.selectedEndpointIndex=e,r);if(location.protocol=="about:")document.querySelector("head style").innerHTML=""}catch(e){console.log(e)}n(29,h=true);n(30,g=document.documentElement);setInterval((()=>{if(l)n(28,f++,f)}),1e3)}));function _(e,...t){console.log(e,...t);n(8,d=e)}function S(){A("Endpoints",s)}function k(){A("Proxies",o)}function E(){A("Messages",i)}function A(e,t){zr("application/json",`NotAIChat ${e} ${xu()}.json`,JSON.stringify(t,null," "))}async function P(e){const t=await Vr(".json, application/json");if(!(t instanceof Array&&typeof t[0].typeId=="string"))return;n(1,s=e?[...s,...t]:t)}async function C(e){const t=await Vr(".json, application/json");if(!(t instanceof Array&&typeof t[0].typeId=="string"))return;n(1,s=e?[...s,...t]:t)}async function O(e){const t=await Vr(".json, application/json");if(!(t instanceof Array&&typeof t[0].text=="string"))return;n(3,i=e?[...i,...t]:t)}function R(){const e=Math.max(...i.map((e=>e.id)));return Number.isFinite(e)?e+1:1}async function F(e,t,s){_("Sending message");N({target:e.target});n(6,l=true);const o=hc.createConnection(y,m,r);if(o==null){_("No endpoint selected");return}p=new AbortController;const a=i.slice(-1)[0];let u=a?.text==""?a:null;let d;const h={get signal(){return p.signal},get extraText(){return`${d} in ${J()}`},get messages(){return i}};Object.assign(o,{onMessage(e){if(e.mode!="done"){if(u==null){u={id:R(),text:e.text,role:e.role};n(3,i=[...i,u])}else{u.text+=e.text;n(3,i=[...i]);$u({target:[...document.querySelectorAll(".messages textarea")].slice(-1)[0]})}}if(e.mode=="complete"||e.mode=="done")_(`Received message${h.extraText}`,e);else e.mode=="append";_(`Receiving message${h.extraText}`,e)},onLogMessage(e){if(e.data)_(e.text,...e.data);else _(e.text)},onError(e){_(e.text,e.error)}});for(let e=0;e<t;e++){d=t>1?` (${e+1}/${t})`:"";n(28,[c,f]=[performance.now(),0],f);try{await o.sendRequest(h)}catch(e){if(e instanceof DOMException&&e.name=="AbortError"){_(`User cancelled message${h.extraText}`,e);return}else{_(`Unexpected error${h.extraText}: ${e.message} `+`(Console and Network tabs in DevTools may contain extra details)`,e);continue}}if(p.signal.aborted||s&&u!=null)break}n(6,l=false)}async function I(e){return await F(e,1,false)}async function j(e){return await F(e,+r.retryMessageCount,true)}async function M(e){return await F(e,+r.multiMessageCount,false)}function T(){if(p==null)return;n(6,l=false);p.abort();_("Receiving message cancelled")}function N(e){if(a.text=="")return;n(3,i=[...i,{id:R(),text:a.text,role:a.role}]);n(5,a.text="",a);$u(e)}function L(e){n(3,i=i.filter(((t,n)=>n!==e)))}function D(e,t){if(i[e]===undefined||i[t]===undefined)return;n(3,[i[e],i[t]]=[i[t],i[e]],i);n(3,i=[...i])}async function U(){try{await navigator.clipboard.writeText(i.map((e=>e.text)).join("\n"));_("Messages copied to clipboard")}catch(e){_(`Failed to copy messages to clipboard: ${e.message}`,e)}}function B(){n(1,s=[...s,hc.createDefaultProviderConfig()])}function q(e){const t={name:e.get("name")??"Shared endpoint",provider:e.get("provider"),key:e.get("key"),url:e.get("url")};const r=s.findIndex((e=>e.key==t.key));if(r!=-1)return r;else if(t.key==null)return null;const o=hc.createDefaultProviderConfig().key;n(1,s=[...s.filter((e=>e.key!=o)),t]);return s.length-1}async function H(e){const t=s[e];const n=new URLSearchParams({name:t.name,provider:t.provider,key:t.key,url:t.url});const r=`${location.origin}${location.pathname}?${n}`;try{await navigator.clipboard.writeText(r);_(`Endpoint share link copied to clipboard: ${r}`)}catch(e){_(`Failed to copy endpoint share link to clipboard: ${e.message}`,e)}}function W(e){n(1,s=s.filter(((t,n)=>n!==e)));if(s[r.selectedEndpointIndex]===undefined)n(0,r.selectedEndpointIndex=null,r)}function X(){n(2,o=[...o,hc.createDefaultProxyConfig()])}function z(e){n(2,o=o.filter(((t,n)=>n!==e)));if(o[r.selectedProxyIndex]===undefined)n(0,r.selectedProxyIndex=null,r)}function V(){return x.format((performance.now()-c)/1e3)}function J(){return $.format(performance.now()-c)}const G=[[],[]];function K(){r.selectedEndpointIndex=this.__value;n(0,r)}function Q(e,t){e[t].name=this.value;n(1,s)}function Y(e,t){e[t].typeId=tt(this);n(1,s)}function Z(e,t){e[t].key=this.value;n(1,s)}function ee(e,t){e[t].url=this.value;n(1,s)}function te(e,t){e[t].key=this.value;n(1,s)}function ne(e,t){e[t].workspace=this.value;n(1,s)}function re(e,t){e[t].key=this.value;n(1,s)}function se(e,t){e[t].url=this.value;n(1,s)}function oe(e,t){e[t].model=this.value;n(1,s)}function ie(e,t){e[t].stream=this.checked;n(1,s)}const ae=e=>H(e);const le=e=>W(e);function ce(){r.selectedProxyIndex=this.__value;n(0,r)}function ue(e,t){e[t].name=this.value;n(2,o)}function fe(e,t){e[t].typeId=tt(this);n(2,o)}function de(e,t){e[t].url=this.value;n(2,o)}const pe=e=>z(e);function he(){r.maxTokens=this.value;n(0,r)}function ye(){r.temperature=this.value;n(0,r)}function me(){r.frequencyPenalty=this.value;n(0,r)}function ge(){r.presencePenalty=this.value;n(0,r)}function ve(){r.density=tt(this);n(0,r)}function be(){r.multiMessageCount=this.value;n(0,r)}function we(){r.retryMessageCount=this.value;n(0,r)}const xe=()=>P(false);const $e=()=>P(true);const _e=()=>S();const Se=()=>O(false);const ke=()=>O(true);const Ee=()=>E();function Ae(e,t){e[t].role=this.value;n(3,i)}function Pe(e,t){e[t].text=this.value;n(3,i)}const Ce=e=>D(e,e-1);const Oe=e=>D(e,e+1);const Re=e=>L(e);function Fe(){a.role=this.value;n(5,a)}function Ie(){a.text=this.value;n(5,a)}const je=e=>I(e);const Me=e=>M(e);const Te=e=>j(e);const Ne=e=>N(e);e.$$.update=()=>{if(e.$$.dirty[0]&536870927){e:{if(h){Xr("messages",i);Xr("endpoints",s);Xr("proxies",o);Xr("options",r)}}}if(e.$$.dirty[0]&1073741825){e:g!==null&&(e=>n(30,g.className=`d-${e.density}`,g))(r)}if(e.$$.dirty[0]&1){e:r.density!==null&&ku()}if(e.$$.dirty[0]&1){e:n(4,v={scale:w[r.density]})}if(e.$$.dirty[0]&16){e:n(10,b=Object.assign({},v,{style:"margin: 0 calc(var(--gap) * 1.5) 0 calc(var(--gap) * 0.5)"}))}if(e.$$.dirty[0]&268435456){e:n(7,u=(()=>V())(f))}if(e.$$.dirty[0]&3){e:n(9,y=s[r.selectedEndpointIndex])}if(e.$$.dirty[0]&5){e:m=o[r.selectedProxyIndex]}};return[r,s,o,i,v,a,l,u,d,y,b,S,E,P,O,I,j,M,T,N,L,D,U,B,H,W,X,z,f,h,g,K,G,Q,Y,Z,ee,te,ne,re,se,oe,ie,ae,le,ce,ue,fe,de,pe,he,ye,me,ge,ve,be,we,xe,$e,_e,Se,ke,Ee,Ae,Pe,Ce,Oe,Re,Fe,Ie,je,Me,Te,Ne]}class Cu extends rr{constructor(e){super();tr(this,e,Pu,bu,d,{},null,[-1,-1,-1,-1])}}const Ou=Cu;const Ru=new Ou({target:document.querySelector("#root")});const Fu=null&&Ru})()})();</script></body></html>