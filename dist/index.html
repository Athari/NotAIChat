<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>NotAIChat</title><style>:root{--button-width:38px;--gap:8px;color-scheme:dark;overflow-wrap:break-word;font:15px/1.2 Segoe UI, sans-serif}:root .a.a,:root .a.a::before,:root .a.a::after{box-sizing:border-box}.app.a.a{border:solid 1px #666;background:#111;padding:8px;border-radius:8px}details.a.a{border:solid 1px #666;background:#222;padding:8px;margin:0 0 8px 0;border-radius:8px}details.a>details.a{margin:8px 0 0 0}details.a>summary.a{cursor:pointer}details[open].a>summary.a{padding:0 0 8px 0;font-weight:700}h3.a.a{font:inherit;font-weight:500;font-size:1.2em;margin:2px 0}header.a.a{font:inherit;font-weight:400;margin:0}.messages.a.a,.endpoints.a.a,.options.a.a{display:flex;flex-flow:column;gap:8px}.options.a.a{flex-flow:row wrap;gap:8px 24px}.message.a.a,.endpoint.a.a,.option.a.a,.buttons.a.a{display:flex;flex-flow:row;align-items:stretch;gap:8px}.message.a.a{align-items:flex-start}.message.a input[type=text][list].a{flex:0 0 120px}.endpoint.a.a{flex-flow:row wrap}.option.a.a{width:400px}.option.a label.a{flex:1}.option-long.a.a{display:flex;flex-flow:row wrap;gap:8px;align-items:center}.option-long.a button.a{width:auto;padding:0 12px}.a:is(.endpoint) .buttons.a{padding:calc(1lh + 4px) 0 0 0}.new-message.a.a{margin:12px 0 0 0}.new-message.a .buttons.a{flex:0 0 calc((var(--button-width) + var(--gap) + 0px) * 3 - var(--gap));flex-flow:row wrap}label.over.a.a{display:flex;flex-flow:column;flex:1 250px}label.over.a b.a{margin:0 0 4px 0;font-weight:inherit}label.side.a.a{display:flex;flex-flow:row;align-items:center;flex:0;gap:8px;padding:calc(1lh + 4px) 0 0 0}label.side.a b.a{font-weight:inherit}label.side.a input.a:is([type=checkbox], [type=radio]){width:20px;min-height:20px;padding:0;margin:0}textarea.a.a,input[type=text].a.a,select.a.a{flex:1;border-style:solid;border-width:1px;border-radius:4px;padding:2px 6px;font:inherit;resize:none;overflow:hidden}input[type=radio].a.a{align-self:stretch}textarea.a.a:hover{overflow-y:overlay}.status.a.a{display:flex;flex-flow:row;opacity:0.6}.status.a .message.a{flex:1}.status.a .time.a{white-space:nowrap}button.a.a{height:26px;width:var(--button-width);font-size:1em}p.a.a,ul.a.a{margin:4px 0}@media(max-width: 740px){:root.d-compact .buttons.a.a{flex-flow:column}:root.d-compact .endpoint.a.a{flex-flow:row wrap}:root.d-compact .endpoint.a input[type=text].a{flex:200px 1}}@media(max-width: 480px){:root.d-compact .option.a.a{width:100%}}:root:is(.d-mobile, .d-access){--button-width:48px;line-height:1.4}:root:is(.d-mobile, .d-access) button.a.a{height:32px}:root:is(.d-mobile, .d-access) textarea.a.a,:root:is(.d-mobile, .d-access) input[type=text].a.a,:root:is(.d-mobile, .d-access) select.a.a{padding:4px 8px}:root:is(.d-mobile, .d-access) p.a.a,:root:is(.d-mobile, .d-access) ul.a.a{margin:10px 0}:root:is(.d-mobile, .d-access) li.a.a{margin:6px 0}@media(max-width: 840px){:root:is(.d-mobile, .d-access) .buttons.a.a{flex-flow:column}:root:is(.d-mobile, .d-access) .endpoint.a.a{flex-flow:row wrap}:root:is(.d-mobile, .d-access) .endpoint.a input[type=text].a{flex:260px 1}:root:is(.d-mobile, .d-access) .new-message.a .buttons.a{flex:0 0 var(--button-width)}}@media(max-width: 500px){:root:is(.d-mobile, .d-access) .option.a.a{width:100%}}:root.d-access{--button-width:52px;font-size:17px;line-height:1.6}:root.d-access button.a.a{height:38px}</style></head><body><div id="root"></div><script>(()=>{"use strict";var e={20:(e,t)=>{var n;n={value:true};var s="far";var o="copy";var l=448;var i=512;var r=[];var a="f0c5";var c="M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.jP=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},890:(e,t)=>{var n;n={value:true};var s="far";var o="floppy-disk";var l=448;var i=512;var r=[128190,128426,"save"];var a="f0c7";var c="M48 96V416c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16V170.5c0-4.2-1.7-8.3-4.7-11.3l33.9-33.9c12 12 18.7 28.3 18.7 45.3V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96C0 60.7 28.7 32 64 32H309.5c17 0 33.3 6.7 45.3 18.7l74.5 74.5-33.9 33.9L320.8 84.7c-.3-.3-.5-.5-.8-.8V184c0 13.3-10.7 24-24 24H104c-13.3 0-24-10.7-24-24V80H64c-8.8 0-16 7.2-16 16zm80-16v80H272V80H128zm32 240a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.jk=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},53:(e,t)=>{var n;n={value:true};var s="far";var o="folder-open";var l=576;var i=512;var r=[128194,128449,61717];var a="f07c";var c="M384 480h48c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1 .1-32.1S555.5 224 544 224H144c-11.4 0-21.9 6-27.6 15.9L48 357.1V96c0-8.8 7.2-16 16-16H181.5c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8H416c8.8 0 16 7.2 16 16v32h48V160c0-35.3-28.7-64-64-64H298.5c-17 0-33.3-6.7-45.3-18.7L226.7 50.7c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H87.7 384z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.Uj=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},542:(e,t)=>{var n;n={value:true};var s="far";var o="rocket-launch";var l=512;var i=512;var r=[128640];var a="e027";var c="M197.9 253.9c12.9 6.4 24.7 14.8 35 25.2s18.8 22.2 25.2 35c105.8-30 156.7-79.5 181.5-126c25-46.8 27.3-97.6 22-137.7c-40.1-5.3-90.9-3-137.7 22c-46.5 24.8-96 75.8-126 181.5zM384 312.1v82.2c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-114.7c0-22.6-9-44.3-25-60.3s-37.7-25-60.3-25H24c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3h82.2C281.7-3.8 408.8-8.5 483.9 5.3c11.6 2.1 20.7 11.2 22.8 22.8c13.8 75.1 9.1 202.2-122.7 284zM28.3 511.9c-16 .4-28.6-12.2-28.2-28.2C1 446 7.7 379.7 42 345.5c34.4-34.4 90.1-34.4 124.5 0s34.4 90.1 0 124.5C132.3 504.3 66 511 28.3 511.9zm50.2-64.5c12.8-.7 31.2-3.7 41.3-13.7c11.4-11.4 11.4-30 0-41.4s-30-11.4-41.4 0c-10.1 10.1-13 28.5-13.7 41.3c-.5 8 5.9 14.3 13.9 13.9zM328 144a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.$c=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},937:(e,t)=>{var n;n={value:true};var s="far";var o="share-nodes";var l=448;var i=512;var r=["share-alt"];var a="f1e0";var c="M448 128c0 53-43 96-96 96c-28.9 0-54.8-12.8-72.4-33l-89.7 44.9c1.4 6.5 2.1 13.2 2.1 20.1s-.7 13.6-2.1 20.1L279.6 321c17.6-20.2 43.5-33 72.4-33c53 0 96 43 96 96s-43 96-96 96s-96-43-96-96c0-6.9 .7-13.6 2.1-20.1L168.4 319c-17.6 20.2-43.5 33-72.4 33c-53 0-96-43-96-96s43-96 96-96c28.9 0 54.8 12.8 72.4 33l89.7-44.9c-1.4-6.5-2.1-13.2-2.1-20.1c0-53 43-96 96-96s96 43 96 96zM96 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM400 128a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM352 432a48 48 0 1 0 0-96 48 48 0 1 0 0 96z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.ek=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},735:(e,t)=>{var n;n={value:true};var s="far";var o="turtle";var l=576;var i=512;var r=[128034];var a="f726";var c="M336 240V208c0-70.7-57.3-128-128-128S80 137.3 80 208v32H336zm48-32v41.2c0 21.4-17.4 38.8-38.8 38.8H70.8C49.4 288 32 270.6 32 249.2V208c0-97.2 78.8-176 176-176s176 78.8 176 176zm96 80c-8.3 0-16.3-1.6-23.6-4.5C440.3 328 400.4 361 352 367v1 72c0 22.1-17.9 40-40 40H264c-22.1 0-40-17.9-40-40V368H192v72c0 22.1-17.9 40-40 40H104c-22.1 0-40-17.9-40-40V368H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H64h48 32 48 32 48 32 32c44.2 0 80-35.8 80-80V224 192 176c0-35.3 28.7-64 64-64c53 0 96 43 96 96v16c0 35.3-28.7 64-64 64H480zM272 368v64h32V368H272zm-160 0v64h32V368H112zM496 224a16 16 0 1 0 0-32 16 16 0 1 0 0 32z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.eV=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},139:(e,t)=>{var n;n={value:true};var s="fas";var o="arrow-down";var l=384;var i=512;var r=[8595];var a="f063";var c="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.B0=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},902:(e,t)=>{var n;n={value:true};var s="fas";var o="arrow-up";var l=384;var i=512;var r=[8593];var a="f062";var c="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.IN=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},151:(e,t)=>{var n;n={value:true};var s="fas";var o="ban";var l=512;var i=512;var r=[128683,"cancel"];var a="f05e";var c="M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.Df=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},596:(e,t)=>{var n;n={value:true};var s="fas";var o="paper-plane";var l=512;var i=512;var r=[61913];var a="f1d8";var c="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.is=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},613:(e,t)=>{var n;n={value:true};var s="fas";var o="plus-large";var l=512;var i=512;var r=[];var a="e59e";var c="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 192H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H224V480c0 17.7 14.3 32 32 32s32-14.3 32-32V288l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-192 0 0-192z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.TS=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r},632:(e,t)=>{var n;n={value:true};var s="fas";var o="xmark-large";var l=448;var i=512;var r=[];var a="e59b";var c="M393.4 41.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3L269.3 256 438.6 425.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 301.3 54.6 470.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0L224 210.7 393.4 41.4z";t.mw={prefix:s,iconName:o,icon:[l,i,r,a,c]};t.S2=t.mw;n=s;n=o;n=l;n=i;n=r;n=a;n=c;n=r}};var t={};function n(s){var o=t[s];if(o!==undefined){return o.exports}var l=t[s]={exports:{}};e[s](l,l.exports,n);return l.exports}var s={};(()=>{function e(){}const t=e=>e;function s(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return!!e&&(typeof e==="object"||typeof e==="function")&&typeof e.then==="function"}function l(e,t,n,s,o){e.__svelte_meta={loc:{file:t,line:n,column:s,char:o}}}function i(e){return e()}function r(){return Object.create(null)}function a(e){e.forEach(i)}function c(e){return typeof e==="function"}function u(e,t){return e!=e?t==t:e!==t||(e&&typeof e==="object"||typeof e==="function")}let f;function d(e,t){if(!f){f=document.createElement("a")}f.href=t;return e===f.href}function p(e,t){return e!=e?t==t:e!==t}function h(e){return Object.keys(e).length===0}function m(e,t){if(e!=null&&typeof e.subscribe!=="function"){throw new Error(`'${t}' is not a store with a 'subscribe' method`)}}function g(t,...n){if(t==null){return e}const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function y(e){let t;g(e,(e=>t=e))();return t}function v(e,t,n){e.$$.on_destroy.push(g(t,n))}function b(e,t,n,s){if(e){const o=x(e,t,n,s);return e[0](o)}}function x(e,t,n,o){return e[1]&&o?s(n.ctx.slice(),e[1](o(t))):n.ctx}function $(e,t,n,s){if(e[2]&&s){const o=e[2](s(n));if(t.dirty===undefined){return o}if(typeof o==="object"){const e=[];const n=Math.max(t.dirty.length,o.length);for(let s=0;s<n;s+=1){e[s]=t.dirty[s]|o[s]}return e}return t.dirty|o}return t.dirty}function w(e,t,n,s,o,l){if(o){const i=x(t,n,s,l);e.p(i,o)}}function k(e,t,n,s,o,l,i){const r=$(t,s,o,l);w(e,t,n,s,r,i)}function _(e){if(e.ctx.length>32){const t=[];const n=e.ctx.length/32;for(let e=0;e<n;e++){t[e]=-1}return t}return-1}function C(e){const t={};for(const n in e)if(n[0]!=="$")t[n]=e[n];return t}function S(e,t){const n={};t=new Set(t);for(const s in e)if(!t.has(s)&&s[0]!=="$")n[s]=e[s];return n}function F(e){const t={};for(const n in e){t[n]=true}return t}function E(e){let t=false;return function(...n){if(t)return;t=true;e.call(this,...n)}}function M(e){return e==null?"":e}function P(e,t,n){e.set(n);return t}const T=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function O(t){return t&&c(t.destroy)?t.destroy:e}function A(e){const t=typeof e==="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const R=null&&["",true,1,"true","contenteditable"];const j=typeof window!=="undefined";let I=null&&(j?()=>window.performance.now():()=>Date.now());let L=null&&(j?e=>requestAnimationFrame(e):e);function N(e){I=e}function D(e){L=e}const U=new Set;function H(e){U.forEach((t=>{if(!t.c(e)){U.delete(t);t.f()}}));if(U.size!==0)L(H)}function z(){U.clear()}function q(e){let t;if(U.size===0)L(H);return{promise:new Promise((n=>{U.add(t={c:e,f:n})})),abort(){U.delete(t)}}}const V=typeof window!=="undefined"?window:typeof globalThis!=="undefined"?globalThis:global;class J{constructor(e){this.options=e;this._listeners="WeakMap"in V?new WeakMap:undefined}observe(e,t){this._listeners.set(e,t);this._getObserver().observe(e,this.options);return()=>{this._listeners.delete(e);this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver((e=>{var t;for(const n of e){J.entries.set(n.target,n);(t=this._listeners.get(n.target))===null||t===void 0?void 0:t(n)}}))}}J.entries="WeakMap"in V?new WeakMap:undefined;let B=false;function W(){B=true}function G(){B=false}function Y(e,t,n,s){while(e<t){const o=e+(t-e>>1);if(n(o)<=s){e=o+1}else{t=o}}return e}function Q(e){if(e.hydrate_init)return;e.hydrate_init=true;let t=e.childNodes;if(e.nodeName==="HEAD"){const e=[];for(let n=0;n<t.length;n++){const s=t[n];if(s.claim_order!==undefined){e.push(s)}}t=e}const n=new Int32Array(t.length+1);const s=new Int32Array(t.length);n[0]=-1;let o=0;for(let e=0;e<t.length;e++){const l=t[e].claim_order;const i=(o>0&&t[n[o]].claim_order<=l?o+1:Y(1,o,(e=>t[n[e]].claim_order),l))-1;s[e]=n[i]+1;const r=i+1;n[r]=e;o=Math.max(r,o)}const l=[];const i=[];let r=t.length-1;for(let e=n[o]+1;e!=0;e=s[e-1]){l.push(t[e-1]);for(;r>=e;r--){i.push(t[r])}r--}for(;r>=0;r--){i.push(t[r])}l.reverse();i.sort(((e,t)=>e.claim_order-t.claim_order));for(let t=0,n=0;t<i.length;t++){while(n<l.length&&i[t].claim_order>=l[n].claim_order){n++}const s=n<l.length?l[n]:null;e.insertBefore(i[t],s)}}function X(e,t){e.appendChild(t)}function K(e,t,n){const s=Z(e);if(!s.getElementById(t)){const e=re("style");e.id=t;e.textContent=n;te(s,e)}}function Z(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;if(t&&t.host){return t}return e.ownerDocument}function ee(e){const t=re("style");te(Z(e),t);return t.sheet}function te(e,t){X(e.head||e,t);return t.sheet}function ne(e,t){if(B){Q(e);if(e.actual_end_child===undefined||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e){e.actual_end_child=e.firstChild}while(e.actual_end_child!==null&&e.actual_end_child.claim_order===undefined){e.actual_end_child=e.actual_end_child.nextSibling}if(t!==e.actual_end_child){if(t.claim_order!==undefined||t.parentNode!==e){e.insertBefore(t,e.actual_end_child)}}else{e.actual_end_child=t.nextSibling}}else if(t.parentNode!==e||t.nextSibling!==null){e.appendChild(t)}}function se(e,t,n){e.insertBefore(t,n||null)}function oe(e,t,n){if(B&&!n){ne(e,t)}else if(t.parentNode!==e||t.nextSibling!=n){e.insertBefore(t,n||null)}}function le(e){if(e.parentNode){e.parentNode.removeChild(e)}}function ie(e,t){for(let n=0;n<e.length;n+=1){if(e[n])e[n].d(t)}}function re(e){return document.createElement(e)}function ae(e,t){return document.createElement(e,{is:t})}function ce(e,t){const n={};for(const s in e){if(T(e,s)&&t.indexOf(s)===-1){n[s]=e[s]}}return n}function ue(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function fe(e){return document.createTextNode(e)}function de(){return fe(" ")}function pe(){return fe("")}function he(e){return document.createComment(e)}function me(e,t,n,s){e.addEventListener(t,n,s);return()=>e.removeEventListener(t,n,s)}function ge(e){return function(t){t.preventDefault();return e.call(this,t)}}function ye(e){return function(t){t.stopPropagation();return e.call(this,t)}}function ve(e){return function(t){t.stopImmediatePropagation();return e.call(this,t)}}function be(e){return function(t){if(t.target===this)e.call(this,t)}}function xe(e){return function(t){if(t.isTrusted)e.call(this,t)}}function $e(e,t,n){if(n==null)e.removeAttribute(t);else if(e.getAttribute(t)!==n)e.setAttribute(t,n)}const we=null&&["width","height"];function ke(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t){if(t[s]==null){e.removeAttribute(s)}else if(s==="style"){e.style.cssText=t[s]}else if(s==="__value"){e.value=e[s]=t[s]}else if(n[s]&&n[s].set&&we.indexOf(s)===-1){e[s]=t[s]}else{$e(e,s,t[s])}}}function _e(e,t){for(const n in t){$e(e,n,t[n])}}function Ce(e,t){Object.keys(t).forEach((n=>{Se(e,n,t[n])}))}function Se(e,t,n){if(t in e){e[t]=typeof e[t]==="boolean"&&n===""?true:n}else{$e(e,t,n)}}function Fe(e){return/-/.test(e)?Ce:ke}function Ee(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function Me(e,t,n){const s=new Set;for(let t=0;t<e.length;t+=1){if(e[t].checked)s.add(e[t].__value)}if(!n){s.delete(t)}return Array.from(s)}function Pe(e){let t;return{p(...n){t=n;t.forEach((t=>e.push(t)))},r(){t.forEach((t=>e.splice(e.indexOf(t),1)))}}}function Te(e,t){let n=o(e);let s;function o(e){for(let n=0;n<t.length;n++){e=e[t[n]]=e[t[n]]||[]}return e}function l(){s.forEach((e=>n.push(e)))}function i(){s.forEach((e=>n.splice(n.indexOf(e),1)))}return{u(s){t=s;const r=o(e);if(r!==n){i();n=r;l()}},p(...e){s=e;l()},r:i}}function Oe(e){return e===""?null:+e}function Ae(e){const t=[];for(let n=0;n<e.length;n+=1){t.push({start:e.start(n),end:e.end(n)})}return t}function Re(e){return Array.from(e.childNodes)}function je(e){if(e.claim_info===undefined){e.claim_info={last_index:0,total_claimed:0}}}function Ie(e,t,n,s,o=false){je(e);const l=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const l=e[s];if(t(l)){const t=n(l);if(t===undefined){e.splice(s,1)}else{e[s]=t}if(!o){e.claim_info.last_index=s}return l}}for(let s=e.claim_info.last_index-1;s>=0;s--){const l=e[s];if(t(l)){const t=n(l);if(t===undefined){e.splice(s,1)}else{e[s]=t}if(!o){e.claim_info.last_index=s}else if(t===undefined){e.claim_info.last_index--}return l}}return s()})();l.claim_order=e.claim_info.total_claimed;e.claim_info.total_claimed+=1;return l}function Le(e,t,n,s){return Ie(e,(e=>e.nodeName===t),(e=>{const t=[];for(let s=0;s<e.attributes.length;s++){const o=e.attributes[s];if(!n[o.name]){t.push(o.name)}}t.forEach((t=>e.removeAttribute(t)));return undefined}),(()=>s(t)))}function Ne(e,t,n){return Le(e,t,n,re)}function De(e,t,n){return Le(e,t,n,ue)}function Ue(e,t){return Ie(e,(e=>e.nodeType===3),(e=>{const n=""+t;if(e.data.startsWith(n)){if(e.data.length!==n.length){return e.splitText(n.length)}}else{e.data=n}}),(()=>fe(t)),true)}function He(e){return Ue(e," ")}function ze(e,t){return Ie(e,(e=>e.nodeType===8),(e=>{e.data=""+t;return undefined}),(()=>he(t)),true)}function qe(e,t,n){for(let s=n;s<e.length;s+=1){const n=e[s];if(n.nodeType===8&&n.textContent.trim()===t){return s}}return e.length}function Ve(e,t){const n=qe(e,"HTML_TAG_START",0);const s=qe(e,"HTML_TAG_END",n);if(n===s){return new dt(undefined,t)}je(e);const o=e.splice(n,s-n+1);le(o[0]);le(o[o.length-1]);const l=o.slice(1,o.length-1);for(const t of l){t.claim_order=e.claim_info.total_claimed;e.claim_info.total_claimed+=1}return new dt(l,t)}function Je(e,t){t=""+t;if(e.data===t)return;e.data=t}function Be(e,t){t=""+t;if(e.wholeText===t)return;e.data=t}function We(e,t,n){if(~R.indexOf(n)){Be(e,t)}else{Je(e,t)}}function Ge(e,t){e.value=t==null?"":t}function Ye(e,t){try{e.type=t}catch(e){}}function Qe(e,t,n,s){if(n==null){e.style.removeProperty(t)}else{e.style.setProperty(t,n,s?"important":"")}}function Xe(e,t,n){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t){s.selected=true;return}}if(!n||t!==undefined){e.selectedIndex=-1}}function Ke(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];s.selected=~t.indexOf(s.__value)}}function Ze(e){const t=e.querySelector(":checked");return t&&t.__value}function et(e){return[].map.call(e.querySelectorAll(":checked"),(e=>e.__value))}let tt;function nt(){if(tt===undefined){tt=false;try{if(typeof window!=="undefined"&&window.parent){void window.parent.document}}catch(e){tt=true}}return tt}function st(e,t){const n=getComputedStyle(e);if(n.position==="static"){e.style.position="relative"}const s=re("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; "+"overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;");s.setAttribute("aria-hidden","true");s.tabIndex=-1;const o=nt();let l;if(o){s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>";l=me(window,"message",(e=>{if(e.source===s.contentWindow)t()}))}else{s.src="about:blank";s.onload=()=>{l=me(s.contentWindow,"resize",t);t()}}X(e,s);return()=>{if(o){l()}else if(l&&s.contentWindow){l()}le(s)}}const ot=new J({box:"content-box"});const lt=new J({box:"border-box"});const it=new J({box:"device-pixel-content-box"});function rt(e,t,n){e.classList[n?"add":"remove"](t)}function at(e,t,{bubbles:n=false,cancelable:s=false}={}){const o=document.createEvent("CustomEvent");o.initCustomEvent(e,n,s,t);return o}function ct(e,t=document.body){return Array.from(t.querySelectorAll(e))}function ut(e,t){const n=[];let s=0;for(const o of t.childNodes){if(o.nodeType===8){const t=o.textContent.trim();if(t===`HEAD_${e}_END`){s-=1;n.push(o)}else if(t===`HEAD_${e}_START`){s+=1;n.push(o)}}else if(s>0){n.push(o)}}return n}class ft{constructor(e=false){this.is_svg=false;this.is_svg=e;this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){if(!this.e){if(this.is_svg)this.e=ue(t.nodeName);else this.e=re(t.nodeType===11?"TEMPLATE":t.nodeName);this.t=t.tagName!=="TEMPLATE"?t:t.content;this.c(e)}this.i(n)}h(e){this.e.innerHTML=e;this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1){se(this.t,this.n[t],e)}}p(e){this.d();this.h(e);this.i(this.a)}d(){this.n.forEach(le)}}class dt extends ft{constructor(e,t=false){super(t);this.e=this.n=null;this.l=e}c(e){if(this.l){this.n=this.l}else{super.c(e)}}i(e){for(let t=0;t<this.n.length;t+=1){oe(this.t,this.n[t],e)}}}function pt(e){const t={};for(const n of e){t[n.name]=n.value}return t}function ht(e){const t={};e.childNodes.forEach((e=>{t[e.slot||"default"]=true}));return t}function mt(e,t){return new e(t)}const gt=new Map;let yt=0;function vt(e){let t=5381;let n=e.length;while(n--)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function bt(e,t){const n={stylesheet:ee(t),rules:{}};gt.set(e,n);return n}function xt(e,t,n,s,o,l,i,r=0){const a=16.666/s;let c="{\n";for(let e=0;e<=1;e+=a){const s=t+(n-t)*l(e);c+=e*100+`%{${i(s,1-s)}}\n`}const u=c+`100% {${i(n,1-n)}}\n}`;const f=`__svelte_${vt(u)}_${r}`;const d=Z(e);const{stylesheet:p,rules:h}=gt.get(d)||bt(d,e);if(!h[f]){h[f]=true;p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length)}const m=e.style.animation||"";e.style.animation=`${m?`${m}, `:""}${f} ${s}ms linear ${o}ms 1 both`;yt+=1;return f}function $t(e,t){const n=(e.style.animation||"").split(", ");const s=n.filter(t?e=>e.indexOf(t)<0:e=>e.indexOf("__svelte")===-1);const o=n.length-s.length;if(o){e.style.animation=s.join(", ");yt-=o;if(!yt)wt()}}function wt(){L((()=>{if(yt)return;gt.forEach((e=>{const{ownerNode:t}=e.stylesheet;if(t)le(t)}));gt.clear()}))}function kt(n,s,o,l){if(!s)return e;const i=n.getBoundingClientRect();if(s.left===i.left&&s.right===i.right&&s.top===i.top&&s.bottom===i.bottom)return e;const{delay:r=0,duration:a=300,easing:c=t,start:u=I()+r,end:f=u+a,tick:d=e,css:p}=o(n,{from:s,to:i},l);let h=true;let m=false;let g;function y(){if(p){g=xt(n,0,1,a,r,c,p)}if(!r){m=true}}function v(){if(p)$t(n,g);h=false}q((e=>{if(!m&&e>=u){m=true}if(m&&e>=f){d(1,0);v()}if(!h){return false}if(m){const t=e-u;const n=0+1*c(t/a);d(n,1-n)}return true}));y();d(0,1);return v}function _t(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:s}=t;const o=e.getBoundingClientRect();e.style.position="absolute";e.style.width=n;e.style.height=s;Ct(e,o)}}function Ct(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const s=getComputedStyle(e);const o=s.transform==="none"?"":s.transform;e.style.transform=`${o} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let St;function Ft(e){St=e}function Et(){if(!St)throw new Error("Function called outside component initialization");return St}function Mt(e){Et().$$.before_update.push(e)}function Pt(e){Et().$$.on_mount.push(e)}function Tt(e){Et().$$.after_update.push(e)}function Ot(e){Et().$$.on_destroy.push(e)}function At(){const e=Et();return(t,n,{cancelable:s=false}={})=>{const o=e.$$.callbacks[t];if(o){const l=at(t,n,{cancelable:s});o.slice().forEach((t=>{t.call(e,l)}));return!l.defaultPrevented}return true}}function Rt(e,t){Et().$$.context.set(e,t);return t}function jt(e){return Et().$$.context.get(e)}function It(){return Et().$$.context}function Lt(e){return Et().$$.context.has(e)}function Nt(e,t){const n=e.$$.callbacks[t.type];if(n){n.slice().forEach((e=>e.call(this,t)))}}const Dt=[];const Ut={enabled:false};const Ht=[];let zt=[];const qt=[];const Vt=Promise.resolve();let Jt=false;function Bt(){if(!Jt){Jt=true;Vt.then(Kt)}}function Wt(){Bt();return Vt}function Gt(e){zt.push(e)}function Yt(e){qt.push(e)}const Qt=new Set;let Xt=0;function Kt(){if(Xt!==0){return}const e=St;do{try{while(Xt<Dt.length){const e=Dt[Xt];Xt++;Ft(e);Zt(e.$$)}}catch(e){Dt.length=0;Xt=0;throw e}Ft(null);Dt.length=0;Xt=0;while(Ht.length)Ht.pop()();for(let e=0;e<zt.length;e+=1){const t=zt[e];if(!Qt.has(t)){Qt.add(t);t()}}zt.length=0}while(Dt.length);while(qt.length){qt.pop()()}Jt=false;Qt.clear();Ft(e)}function Zt(e){if(e.fragment!==null){e.update();a(e.before_update);const t=e.dirty;e.dirty=[-1];e.fragment&&e.fragment.p(e.ctx,t);e.after_update.forEach(Gt)}}function en(e){const t=[];const n=[];zt.forEach((s=>e.indexOf(s)===-1?t.push(s):n.push(s)));n.forEach((e=>e()));zt=t}let tn;function nn(){if(!tn){tn=Promise.resolve();tn.then((()=>{tn=null}))}return tn}function sn(e,t,n){e.dispatchEvent(at(`${t?"intro":"outro"}${n}`))}const on=new Set;let ln;function rn(){ln={r:0,c:[],p:ln}}function an(){if(!ln.r){a(ln.c)}ln=ln.p}function cn(e,t){if(e&&e.i){on.delete(e);e.i(t)}}function un(e,t,n,s){if(e&&e.o){if(on.has(e))return;on.add(e);ln.c.push((()=>{on.delete(e);if(s){if(n)e.d(1);s()}}));e.o(t)}else if(s){s()}}const fn={duration:0};function dn(n,s,o){const l={direction:"in"};let i=s(n,o,l);let r=false;let a;let u;let f=0;function d(){if(a)$t(n,a)}function p(){const{delay:s=0,duration:o=300,easing:l=t,tick:c=e,css:p}=i||fn;if(p)a=xt(n,0,1,o,s,l,p,f++);c(0,1);const h=I()+s;const m=h+o;if(u)u.abort();r=true;Gt((()=>sn(n,true,"start")));u=q((e=>{if(r){if(e>=m){c(1,0);sn(n,true,"end");d();return r=false}if(e>=h){const t=l((e-h)/o);c(t,1-t)}}return r}))}let h=false;return{start(){if(h)return;h=true;$t(n);if(c(i)){i=i(l);nn().then(p)}else{p()}},invalidate(){h=false},end(){if(r){d();r=false}}}}function pn(n,s,o){const l={direction:"out"};let i=s(n,o,l);let r=true;let u;const f=ln;f.r+=1;function d(){const{delay:s=0,duration:o=300,easing:l=t,tick:c=e,css:d}=i||fn;if(d)u=xt(n,1,0,o,s,l,d);const p=I()+s;const h=p+o;Gt((()=>sn(n,false,"start")));q((e=>{if(r){if(e>=h){c(0,1);sn(n,false,"end");if(! --f.r){a(f.c)}return false}if(e>=p){const t=l((e-p)/o);c(1-t,t)}}return r}))}if(c(i)){nn().then((()=>{i=i(l);d()}))}else{d()}return{end(e){if(e&&i.tick){i.tick(1,0)}if(r){if(u)$t(n,u);r=false}}}}function hn(n,s,o,l){const i={direction:"both"};let r=s(n,o,i);let u=l?0:1;let f=null;let d=null;let p=null;function h(){if(p)$t(n,p)}function m(e,t){const n=e.b-u;t*=Math.abs(n);return{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(s){const{delay:o=0,duration:l=300,easing:i=t,tick:c=e,css:g}=r||fn;const y={start:I()+o,b:s};if(!s){y.group=ln;ln.r+=1}if(f||d){d=y}else{if(g){h();p=xt(n,u,s,l,o,i,g)}if(s)c(0,1);f=m(y,l);Gt((()=>sn(n,s,"start")));q((e=>{if(d&&e>d.start){f=m(d,l);d=null;sn(n,f.b,"start");if(g){h();p=xt(n,u,f.b,f.duration,0,i,r.css)}}if(f){if(e>=f.end){c(u=f.b,1-u);sn(n,f.b,"end");if(!d){if(f.b){h()}else{if(! --f.group.r)a(f.group.c)}}f=null}else if(e>=f.start){const t=e-f.start;u=f.a+f.d*i(t/f.duration);c(u,1-u)}}return!!(f||d)}))}}return{run(e){if(c(r)){nn().then((()=>{r=r(i);g(e)}))}else{g(e)}},end(){h();f=d=null}}}function mn(e,t){const n=t.token={};function s(e,s,o,l){if(t.token!==n)return;t.resolved=l;let i=t.ctx;if(o!==undefined){i=i.slice();i[o]=l}const r=e&&(t.current=e)(i);let a=false;if(t.block){if(t.blocks){t.blocks.forEach(((e,n)=>{if(n!==s&&e){rn();un(e,1,1,(()=>{if(t.blocks[n]===e){t.blocks[n]=null}}));an()}}))}else{t.block.d(1)}r.c();cn(r,1);r.m(t.mount(),t.anchor);a=true}t.block=r;if(t.blocks)t.blocks[s]=r;if(a){Kt()}}if(o(e)){const n=Et();e.then((e=>{Ft(n);s(t.then,1,t.value,e);Ft(null)}),(e=>{Ft(n);s(t.catch,2,t.error,e);Ft(null);if(!t.hasCatch){throw e}}));if(t.current!==t.pending){s(t.pending,0);return true}}else{if(t.current!==t.then){s(t.then,1,t.value,e);return true}t.resolved=e}}function gn(e,t,n){const s=t.slice();const{resolved:o}=e;if(e.current===e.then){s[e.value]=o}if(e.current===e.catch){s[e.error]=o}e.block.p(s,n)}function yn(e,t){e.d(1);t.delete(e.key)}function vn(e,t){un(e,1,1,(()=>{t.delete(e.key)}))}function bn(e,t){e.f();yn(e,t)}function xn(e,t){e.f();vn(e,t)}function $n(e,t,n,s,o,l,i,r,c,u,f,d){let p=e.length;let h=l.length;let m=p;const g={};while(m--)g[e[m].key]=m;const y=[];const v=new Map;const b=new Map;const x=[];m=h;while(m--){const e=d(o,l,m);const r=n(e);let a=i.get(r);if(!a){a=u(r,e);a.c()}else if(s){x.push((()=>a.p(e,t)))}v.set(r,y[m]=a);if(r in g)b.set(r,Math.abs(m-g[r]))}const $=new Set;const w=new Set;function k(e){cn(e,1);e.m(r,f);i.set(e.key,e);f=e.first;h--}while(p&&h){const t=y[h-1];const n=e[p-1];const s=t.key;const o=n.key;if(t===n){f=t.first;p--;h--}else if(!v.has(o)){c(n,i);p--}else if(!i.has(s)||$.has(s)){k(t)}else if(w.has(o)){p--}else if(b.get(s)>b.get(o)){w.add(s);k(t)}else{$.add(o);p--}}while(p--){const t=e[p];if(!v.has(t.key))c(t,i)}while(h)k(y[h-1]);a(x);return y}function wn(e,t,n,s){const o=new Set;for(let l=0;l<t.length;l++){const i=s(n(e,t,l));if(o.has(i)){throw new Error("Cannot have duplicate keys in a keyed each")}o.add(i)}}function kn(e,t){const n={};const s={};const o={$$scope:1};let l=e.length;while(l--){const i=e[l];const r=t[l];if(r){for(const e in i){if(!(e in r))s[e]=1}for(const e in r){if(!o[e]){n[e]=r[e];o[e]=1}}e[l]=r}else{for(const e in i){o[e]=1}}}for(const e in s){if(!(e in n))n[e]=undefined}return n}function _n(e){return typeof e==="object"&&e!==null?e:{}}const Cn=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];const Sn=new Set([...Cn]);const Fn=/^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;function En(e){return Fn.test(e)||e.toLowerCase()==="!doctype"}const Mn=/[\s'">/=\u{FDD0}-\u{FDEF}\u{FFFE}\u{FFFF}\u{1FFFE}\u{1FFFF}\u{2FFFE}\u{2FFFF}\u{3FFFE}\u{3FFFF}\u{4FFFE}\u{4FFFF}\u{5FFFE}\u{5FFFF}\u{6FFFE}\u{6FFFF}\u{7FFFE}\u{7FFFF}\u{8FFFE}\u{8FFFF}\u{9FFFE}\u{9FFFF}\u{AFFFE}\u{AFFFF}\u{BFFFE}\u{BFFFF}\u{CFFFE}\u{CFFFF}\u{DFFFE}\u{DFFFF}\u{EFFFE}\u{EFFFF}\u{FFFFE}\u{FFFFF}\u{10FFFE}\u{10FFFF}]/u;function Pn(e,t){const n=Object.assign({},...e);if(t){const e=t.classes;const s=t.styles;if(e){if(n.class==null){n.class=e}else{n.class+=" "+e}}if(s){if(n.style==null){n.style=Jn(s)}else{n.style=Jn(Tn(n.style,s))}}}let s="";Object.keys(n).forEach((e=>{if(Mn.test(e))return;const t=n[e];if(t===true)s+=" "+e;else if(Sn.has(e.toLowerCase())){if(t)s+=" "+e}else if(t!=null){s+=` ${e}="${t}"`}}));return s}function Tn(e,t){const n={};for(const t of e.split(";")){const e=t.indexOf(":");const s=t.slice(0,e).trim();const o=t.slice(e+1).trim();if(!s)continue;n[s]=o}for(const e in t){const s=t[e];if(s){n[e]=s}else{delete n[e]}}return n}const On=/[&"]/g;const An=/[&<]/g;function Rn(e,t=false){const n=String(e);const s=t?On:An;s.lastIndex=0;let o="";let l=0;while(s.test(n)){const e=s.lastIndex-1;const t=n[e];o+=n.substring(l,e)+(t==="&"?"&amp;":t==='"'?"&quot;":"&lt;");l=e+1}return o+n.substring(l)}function jn(e){const t=typeof e==="string"||e&&typeof e==="object";return t?Rn(e,true):e}function In(e){const t={};for(const n in e){t[n]=jn(e[n])}return t}function Ln(e,t){let n="";for(let s=0;s<e.length;s+=1){n+=t(e[s],s)}return n}const Nn={$$render:()=>""};function Dn(e,t){if(!e||!e.$$render){if(t==="svelte:component")t+=" this={...}";throw new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`)}return e}function Un(e,t,n,s){console.log(`{@debug} ${e?e+" ":""}(${t}:${n})`);console.log(s);return""}let Hn;function zn(e){function t(t,n,s,o,l){const i=St;const a={on_destroy:Hn,context:new Map(l||(i?i.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:r()};Ft({$$:a});const c=e(t,n,s,o);Ft(i);return c}return{render:(e={},{$$slots:n={},context:s=new Map}={})=>{Hn=[];const o={title:"",head:"",css:new Set};const l=t(o,e,{},n,s);a(Hn);return{html:l,css:{code:Array.from(o.css).map((e=>e.code)).join("\n"),map:null},head:o.title+o.head}},$$render:t}}function qn(e,t,n){if(t==null||n&&!t)return"";const s=n&&t===true?"":`="${Rn(t,true)}"`;return` ${e}${s}`}function Vn(e){return e?` class="${e}"`:""}function Jn(e){return Object.keys(e).filter((t=>e[t])).map((t=>`${t}: ${jn(e[t])};`)).join(" ")}function Bn(e){const t=Jn(e);return t?` style="${t}"`:""}function Wn(e,t,n){const s=e.$$.props[t];if(s!==undefined){e.$$.bound[s]=n;n(e.$$.ctx[s])}}function Gn(e){e&&e.c()}function Yn(e,t){e&&e.l(t)}function Qn(e,t,n,s){const{fragment:o,after_update:l}=e.$$;o&&o.m(t,n);if(!s){Gt((()=>{const t=e.$$.on_mount.map(i).filter(c);if(e.$$.on_destroy){e.$$.on_destroy.push(...t)}else{a(t)}e.$$.on_mount=[]}))}l.forEach(Gt)}function Xn(e,t){const n=e.$$;if(n.fragment!==null){en(n.after_update);a(n.on_destroy);n.fragment&&n.fragment.d(t);n.on_destroy=n.fragment=null;n.ctx=[]}}function Kn(e,t){if(e.$$.dirty[0]===-1){Dt.push(e);Bt();e.$$.dirty.fill(0)}e.$$.dirty[t/31|0]|=1<<t%31}function Zn(t,n,s,o,l,i,c,u=[-1]){const f=St;Ft(t);const d=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:u,skip_bound:false,root:n.target||f.$$.root};c&&c(d.root);let p=false;d.ctx=s?s(t,n.props||{},((e,n,...s)=>{const o=s.length?s[0]:n;if(d.ctx&&l(d.ctx[e],d.ctx[e]=o)){if(!d.skip_bound&&d.bound[e])d.bound[e](o);if(p)Kn(t,e)}return n})):[];d.update();p=true;a(d.before_update);d.fragment=o?o(d.ctx):false;if(n.target){if(n.hydrate){W();const e=Re(n.target);d.fragment&&d.fragment.l(e);e.forEach(le)}else{d.fragment&&d.fragment.c()}if(n.intro)cn(t.$$.fragment);Qn(t,n.target,n.anchor,n.customElement);G();Kt()}Ft(f)}let es;if(typeof HTMLElement==="function"){es=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(i).filter(c);for(const e in this.$$.slotted){this.appendChild(this.$$.slotted[e])}}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){a(this.$$.on_disconnect)}$destroy(){Xn(this,1);this.$destroy=e}$on(t,n){if(!c(n)){return e}const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);s.push(n);return()=>{const e=s.indexOf(n);if(e!==-1)s.splice(e,1)}}$set(e){if(this.$$set&&!h(e)){this.$$.skip_bound=true;this.$$set(e);this.$$.skip_bound=false}}}}class ts{$destroy(){Xn(this,1);this.$destroy=e}$on(t,n){if(!c(n)){return e}const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);s.push(n);return()=>{const e=s.indexOf(n);if(e!==-1)s.splice(e,1)}}$set(e){if(this.$$set&&!h(e)){this.$$.skip_bound=true;this.$$set(e);this.$$.skip_bound=false}}}function ns(e,t){document.dispatchEvent(at(e,Object.assign({version:"3.59.2"},t),{bubbles:true}))}function ss(e,t){ns("SvelteDOMInsert",{target:e,node:t});X(e,t)}function os(e,t){ns("SvelteDOMInsert",{target:e,node:t});ne(e,t)}function ls(e,t,n){ns("SvelteDOMInsert",{target:e,node:t,anchor:n});se(e,t,n)}function is(e,t,n){ns("SvelteDOMInsert",{target:e,node:t,anchor:n});oe(e,t,n)}function rs(e){ns("SvelteDOMRemove",{node:e});le(e)}function as(e,t){while(e.nextSibling&&e.nextSibling!==t){rs(e.nextSibling)}}function cs(e){while(e.previousSibling){rs(e.previousSibling)}}function us(e){while(e.nextSibling){rs(e.nextSibling)}}function fs(e,t,n,s,o,l,i){const r=s===true?["capture"]:s?Array.from(Object.keys(s)):[];if(o)r.push("preventDefault");if(l)r.push("stopPropagation");if(i)r.push("stopImmediatePropagation");ns("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:r});const a=me(e,t,n,s);return()=>{ns("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:r});a()}}function ds(e,t,n){$e(e,t,n);if(n==null)ns("SvelteDOMRemoveAttribute",{node:e,attribute:t});else ns("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function ps(e,t,n){e[t]=n;ns("SvelteDOMSetProperty",{node:e,property:t,value:n})}function hs(e,t,n){e.dataset[t]=n;ns("SvelteDOMSetDataset",{node:e,property:t,value:n})}function ms(e,t){t=""+t;if(e.data===t)return;ns("SvelteDOMSetData",{node:e,data:t});e.data=t}function gs(e,t){t=""+t;if(e.wholeText===t)return;ns("SvelteDOMSetData",{node:e,data:t});e.data=t}function ys(e,t,n){if(~R.indexOf(n)){gs(e,t)}else{ms(e,t)}}function vs(e){if(typeof e!=="string"&&!(e&&typeof e==="object"&&"length"in e)){let t="{#each} only iterates over array-like objects.";if(typeof Symbol==="function"&&e&&Symbol.iterator in e){t+=" You can use a spread to convert this iterable into an array."}throw new Error(t)}}function bs(e,t,n){for(const s of Object.keys(t)){if(!~n.indexOf(s)){console.warn(`<${e}> received an unexpected slot "${s}".`)}}}function xs(e){const t=typeof e==="string";if(e&&!t){throw new Error('<svelte:element> expects "this" attribute to be a string.')}}function $s(e){if(e&&En(e)){console.warn(`<svelte:element this="${e}"> is self-closing and cannot have content.`)}}function ws(e,t){const n="this={...} of <svelte:component> should specify a Svelte component.";try{const s=new e(t);if(!s.$$||!s.$set||!s.$on||!s.$destroy){throw new Error(n)}return s}catch(e){const{message:t}=e;if(typeof t==="string"&&t.indexOf("is not a constructor")!==-1){throw new Error(n)}else{throw e}}}class ks extends ts{constructor(e){if(!e||!e.target&&!e.$$inline){throw new Error("'target' is a required option")}super()}$destroy(){super.$destroy();this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}class _s extends ks{constructor(e){super(e)}}function Cs(e){const t=Date.now();return()=>{if(Date.now()-t>e){throw new Error("Infinite loop detected")}}}const Ss=parseFloat;function Fs(e,t=";"){let n;if(Array.isArray(e)){n=e.filter((e=>e))}else{n=[];for(const t in e){if(e[t]){n.push(`${t}:${e[t]}`)}}}return n.join(t)}function Es(e,t,n,s){let o;let l;const i="1em";let r;let a;let c;let u="-.125em";const f="visible";if(s){c="center";l="1.25em"}if(n){o=n}if(t){if(t=="lg"){a="1.33333em";r=".75em";u="-.225em"}else if(t=="xs"){a=".75em"}else if(t=="sm"){a=".875em"}else{a=t.replace("x","em")}}return Fs([Fs({float:o,width:l,height:i,"line-height":r,"font-size":a,"text-align":c,"vertical-align":u,"transform-origin":"center",overflow:f}),e])}function Ms(e,t,n,s,o,l=1,i="",r=""){let a=1;let c=1;if(o){if(o=="horizontal"){a=-1}else if(o=="vertical"){c=-1}else{a=c=-1}}return Fs([`translate(${Ss(t)*l}${i},${Ss(n)*l}${i})`,`scale(${a*Ss(e)},${c*Ss(e)})`,s&&`rotate(${s}${r})`]," ")}function Ps(e){let t;let n;let s;let o;let l;let i;let r;let a;function c(e,t){if(typeof e[10][4]=="string")return Os;return Ts}let u=c(e,-1);let f=u(e);return{c(){t=ue("svg");n=ue("g");s=ue("g");f.c();$e(s,"transform",e[12]);$e(n,"transform",o="translate("+e[10][0]/2+" "+e[10][1]/2+")");$e(n,"transform-origin",l=""+(e[10][0]/4+" 0"));$e(t,"id",i=e[1]||undefined);$e(t,"class",r="svelte-fa "+e[0]+" f");$e(t,"style",e[11]);$e(t,"viewBox",a="0 0 "+e[10][0]+" "+e[10][1]);$e(t,"aria-hidden","true");$e(t,"role","img");$e(t,"xmlns","http://www.w3.org/2000/svg");rt(t,"pulse",e[4]);rt(t,"spin",e[3])},m(e,o){se(e,t,o);X(t,n);X(n,s);f.m(s,null)},p(e,d){if(u===(u=c(e,d))&&f){f.p(e,d)}else{f.d(1);f=u(e);if(f){f.c();f.m(s,null)}}if(d&4096){$e(s,"transform",e[12])}if(d&1024&&o!==(o="translate("+e[10][0]/2+" "+e[10][1]/2+")")){$e(n,"transform",o)}if(d&1024&&l!==(l=""+(e[10][0]/4+" 0"))){$e(n,"transform-origin",l)}if(d&2&&i!==(i=e[1]||undefined)){$e(t,"id",i)}if(d&1&&r!==(r="svelte-fa "+e[0]+" f")){$e(t,"class",r)}if(d&2048){$e(t,"style",e[11])}if(d&1024&&a!==(a="0 0 "+e[10][0]+" "+e[10][1])){$e(t,"viewBox",a)}if(d&17){rt(t,"pulse",e[4])}if(d&9){rt(t,"spin",e[3])}},d(e){if(e)le(t);f.d()}}}function Ts(e){let t;let n;let s;let o;let l;let i;let r;let a;let c;let u;return{c(){t=ue("path");i=ue("path");$e(t,"d",n=e[10][4][0]);$e(t,"fill",s=e[6]||e[2]||"currentColor");$e(t,"fill-opacity",o=e[9]!=false?e[7]:e[8]);$e(t,"transform",l="translate("+e[10][0]/-2+" "+e[10][1]/-2+")");$e(i,"d",r=e[10][4][1]);$e(i,"fill",a=e[5]||e[2]||"currentColor");$e(i,"fill-opacity",c=e[9]!=false?e[8]:e[7]);$e(i,"transform",u="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")},m(e,n){se(e,t,n);se(e,i,n)},p(e,f){if(f&1024&&n!==(n=e[10][4][0])){$e(t,"d",n)}if(f&68&&s!==(s=e[6]||e[2]||"currentColor")){$e(t,"fill",s)}if(f&896&&o!==(o=e[9]!=false?e[7]:e[8])){$e(t,"fill-opacity",o)}if(f&1024&&l!==(l="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")){$e(t,"transform",l)}if(f&1024&&r!==(r=e[10][4][1])){$e(i,"d",r)}if(f&36&&a!==(a=e[5]||e[2]||"currentColor")){$e(i,"fill",a)}if(f&896&&c!==(c=e[9]!=false?e[8]:e[7])){$e(i,"fill-opacity",c)}if(f&1024&&u!==(u="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")){$e(i,"transform",u)}},d(e){if(e)le(t);if(e)le(i)}}}function Os(e){let t;let n;let s;let o;return{c(){t=ue("path");$e(t,"d",n=e[10][4]);$e(t,"fill",s=e[2]||e[5]||"currentColor");$e(t,"transform",o="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")},m(e,n){se(e,t,n)},p(e,l){if(l&1024&&n!==(n=e[10][4])){$e(t,"d",n)}if(l&36&&s!==(s=e[2]||e[5]||"currentColor")){$e(t,"fill",s)}if(l&1024&&o!==(o="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")){$e(t,"transform",o)}},d(e){if(e)le(t)}}}function As(t){let n;let s=t[10][4]&&Ps(t);return{c(){if(s)s.c();n=pe()},m(e,t){if(s)s.m(e,t);se(e,n,t)},p(e,[t]){if(e[10][4]){if(s){s.p(e,t)}else{s=Ps(e);s.c();s.m(n.parentNode,n)}}else if(s){s.d(1);s=null}},i:e,o:e,d(e){if(s)s.d(e);if(e)le(n)}}}function Rs(e,t,n){let{class:s=""}=t;let{id:o=""}=t;let{style:l=""}=t;let{icon:i}=t;let{size:r=""}=t;let{color:a=""}=t;let{fw:c=false}=t;let{pull:u=""}=t;let{scale:f=1}=t;let{translateX:d=0}=t;let{translateY:p=0}=t;let{rotate:h=""}=t;let{flip:m=false}=t;let{spin:g=false}=t;let{pulse:y=false}=t;let{primaryColor:v=""}=t;let{secondaryColor:b=""}=t;let{primaryOpacity:x=1}=t;let{secondaryOpacity:$=.4}=t;let{swapOpacity:w=false}=t;let k;let _;let C;e.$$set=e=>{if("class"in e)n(0,s=e.class);if("id"in e)n(1,o=e.id);if("style"in e)n(13,l=e.style);if("icon"in e)n(14,i=e.icon);if("size"in e)n(15,r=e.size);if("color"in e)n(2,a=e.color);if("fw"in e)n(16,c=e.fw);if("pull"in e)n(17,u=e.pull);if("scale"in e)n(18,f=e.scale);if("translateX"in e)n(19,d=e.translateX);if("translateY"in e)n(20,p=e.translateY);if("rotate"in e)n(21,h=e.rotate);if("flip"in e)n(22,m=e.flip);if("spin"in e)n(3,g=e.spin);if("pulse"in e)n(4,y=e.pulse);if("primaryColor"in e)n(5,v=e.primaryColor);if("secondaryColor"in e)n(6,b=e.secondaryColor);if("primaryOpacity"in e)n(7,x=e.primaryOpacity);if("secondaryOpacity"in e)n(8,$=e.secondaryOpacity);if("swapOpacity"in e)n(9,w=e.swapOpacity)};e.$$.update=()=>{if(e.$$.dirty&16384){e:n(10,k=i&&i.icon||[0,0,"",[],""])}if(e.$$.dirty&237568){e:n(11,_=Es(l,r,u,c))}if(e.$$.dirty&8126464){e:n(12,C=Ms(f,d,p,h,m,512))}};return[s,o,a,g,y,v,b,x,$,w,k,_,C,l,i,r,c,u,f,d,p,h,m]}class js extends ts{constructor(e){super();Zn(this,e,Rs,As,u,{class:0,id:1,style:13,icon:14,size:15,color:2,fw:16,pull:17,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:3,pulse:4,primaryColor:5,secondaryColor:6,primaryOpacity:7,secondaryOpacity:8,swapOpacity:9})}}const Is=js;function Ls(e){return new Promise((t=>{setTimeout(t,e)}))}function Ns(e){return new Promise(((t,n)=>{setTimeout((()=>n(new Error(`Timeout ${e} ms`))),e)}))}function Ds(e){const t=parseFloat(e);return!Number.isNaN(t)&&Number.isFinite(t)?t:null}function Us(e){const t=parseInt(e,10);return!Number.isNaN(t)&&Number.isFinite(t)?t:null}function Hs(e){try{return JSON.parse(e)}catch{return null}}function zs(){try{return crypto.randomUUID()}catch{try{return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}catch{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}))}}}function qs(e,t){try{const n=JSON.parse(localStorage.getItem(e));return n!==null&&typeof n===typeof t&&n.constructor.name===t.constructor.name?n.constructor.name==="Object"?Object.assign(t,n):n:t}catch(n){log(`Warning: Failed to load ${e} from localStorage: ${n.message}`,n);return t}}function Vs(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){log(`Warning: Failed to save ${e} to localStorage: ${t.message}`,t)}}function Js(e,t,n){const s=new Blob([n],{type:e});const o=window.document.createElement("a");o.href=window.URL.createObjectURL(s);o.download=t;document.body.appendChild(o);o.click();document.body.removeChild(o)}function Bs(e){const t="position: absolute; width: 0; height: 0; overflow: hidden;";document.querySelector("#uploadFileUtil")?.remove();document.body.insertAdjacentHTML("beforeEnd",`<input type="file" id="uploadFileUtil" accept="${e}" style="${t}" />`);const n=document.querySelector("#uploadFileUtil");return new Promise(((e,t)=>{let s=false;n.addEventListener("change",(async()=>{s=true;try{e(JSON.parse(await n.files[0].text()))}catch(e){t(e)}n.remove()}),{once:true});window.addEventListener("focus",(()=>{setTimeout((()=>{if(s)return;e(null);n.remove()}),300)}),{once:true});n.click()}))}async function*Ws(e,t){if(!e.body)return;const n=Ys(e.body.pipeThrough(new TextDecoderStream).pipeThrough(new Qs({allowCR:true})));let s=null;for await(const e of n){if(t&&t.aborted)break;if(e.length==0){if(s!=null){if(s.data?.length>0)s.json=Hs(s.data);yield s}s=null;continue}const n=/[:]\s*/.exec(e);if(!(n?.index>0))continue;const o=e.substring(0,n.index);const l=e.substring(n.index+n[0].length);if(o=="data"){s||={};s[o]=s[o]?.length>0?`${s[o]}\n${l}`:l}else if(o=="event"){s||={};s[o]=l}else if(o=="id"){s||={};s[o]=+l||l}else if(o=="retry"){s||={};s[o]=+l||undefined}}}async function Gs(e,t){let n=new Request(e,t);s(n.headers,"Accept","text/event-stream");s(n.headers,"Content-Type","application/json");return Ws(await fetch(n),n.signal);function s(e,t,n){if(!e.get(t))e.set(t,n)}}async function*Ys(e){const t=e.getReader();try{while(true){const{done:e,value:n}=await t.read();if(e)return;yield n}}finally{t.releaseLock()}}class Qs extends TransformStream{#e="";constructor(e={allowCR:false}){super({transform:(t,n)=>{t=this.#e+t;while(true){const s=t.indexOf("\n");const o=e.allowCR?t.indexOf("\r"):-1;if(o!==-1&&o!==t.length-1&&(s===-1||s-1>o)){n.enqueue(t.slice(0,o));t=t.slice(o+1);continue}if(s===-1)break;const l=t[s-1]==="\r"?s-1:s;n.enqueue(t.slice(0,l));t=t.slice(s+1)}this.#e=t},flush:t=>{if(this.#e==="")return;const n=e.allowCR&&this.#e.endsWith("\r")?this.#e.slice(0,-1):this.#e;t.enqueue(n)}})}}class Xs{static providers=[];static proxies=[];displayName;id;defaultConfig;messageRoles;models;runner;constructor(e,t,n,s,o,l){Object.assign(this,{id:e,displayName:t,runner:n,configGetter:s,messageRoles:o,models:l})}static init(){Xs.providers=[new Xs("","",Zs,{},[],[]),new Xs("openai-text","OpenAI Text",eo,{key:"",url:"",model:"",stream:false},[],["gpt-3.5-turbo-instruct"]),new Xs("openai-chat","OpenAI Chat",to,{key:"",url:"",model:"",stream:false,rawUrl:false},["user","assistant","system"],["gpt-4-0125-preview","gpt-4-1106-preview","gpt-4-turbo-preview","gpt-4-1106-vision-preview","gpt-4-vision-preview","gpt-4","gpt-4-0314","gpt-4-0613","gpt-4-32k","gpt-4-32k-0314","gpt-4-32k-0613","gpt-3.5-turbo-1106","gpt-3.5-turbo-16k","gpt-3.5-turbo","gpt-3.5-turbo-0301","gpt-3.5-turbo-0613","gpt-3.5-turbo-1106","gpt-3.5-turbo-16k-0613","gemini-pro","mistral-medium"]),new Xs("azure-openai-chat","Azure OpenAI Chat",no,{key:"",resource:"",deployment:"",apiVersion:"",stream:false},["user","assistant","system"],[]),new Xs("anthropic-text","Anthropic Text",oo,{key:"",url:"",model:"",stream:false},["human","assistant","system"],["claude-1.0","claude-1.2","claude-1.3","claude-1.3-100k","claude-instant-1.0","claude-instant-1.1","claude-instant-1.2","claude-instant-1-100k","claude-instant-1.1-100k","claude-2.0","claude-2.1","anthropic.claude-v1","anthropic.claude-v2","anthropic.claude-v2:1"]),new Xs("anthropic-messages","Anthropic Messages",lo,{key:"",url:"",model:"",stream:false},["user","assistant","system"],["claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-haiku-20240307","anthropic.claude-v2","anthropic.claude-v2:1","anthropic.claude-3-sonnet-20240229-v1:0","anthropic.claude-3-haiku-20240307-v1:0","anthropic.claude-instant-v1"]),new Xs("natdev","Nat.dev",io,{key:"",url:"",model:"",stream:false},[],["textgeneration:llama-65b","replicate:alpaca-7b","replicate:llama-13b","huggingface:bigscience/bloomz","openai:gpt-3.5-turbo","openai:gpt-4","openai:text-davinci-002",,"openai:text-davinci-003","anthropic:claude-instant-v1.0","anthropic:claude-v1.2"]),new Xs("steamship-plugin","SteamShip Plugin",ro,{key:"",workspace:"",model:""},[],["gpt-3","gpt-4"]),new Xs("scale-spellbook","Scale Spellbook",ao,{key:"",url:""},[],[]),new Xs("scale-spellbook-fish","Scale Spellbook (Fish proxy)",co,{key:"",url:""},[],[]),new Xs("chatbotkit","ChatBotKit",uo,{key:"",url:"",model:"",stream:false},["user","bot","context","instruction","backstory"],["gpt-4","gbt-3.5-turbo","text-davinci-003","text-davinci-002","text-algo-003","text-algo-002","text-algo-001"])];Xs.proxies=[new Xs("","Direct",po,{}),new Xs("cors-anywhere","CORS Anywhere",ho,{url:""})]}createConfig(){return Object.assign({},{typeId:this.id,name:"Name"},this.defaultConfig)}static createConnection(e,t,n){if(e==null)return null;const s=Xs.getProvider(e.typeId);if(s.runner===Zs)return null;const o=Xs.getProxy(t?.typeId);const l={maxTokens:Us(n.maxTokens),temperature:Ds(n.temperature),frequencyPenalty:Ds(n.frequencyPenalty),presencePenalty:Ds(n.presencePenalty)};return new s.runner(Object.assign(l,e),new o.runner(t))}static getProvider(e){return Xs.providers.filter((t=>t.id==e))[0]??Xs.providers[0]}static getProxy(e){return Xs.proxies.filter((t=>t.id==e))[0]??Xs.proxies[0]}static createDefaultProviderConfig(){return Xs.providers[0].createConfig()}static createDefaultProxyConfig(){return Xs.proxies[0].createConfig()}}class Ks{config;proxy;onMessage;onLogMessage;onError;constructor(e,t){if(this.constructor===Ks)throw new go(this);Object.assign(this,{config:e,proxy:t})}get keyHeader(){return"Authorization"}async sendRequest(e){return{error:"Provider not implemented"}}appendURL(e,t,n=false){return n||e.endsWith(t)?e:e.endsWith("/")?`${e}${t}`:`${e}/${t}`}createFetchJsonOptions(e,t){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:e};const[s,o]=[this.config.key,this.keyHeader];if(s?.length>0&&o?.length>0)n.headers[o]=o=="Authorization"?`Bearer ${s}`:s;this.setExtraHeaders(n.headers);return n}setExtraHeaders(e){}async fetch(e,t){const n=await fetch(this.config.rawUrl?this.config.url:e,t);const s={};n.headers.forEach(((e,t)=>s[t]=e));console.log("Received HTTP response:",n,"headers:",s);return n}async handleJsonResponse(e,t){let n;try{n=await t.text()}catch(n){this.raiseError("Failed to decode message",n,e,t);return false}try{return await this.handleJson(JSON.parse(n),e,t)}catch(s){this.raiseError(n.length>4096?"Failed to parse message":n,s,e,t);return false}}async handleJson(e,t,n){throw new mo("handleJson")}raiseLogMessage(e){this.onLogMessage?.call(this,e)}raiseMessage(e){this.onMessage?.call(this,e);return true}raiseError(e,t,n,s){const o=s==null||s.ok?"":` (HTTP code: ${s.status}${` ${s.statusText}`.trim()})`;this.onError?.call(this,{text:`${e}${n.extraText}: ${t?.message}${o}`,error:t});return false}}class Zs extends Ks{async sendRequest(e){return{error:"Provider not set"}}}class eo extends Ks{async sendRequest(e){const t=this.appendURL(this.proxy.modifyUrl(this.config.url||"https://api.openai.com"),"v1/completions");const n=this.createFetchJsonOptions(e.signal,{prompt:e.messages.map((e=>`${e.text}\n\n`)).join(""),model:this.config.model,max_tokens:this.config.maxTokens,temperature:this.config.temperature,frequency_penalty:this.config.frequencyPenalty,presence_penalty:this.config.presencePenalty});let s=null;try{s=await this.fetch(t,n);if(!s.ok){const t=await s.text();const n=Hs(t);return this.raiseError("Query failed",new Error(n?.error?.message??n.error??t?.slice(0,256)),e,s)}if(this.config.stream){for await(const e of Ws(s,n.signal)){const t=e.json;switch(t?.object){case"text_completion":this.raiseMessage({text:t.choices?.[0]?.text??"",role:"assistant",mode:"append",data:[t]});break;default:this.raiseLogMessage({text:`Event ${t?.object??"?"}`,data:[e]});break}}}else{const e=await s.json();return this.raiseMessage({text:e.choices?.[0]?.text??"",role:"assistant",mode:"complete"})}return this.raiseMessage({text:"",role:"assistant",mode:"done"})}catch(t){return this.raiseError("Query failed",t,e,s)}}}class to extends Ks{async sendRequest(e){const t=e=>(e||"").match(/system/i)?"system":(e||"").match(/user|human/i)?"user":"assistant";const n=this.appendURL(this.proxy.modifyUrl(this.config.url||"https://api.openai.com"),"v1/chat/completions");const s=this.createFetchJsonOptions(e.signal,{messages:e.messages.map((e=>({role:t(e.role),content:e.text}))),model:this.config.model,max_tokens:this.config.maxTokens,temperature:this.config.temperature,frequency_penalty:this.config.frequencyPenalty,presence_penalty:this.config.presencePenalty,stream:this.config.stream});let o=null;try{o=await this.fetch(n,s);if(!o.ok){const t=await o.text();const n=Hs(t);return this.raiseError("Query failed",new Error(n?.error?.message??n.error??t?.slice(0,256)),e,o)}if(this.config.stream){for await(const e of Ws(o,s.signal)){const t=e.json;switch(t?.object){case"chat.completion.chunk":this.raiseMessage({text:t.choices?.[0]?.delta?.content??"",role:"assistant",mode:"append",data:[t]});break;default:this.raiseLogMessage({text:`Event ${t?.object??"?"}`,data:[e]});break}}return this.raiseMessage({text:"",role:"assistant",mode:"done"})}else{const e=await o.json();return this.raiseMessage({text:e.choices?.[0]?.message?.content??"",role:"assistant",mode:"complete"})}}catch(t){return this.raiseError("Query failed",t,e,o)}}}class no extends to{get keyHeader(){return"Api-Key"}async sendRequest(e){const t=e=>(e||"").match(/system/i)?"system":(e||"").match(/user|human/i)?"user":"assistant";const n=new AzureOpenAIClient(this.proxy.modifyUrl(`https://${this.config.resource}.openai.azure.com/`),new AzureKeyCredential(this.config.key),{apiVersion:this.config.apiVersion});const s=e.messages.map((e=>({role:t(e.role),content:e.text})));const o={maxTokens:this.config.maxTokens,temperature:this.config.temperature,frequencyPenalty:this.config.frequencyPenalty,presencePenalty:this.config.presencePenalty,abortSignal:e.signal};let l=null;try{if(this.config.stream){const t=await n.streamChatCompletions(this.config.deployment,s,o);e.signal.addEventListener("abort",(()=>t.cancel()));for await(const e of t)this.raiseMessage({text:e.choices[0]?.delta?.content??"",role:"assistant",mode:"append"});return this.raiseMessage({text:"",role:"assistant",mode:"done"})}else{const e=await n.getChatCompletions(this.config.deployment,s,o);return this.raiseMessage({text:e.choices[0]?.message?.content??"",role:"assistant",mode:"complete"})}}catch(t){return this.raiseError("Query failed",t,e,l)}}}class so extends Ks{get keyHeader(){return"X-Api-Key"}setExtraHeaders(e){e["Anthropic-Version"]="2023-06-01"}}class oo extends so{async sendRequest(e){const[t,n]=["\n\nHuman:","\n\nAssistant:"];const s=e=>(e||"").match(/system/i)?"":(e||"").match(/user|human/i)?t:n;const o=this.appendURL(this.proxy.modifyUrl(this.config.url||"https://api.anthropic.com"),"v1/complete");const l=this.createFetchJsonOptions(e.signal,{prompt:e.messages.map((e=>`${s(e.role)} ${e.text}`)).join("")+(s(e.messages.at(-1)?.role)==n?"":n),model:this.config.model,max_tokens_to_sample:this.config.maxTokens,temperature:this.config.temperature,stop_sequences:[t],stream:this.config.stream});let i=null;try{i=await this.fetch(o,l);if(!i.ok){const t=await i.text();const n=Hs(t);return this.raiseError("Query failed",new Error(n?.error?.message??n.error??t?.slice(0,256)),e,i)}if(this.config.stream){const t=Ws(i,l.signal);for await(const n of t){const t=n.json;switch(n.type??t?.type){case"completion":this.raiseMessage({text:t.completion??"",role:"assistant",mode:"append",data:[t]});break;case"error":this.raiseError("Received error",new Error(t?.error?.message),e,i);break;default:this.raiseLogMessage({text:`Event ${t?.type??"?"}`,data:[n]});break}}return this.raiseMessage({text:"",role:"assistant",mode:"done"})}else{const e=await i.json();return this.raiseMessage({text:e.completion,role:"assistant",mode:"complete"})}}catch(t){return this.raiseError("Query failed",t,e,i)}}}class lo extends so{async sendRequest(e){const t=e=>(e||"").match(/system/i)?"system":(e||"").match(/user|human/i)?"user":"assistant";const n=this.appendURL(this.proxy.modifyUrl(this.config.url||"https://api.anthropic.com"),"v1/messages");const s=this.createFetchJsonOptions(e.signal,{messages:e.messages.filter((e=>t(e.role)!="system")).map((e=>({role:t(e.role),content:e.text.trimRight()}))),system:e.messages.filter((e=>t(e.role)=="system")).map((e=>e.text)).join("\n").trim(),model:this.config.model,max_tokens:this.config.maxTokens,temperature:this.config.temperature,stream:this.config.stream});let o=null;try{o=await this.fetch(n,s);if(!o.ok){const t=await o.text();const n=Hs(t);return this.raiseError("Query failed",new Error(n?.error?.message??n.error??t?.slice(0,256)),e,o)}if(this.config.stream){for await(const t of Ws(o,s.signal)){const n=t.json;switch(t.type??n?.type){case"content_block_delta":this.raiseMessage({text:n.delta?.text??"",role:"assistant",mode:"append",data:[n]});break;case"message_start":const s=n.message??n;this.raiseLogMessage({text:`Message start (model: ${s.model}, input: ${s.usage?.input_tokens} tokens)`,data:[n]});break;case"message_stop":const l=n["amazon-bedrock-invocationMetrics"];const i=n.inputTokenCount??l?.inputTokenCount;const r=n.outputTokenCount??l?.outputTokenCount;this.raiseLogMessage({text:`Message stop (input: ${i} tokens, output: ${r})`,data:[n]});break;case"error":this.raiseError("Received error",new Error(n?.error?.message),e,o);break;default:this.raiseLogMessage({text:`Event ${n?.type??"?"}`,data:[t]});break}}return this.raiseMessage({text:"",role:"assistant",mode:"done"})}else{const e=await o.json();return this.raiseMessage({text:e.content?.text,role:"assistant",mode:"complete"})}}catch(t){return this.raiseError("Query failed",t,e,o)}}}class io extends Ks{constructor(e,t){super(e,t)}async sendRequest(e){let t,n;console.log(this);t=await this.fetch(this.proxy.modifyUrl("https://clerk.nat.dev/v1/client?_clerk_js_version=4.35.0"),{method:"GET",credentials:"include",headers:{Origin:"https://nat.dev",Referer:"https://nat.dev/"},signal:e.signal});console.log(await t.json());console.log("All models",n)}async sendAsyncApi(e){const t=1e4;if(this.pusher!=null)return;const n={key:"a9198d6754ae6285290b",cluster:"mt1"};const s=new URLSearchParams({protocol:7,client:"js",version:"8.0.1"});let o=null;this.pusher=new WebSocket(`wss://ws-${n.cluster}.pusher.com/app/${n.key}?${s}`);this.pusher.addEventListener("message",(t=>{if(e.signal.aborted){this.pusher.close();return}const n=JSON.parse(t.data);const s=typeof n.data==="string"?JSON.parse(n.data):null;console.log("Pusher message",n,"data",s);switch(n.event){case"pusher:connection_established":o?.call();break;case"batchTokensBegin":console.log("Pusher begin tokens",n.channel);break;case"batchTokensAvailable":const e=s.tokens.join("");console.log("Pusher tokens",n.channel,e);this.raiseMessage({text:e,role:"bot",mode:"append"});break;case"batchTokensEnd":console.log("Pusher end tokens",n.channel,s.messageId);this.pusher.close();break}}));this.pusher.addEventListener("error",(t=>{this.raiseError("Pusher error",new Error(`${t}`),e,null)}));console.log(this.pusher);await Promise.race([Ns(t),new Promise((e=>{o=e}))])}async callApi(e,t,n,s){const o=this.config.url||"https://nat.dev/api/";const l=await this.fetch(this.proxy.modifyUrl(new URL(n,o).toString()),{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.key}`,Origin:"https://nat.dev",Referer:"https://nat.dev/"},body:t=="POST"&&s!=null?JSON.stringify(s):null,signal:e.signal});const i=await this.handleJsonResponse(e,l);return[l,i]}async handleJson(e,t,n){return e}}class ro extends Ks{async sendRequest(e){const t=2e3;let[n,s]=await this.callApi(e,"plugin/instance/generate",{appendOutputToFile:false,text:e.messages.map((e=>e.text)).join("\n"),pluginInstance:this.config.workspace});if(s===false)return false;console.log("SteamShip init",s);const o=s?.status?.taskId;if(o==null)return this.raiseError("Failed to generate",new Error("No task id"),e,n);else this.raiseLogMessage({text:"Sending message (done: generate)"});let l="";while(true){[n,s]=await this.callApi(e,"task/status",{taskId:o});if(s===false)return;console.log("SteamShip poll",s.status.state,s);if(s.data!=null){const e=s.data.blocks[0];return this.raiseMessage({text:e.text,role:e.tags.filter((e=>e.kind=="role"))[0]?.name??"assistant",mode:"complete"})}if(l!=s.status.state){l=s.status.state;this.raiseLogMessage({text:`Sending message (${l})`})}await Ls(t)}}async callApi(e,t,n){const s=this.config.url||"https://api.steamship.com/api/v1/";const o=await this.fetch(this.proxy.modifyUrl(new URL(t,s).toString()),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.key}`,"X-Workspace-Handle":this.config.workspace},body:JSON.stringify(n),signal:e.signal});const l=await this.handleJsonResponse(e,o);return[o,l]}async handleJson(e,t,n){if(e?.status?.state=="failed"){const{statusCode:s,statusMessage:o}=e.status;const l=`${s!=null?`${s}: `:""}${o}`;return this.raiseError("Received error message",new Error(l),t,n)}return e}}class ao extends Ks{async sendRequest(e){let t=e.messages.map((e=>e.text)).join("\n");let n=await this.getResponse(e,t);return await this.handleJsonResponse(e,n)}async getResponse(e,t){return await this.fetch(this.proxy.modifyUrl(this.config.url),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+this.config.key},body:JSON.stringify({input:{input:t}}),signal:e.signal})}async handleJson(e,t,n){if(e.output==null||e.message!=null)return this.raiseError("Received error message",new Error(e.message||"Unknown"),t,n);else return this.raiseMessage({text:e.output,role:"",mode:"complete"})}}class co extends Ks{pusher;async getResponse(e,t){return await this.fetch(`https://fishtailprotocol.com/projects/betterGPT4/scale-api.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({OAIToken:this.config.key,scaleURL:this.config.url,chatLog:t}),signal:e.signal})}async handleJson(e,t,n){return super.handleJson(e.response,t,n)}}class uo extends Ks{static baseApiUrl="https://api.chatbotkit.com/v1/";async sendRequest(e){const t={assistant:"bot",system:"backstory"};const n=e=>e=="backstory"||e=="system";let s,o;const l=e.messages.filter((e=>!n(e.role)));const i=e.messages.filter((e=>n(e.role)));const r=l.slice(0,-1);[s,o]=await this.callApi(e,"conversation/create",{backstory:i.map((e=>e.text)).join("\n"),model:this.config.model,datasetId:"",skillsetId:"",messages:r.map((e=>({type:t[e.role]||e.role||"user",text:e.text})))});if(o===false)return false;const a=o.id;let c=null;try{const t=l.slice(-1)[0];[s,o]=await this.callApi(e,`conversation/${a}/send`,{text:t.text,entities:[]});if(o===false)return false;if(this.config.stream){try{await this.connectToPusher(e)}catch(t){this.raiseError("Failed to receive message",t,e,null);return false}const t=zs();this.pusher.send(JSON.stringify({event:"pusher:subscribe",data:{auto:"",channel:t}}));[s,o]=await this.callApi(e,`conversation/${a}/receive`,{parse:false,channel:t});c={text:"",role:"bot",mode:"done"}}else{[s,o]=await this.callApi(e,`conversation/${a}/receive`,{parse:false});if(o===false)return false;c={role:"bot",text:o.text,mode:"complete"}}}finally{try{[s,o]=await this.callApi(e,`conversation/${a}/delete`,{},false)}finally{if(c!=null)this.raiseMessage(c)}}return true}async connectToPusher(e){const t=1e4;if(this.pusher!=null)return;const n={key:"a9198d6754ae6285290b",cluster:"mt1"};const s=new URLSearchParams({protocol:7,client:"js",version:"8.0.1"});let o=null;this.pusher=new WebSocket(`wss://ws-${n.cluster}.pusher.com/app/${n.key}?${s}`);this.pusher.addEventListener("message",(t=>{if(e.signal.aborted){this.pusher.close();return}const n=JSON.parse(t.data);const s=typeof n.data==="string"?JSON.parse(n.data):null;console.log("Pusher message",n,"data",s);switch(n.event){case"pusher:connection_established":o?.call();break;case"batchTokensBegin":console.log("Pusher begin tokens",n.channel);break;case"batchTokensAvailable":const e=s.tokens.join("");console.log("Pusher tokens",n.channel,e);this.raiseMessage({text:e,role:"bot",mode:"append"});break;case"batchTokensEnd":console.log("Pusher end tokens",n.channel,s.messageId);this.pusher.close();break}}));this.pusher.addEventListener("error",(t=>{this.raiseError("Pusher error",new Error(`${t}`),e,null)}));console.log(this.pusher);await Promise.race([Ns(t),new Promise((e=>{o=e}))])}async callApi(e,t,n,s=true){const o=this.config.url||uo.baseApiUrl;const l=await this.fetch(this.proxy.modifyUrl(new URL(t,o).toString()),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.key}`},body:JSON.stringify(n),signal:e.signal});const i=t.replace(/\/(.*\/)?/," - ");const r=await this.handleJsonResponse(e,l);if(r!==false&&s)this.raiseLogMessage({text:`Sending message (done: ${i})`,data:[r]});return[l,r]}async handleJson(e,t,n){if(e.message!=null)return this.raiseError("Received error message",new Error(`${e.code}: ${e.message}`),t,n);return e}}class fo{config;constructor(e){if(this.constructor===fo)throw new go(this);Object.assign(this,{config:e})}modifyUrl(e){return e}}class po extends fo{}class ho extends fo{modifyUrl(e){return(this.config.url||"https://cors-anywhere.herokuapp.com/")+e}}class mo extends Error{constructor(e){super(`Method ${e} not impleented`)}}class go extends Error{constructor(e){super(`Can not instantiate abstract class ${e.constructor.name}`)}}var yo=n(139);var vo=n(902);var bo=n(151);var xo=n(20);var $o=n(890);var wo=n(53);var ko=n(596);var _o=n(613);var Co=n(542);var So=n(937);var Fo=n(735);var Eo=n(632);const{window:Mo}=V;function Po(e,t,n){const s=e.slice();s[94]=t[n];return s}function To(e,t,n){const s=e.slice();s[97]=t[n];return s}function Oo(e,t,n){const s=e.slice();s[100]=t[n];return s}function Ao(e,t,n){const s=e.slice();s[103]=t[n];s[104]=t;s[105]=n;return s}function Ro(e,t,n){const s=e.slice();s[106]=t[n];s[107]=t;s[108]=n;return s}function jo(e,t,n){const s=e.slice();s[106]=t[n];return s}function Io(e,t,n){const s=e.slice();s[111]=t[n];s[112]=t;s[113]=n;return s}function Lo(e,t,n){const s=e.slice();s[94]=t[n];return s}function No(t){let n;let s=t[94].displayName+"";let o;let l;return{c(){n=re("option");o=fe(s);n.__value=l=t[94].id;n.value=n.__value;$e(n,"class","a")},m(e,t){se(e,n,t);X(n,o)},p:e,d(e){if(e)le(n)}}}function Do(t){return{c:e,m:e,p:e,d:e}}function Uo(e){let t;let n;let s;let o;function l(e,t){if(e[94].id=="openai-text"||e[94].id=="openai-chat"||e[94].id=="chatbotkit"||e[94].id=="anthropic-text"||e[94].id=="anthropic-messages"||e[94].id=="natdev")return Jo;if(e[94].id=="azure-openai-chat")return Vo;if(e[94].id=="steamship-plugin")return qo;if(e[94].id=="scale-spellbook"||e[94].id=="scale-spellbook-fish")return zo;return Ho}let i=l(e,[-1,-1,-1,-1]);let r=i(e);let a=e[94].models.length>0&&Bo(e);let c=e[94].id=="openai-chat"&&Wo(e);let u=(e[94].id=="openai-text"||e[94].id=="openai-chat"||e[94].id=="azure-openai-chat"||e[94].id=="chatbotkit"||e[94].id=="anthropic-text"||e[94].id=="anthropic-messages")&&Go(e);return{c(){r.c();t=de();if(a)a.c();n=de();if(c)c.c();s=de();if(u)u.c();o=pe()},m(e,l){r.m(e,l);se(e,t,l);if(a)a.m(e,l);se(e,n,l);if(c)c.m(e,l);se(e,s,l);if(u)u.m(e,l);se(e,o,l)},p(e,f){if(i===(i=l(e,f))&&r){r.p(e,f)}else{r.d(1);r=i(e);if(r){r.c();r.m(t.parentNode,t)}}if(e[94].models.length>0){if(a){a.p(e,f)}else{a=Bo(e);a.c();a.m(n.parentNode,n)}}else if(a){a.d(1);a=null}if(e[94].id=="openai-chat"){if(c){c.p(e,f)}else{c=Wo(e);c.c();c.m(s.parentNode,s)}}else if(c){c.d(1);c=null}if(e[94].id=="openai-text"||e[94].id=="openai-chat"||e[94].id=="azure-openai-chat"||e[94].id=="chatbotkit"||e[94].id=="anthropic-text"||e[94].id=="anthropic-messages"){if(u){u.p(e,f)}else{u=Go(e);u.c();u.m(o.parentNode,o)}}else if(u){u.d(1);u=null}},d(e){r.d(e);if(e)le(t);if(a)a.d(e);if(e)le(n);if(c)c.d(e);if(e)le(s);if(u)u.d(e);if(e)le(o)}}}function Ho(t){let n;return{c(){n=re("b");n.textContent="Choose endpoint provider";$e(n,"class","a")},m(e,t){se(e,n,t)},p:e,d(e){if(e)le(n)}}}function zo(e){let t;let n;let s;let o;let l;let i;let r;let c;let u;let f;let d;function p(){e[43].call(o,e[112],e[113])}function h(){e[44].call(u,e[112],e[113])}return{c(){t=re("label");n=re("b");n.textContent="Deployment key";s=de();o=re("input");l=de();i=re("label");r=re("b");r.textContent="Deployment URL";c=de();u=re("input");$e(n,"class","a");$e(o,"type","text");$e(o,"placeholder","Deployment key");$e(o,"class","a");$e(t,"class","over a");$e(r,"class","a");$e(u,"type","text");$e(u,"placeholder","Deployment URL");$e(u,"class","a");$e(i,"class","over a")},m(a,m){se(a,t,m);X(t,n);X(t,s);X(t,o);Ge(o,e[111].key);se(a,l,m);se(a,i,m);X(i,r);X(i,c);X(i,u);Ge(u,e[111].url);if(!f){d=[me(o,"input",p),me(u,"input",h)];f=true}},p(t,n){e=t;if(n[0]&2&&o.value!==e[111].key){Ge(o,e[111].key)}if(n[0]&2&&u.value!==e[111].url){Ge(u,e[111].url)}},d(e){if(e)le(t);if(e)le(l);if(e)le(i);f=false;a(d)}}}function qo(e){let t;let n;let s;let o;let l;let i;let r;let c;let u;let f;let d;function p(){e[41].call(o,e[112],e[113])}function h(){e[42].call(u,e[112],e[113])}return{c(){t=re("label");n=re("b");n.textContent="API key";s=de();o=re("input");l=de();i=re("label");r=re("b");r.textContent="Workspace";c=de();u=re("input");$e(n,"class","a");$e(o,"type","text");$e(o,"placeholder","API key");$e(o,"class","a");$e(t,"class","over a");$e(r,"class","a");$e(u,"type","text");$e(u,"placeholder","Workspace");$e(u,"class","a");$e(i,"class","over a")},m(a,m){se(a,t,m);X(t,n);X(t,s);X(t,o);Ge(o,e[111].key);se(a,l,m);se(a,i,m);X(i,r);X(i,c);X(i,u);Ge(u,e[111].workspace);if(!f){d=[me(o,"input",p),me(u,"input",h)];f=true}},p(t,n){e=t;if(n[0]&2&&o.value!==e[111].key){Ge(o,e[111].key)}if(n[0]&2&&u.value!==e[111].workspace){Ge(u,e[111].workspace)}},d(e){if(e)le(t);if(e)le(l);if(e)le(i);f=false;a(d)}}}function Vo(e){let t;let n;let s;let o;let l;let i;let r;let c;let u;let f;let d;let p;let h;let m;let g;let y;let v;let b;let x;let $;let w;function k(){e[37].call(o,e[112],e[113])}function _(){e[38].call(u,e[112],e[113])}function C(){e[39].call(m,e[112],e[113])}function S(){e[40].call(x,e[112],e[113])}return{c(){t=re("label");n=re("b");n.textContent="API key";s=de();o=re("input");l=de();i=re("label");r=re("b");r.textContent="API Version";c=de();u=re("input");f=de();d=re("label");p=re("b");p.textContent="Resource";h=de();m=re("input");g=de();y=re("label");v=re("b");v.textContent="Deployment";b=de();x=re("input");$e(n,"class","a");$e(o,"type","text");$e(o,"placeholder","API key");$e(o,"class","a");$e(t,"class","over a");$e(r,"class","a");$e(u,"type","text");$e(u,"placeholder","API Version");$e(u,"class","a");$e(i,"class","over a");$e(p,"class","a");$e(m,"type","text");$e(m,"placeholder","Resource");$e(m,"class","a");$e(d,"class","over a");$e(v,"class","a");$e(x,"type","text");$e(x,"placeholder","Deployment");$e(x,"class","a");$e(y,"class","over a")},m(a,F){se(a,t,F);X(t,n);X(t,s);X(t,o);Ge(o,e[111].key);se(a,l,F);se(a,i,F);X(i,r);X(i,c);X(i,u);Ge(u,e[111].apiVersion);se(a,f,F);se(a,d,F);X(d,p);X(d,h);X(d,m);Ge(m,e[111].resource);se(a,g,F);se(a,y,F);X(y,v);X(y,b);X(y,x);Ge(x,e[111].deployment);if(!$){w=[me(o,"input",k),me(u,"input",_),me(m,"input",C),me(x,"input",S)];$=true}},p(t,n){e=t;if(n[0]&2&&o.value!==e[111].key){Ge(o,e[111].key)}if(n[0]&2&&u.value!==e[111].apiVersion){Ge(u,e[111].apiVersion)}if(n[0]&2&&m.value!==e[111].resource){Ge(m,e[111].resource)}if(n[0]&2&&x.value!==e[111].deployment){Ge(x,e[111].deployment)}},d(e){if(e)le(t);if(e)le(l);if(e)le(i);if(e)le(f);if(e)le(d);if(e)le(g);if(e)le(y);$=false;a(w)}}}function Jo(e){let t;let n;let s;let o;let l;let i;let r;let c;let u;let f;let d;function p(){e[35].call(o,e[112],e[113])}function h(){e[36].call(u,e[112],e[113])}return{c(){t=re("label");n=re("b");n.textContent="API key";s=de();o=re("input");l=de();i=re("label");r=re("b");r.textContent="Base URL";c=de();u=re("input");$e(n,"class","a");$e(o,"type","text");$e(o,"placeholder","API key");$e(o,"class","a");$e(t,"class","over a");$e(r,"class","a");$e(u,"type","text");$e(u,"placeholder","Base URL");$e(u,"class","a");$e(i,"class","over a")},m(a,m){se(a,t,m);X(t,n);X(t,s);X(t,o);Ge(o,e[111].key);se(a,l,m);se(a,i,m);X(i,r);X(i,c);X(i,u);Ge(u,e[111].url);if(!f){d=[me(o,"input",p),me(u,"input",h)];f=true}},p(t,n){e=t;if(n[0]&2&&o.value!==e[111].key){Ge(o,e[111].key)}if(n[0]&2&&u.value!==e[111].url){Ge(u,e[111].url)}},d(e){if(e)le(t);if(e)le(l);if(e)le(i);f=false;a(d)}}}function Bo(e){let t;let n;let s;let o;let l;let i;let r;function a(){e[45].call(o,e[112],e[113])}return{c(){t=re("label");n=re("b");n.textContent="Model name";s=de();o=re("input");$e(n,"class","a");$e(o,"type","text");$e(o,"placeholder","Model name");$e(o,"list",l=""+(e[94].id+"-models"));$e(o,"class","a");$e(t,"class","over a")},m(l,c){se(l,t,c);X(t,n);X(t,s);X(t,o);Ge(o,e[111].model);if(!i){r=me(o,"input",a);i=true}},p(t,n){e=t;if(n[0]&2&&l!==(l=""+(e[94].id+"-models"))){$e(o,"list",l)}if(n[0]&2&&o.value!==e[111].model){Ge(o,e[111].model)}},d(e){if(e)le(t);i=false;r()}}}function Wo(e){let t;let n;let s;let o;let l;let i;function r(){e[46].call(n,e[112],e[113])}return{c(){t=re("label");n=re("input");s=de();o=re("b");o.textContent="Raw URL";$e(n,"type","checkbox");$e(n,"class","a");$e(o,"class","a");$e(t,"class","side a")},m(a,c){se(a,t,c);X(t,n);n.checked=e[111].rawUrl;X(t,s);X(t,o);if(!l){i=me(n,"change",r);l=true}},p(t,s){e=t;if(s[0]&2){n.checked=e[111].rawUrl}},d(e){if(e)le(t);l=false;i()}}}function Go(e){let t;let n;let s;let o;let l;let i;function r(){e[47].call(n,e[112],e[113])}return{c(){t=re("label");n=re("input");s=de();o=re("b");o.textContent="Stream";$e(n,"type","checkbox");$e(n,"class","a");$e(o,"class","a");$e(t,"class","side a")},m(a,c){se(a,t,c);X(t,n);n.checked=e[111].stream;X(t,s);X(t,o);if(!l){i=me(n,"change",r);l=true}},p(t,s){e=t;if(s[0]&2){n.checked=e[111].stream}},d(e){if(e)le(t);l=false;i()}}}function Yo(t){return{c:e,m:e,p:e,d:e}}function Qo(e){let t;let n;let o;let l;let i;let r;let c;let u;let f;let d;let p;let h;let m;let g;let y;let v;let b;let x;let $;let w;let k;let _;let C;let S;let F;let E;let M;function P(){e[33].call(f,e[112],e[113])}let T=Xs.providers;let O=[];for(let t=0;t<T.length;t+=1){O[t]=No(Lo(e,T,t))}function A(){e[34].call(g,e[112],e[113])}let R={ctx:e,current:null,token:null,hasCatch:false,pending:Yo,then:Uo,catch:Do,value:94};mn(v=Xs.getProvider(e[111].typeId),R);const j=[{icon:So.ek},e[4]];let I={};for(let e=0;e<j.length;e+=1){I=s(I,j[e])}w=new Is({props:I});function L(){return e[48](e[113])}const N=[{icon:Eo.S2},e[4]];let D={};for(let e=0;e<N.length;e+=1){D=s(D,N[e])}C=new Is({props:D});function U(){return e[49](e[113])}F=Pe(e[32][1]);return{c(){t=re("div");n=re("label");o=re("input");i=de();r=re("label");c=re("b");c.textContent="Display name";u=de();f=re("input");d=de();p=re("label");h=re("b");h.textContent="Provider";m=de();g=re("select");for(let e=0;e<O.length;e+=1){O[e].c()}y=de();R.block.c();b=de();x=re("div");$=re("button");Gn(w.$$.fragment);k=de();_=re("button");Gn(C.$$.fragment);$e(o,"type","radio");$e(o,"name","selectedEndpoint");o.__value=l=e[113];o.value=o.__value;$e(o,"title","Set endpoint as current");$e(o,"class","a");$e(n,"class","side a");$e(c,"class","a");$e(f,"type","text");$e(f,"placeholder","Display name");$e(f,"class","a");$e(r,"class","over a");$e(h,"class","a");$e(g,"placeholder","Provider");$e(g,"class","a");if(e[111].typeId===void 0)Gt(A);$e(p,"class","over a");$e($,"type","button");$e($,"title","Share endpoint link");$e($,"class","a");$e(_,"type","button");$e(_,"title","Delete endpoint");$e(_,"class","a");$e(x,"class","buttons a");$e(t,"class","endpoint a");F.p(o)},m(s,l){se(s,t,l);X(t,n);X(n,o);o.checked=o.__value===e[0].selectedEndpointIndex;X(t,i);X(t,r);X(r,c);X(r,u);X(r,f);Ge(f,e[111].name);X(t,d);X(t,p);X(p,h);X(p,m);X(p,g);for(let e=0;e<O.length;e+=1){if(O[e]){O[e].m(g,null)}}Xe(g,e[111].typeId,true);X(t,y);R.block.m(t,R.anchor=null);R.mount=()=>t;R.anchor=b;X(t,b);X(t,x);X(x,$);Qn(w,$,null);X(x,k);X(x,_);Qn(C,_,null);S=true;if(!E){M=[me(o,"change",e[31]),me(f,"input",P),me(g,"change",A),me($,"click",L),me(_,"click",U)];E=true}},p(t,n){e=t;if(n[0]&3){o.checked=o.__value===e[0].selectedEndpointIndex}if(n[0]&2&&f.value!==e[111].name){Ge(f,e[111].name)}if(n&0){T=Xs.providers;let t;for(t=0;t<T.length;t+=1){const s=Lo(e,T,t);if(O[t]){O[t].p(s,n)}else{O[t]=No(s);O[t].c();O[t].m(g,null)}}for(;t<O.length;t+=1){O[t].d(1)}O.length=T.length}if(n[0]&2){Xe(g,e[111].typeId)}R.ctx=e;if(n[0]&2&&v!==(v=Xs.getProvider(e[111].typeId))&&mn(v,R)){}else{gn(R,e,n)}const s=n[0]&16?kn(j,[n&0&&{icon:So.ek},n[0]&16&&_n(e[4])]):{};w.$set(s);const l=n[0]&16?kn(N,[n&0&&{icon:Eo.S2},n[0]&16&&_n(e[4])]):{};C.$set(l)},i(e){if(S)return;cn(w.$$.fragment,e);cn(C.$$.fragment,e);S=true},o(e){un(w.$$.fragment,e);un(C.$$.fragment,e);S=false},d(e){if(e)le(t);ie(O,e);R.block.d();R.token=null;R=null;Xn(w);Xn(C);F.r();E=false;a(M)}}}function Xo(t){let n;let s=t[106].displayName+"";let o;let l;return{c(){n=re("option");o=fe(s);n.__value=l=t[106].id;n.value=n.__value;$e(n,"class","a")},m(e,t){se(e,n,t);X(n,o)},p:e,d(e){if(e)le(n)}}}function Ko(t){return{c:e,m:e,p:e,d:e}}function Zo(e){let t;function n(e,t){if(e[94].id=="cors-anywhere")return tl;if(e[94].id!="")return el}let s=n(e,[-1,-1,-1,-1]);let o=s&&s(e);return{c(){if(o)o.c();t=pe()},m(e,n){if(o)o.m(e,n);se(e,t,n)},p(e,l){if(s===(s=n(e,l))&&o){o.p(e,l)}else{if(o)o.d(1);o=s&&s(e);if(o){o.c();o.m(t.parentNode,t)}}},d(e){if(o){o.d(e)}if(e)le(t)}}}function el(t){let n;return{c(){n=re("b");n.textContent="Choose proxy provider";$e(n,"class","a")},m(e,t){se(e,n,t)},p:e,d(e){if(e)le(n)}}}function tl(e){let t;let n;let s;let o;let l;let i;function r(){e[53].call(o,e[107],e[108])}return{c(){t=re("label");n=re("b");n.textContent="Proxy URL";s=de();o=re("input");$e(n,"class","a");$e(o,"type","text");$e(o,"placeholder","Proxy URL");$e(o,"class","a");$e(t,"class","over a")},m(a,c){se(a,t,c);X(t,n);X(t,s);X(t,o);Ge(o,e[106].url);if(!l){i=me(o,"input",r);l=true}},p(t,n){e=t;if(n[0]&4&&o.value!==e[106].url){Ge(o,e[106].url)}},d(e){if(e)le(t);l=false;i()}}}function nl(t){return{c:e,m:e,p:e,d:e}}function sl(e){let t;let n;let o;let l;let i;let r;let c;let u;let f;let d;let p;let h;let m;let g;let y;let v;let b;let x;let $;let w;let k;let _;let C;function S(){e[51].call(u,e[107],e[108])}let F=Xs.proxies;let E=[];for(let t=0;t<F.length;t+=1){E[t]=Xo(jo(e,F,t))}function M(){e[52].call(m,e[107],e[108])}let P={ctx:e,current:null,token:null,hasCatch:false,pending:nl,then:Zo,catch:Ko,value:94};mn(y=Xs.getProxy(e[106].typeId),P);const T=[{icon:Eo.S2},e[4]];let O={};for(let e=0;e<T.length;e+=1){O=s(O,T[e])}$=new Is({props:O});function A(){return e[54](e[108])}k=Pe(e[32][0]);return{c(){t=re("div");n=re("input");l=de();i=re("label");r=re("b");r.textContent="Display name";c=de();u=re("input");f=de();d=re("label");p=re("b");p.textContent="Provider";h=de();m=re("select");for(let e=0;e<E.length;e+=1){E[e].c()}g=de();P.block.c();v=de();b=re("div");x=re("button");Gn($.$$.fragment);$e(n,"type","radio");$e(n,"name","selectedProxy");n.__value=o=e[108];n.value=n.__value;$e(n,"title","Set proxy as current");$e(n,"class","a");$e(r,"class","a");$e(u,"type","text");$e(u,"placeholder","Display name");$e(u,"class","a");$e(i,"class","over a");$e(p,"class","a");$e(m,"placeholder","Provider");$e(m,"class","a");if(e[106].typeId===void 0)Gt(M);$e(d,"class","over a");$e(x,"type","button");$e(x,"title","Delete proxy");$e(x,"class","a");$e(b,"class","buttons a");$e(t,"class","endpoint a");k.p(n)},m(s,o){se(s,t,o);X(t,n);n.checked=n.__value===e[0].selectedProxyIndex;X(t,l);X(t,i);X(i,r);X(i,c);X(i,u);Ge(u,e[106].name);X(t,f);X(t,d);X(d,p);X(d,h);X(d,m);for(let e=0;e<E.length;e+=1){if(E[e]){E[e].m(m,null)}}Xe(m,e[106].typeId,true);X(t,g);P.block.m(t,P.anchor=null);P.mount=()=>t;P.anchor=v;X(t,v);X(t,b);X(b,x);Qn($,x,null);w=true;if(!_){C=[me(n,"change",e[50]),me(u,"input",S),me(m,"change",M),me(x,"click",A)];_=true}},p(t,s){e=t;if(s[0]&5){n.checked=n.__value===e[0].selectedProxyIndex}if(s[0]&4&&u.value!==e[106].name){Ge(u,e[106].name)}if(s&0){F=Xs.proxies;let t;for(t=0;t<F.length;t+=1){const n=jo(e,F,t);if(E[t]){E[t].p(n,s)}else{E[t]=Xo(n);E[t].c();E[t].m(m,null)}}for(;t<E.length;t+=1){E[t].d(1)}E.length=F.length}if(s[0]&4){Xe(m,e[106].typeId)}P.ctx=e;if(s[0]&4&&y!==(y=Xs.getProxy(e[106].typeId))&&mn(y,P)){}else{gn(P,e,s)}const o=s[0]&16?kn(T,[s&0&&{icon:Eo.S2},s[0]&16&&_n(e[4])]):{};$.$set(o)},i(e){if(w)return;cn($.$$.fragment,e);w=true},o(e){un($.$$.fragment,e);w=false},d(e){if(e)le(t);ie(E,e);P.block.d();P.token=null;P=null;Xn($);k.r();_=false;a(C)}}}function ol(e){let t;let n;let o;let l;let i;let r;let c;let u;let f;let d;let p;let h;let m;let g;let y;let v;let b;let x;let $;let w;let k;let _;function C(){e[68].call(n,e[104],e[105])}function S(){e[69].call(l,e[104],e[105])}const F=[{icon:vo.IN},e[4]];let E={};for(let e=0;e<F.length;e+=1){E=s(E,F[e])}d=new Is({props:E});function M(){return e[70](e[105])}const P=[{icon:yo.B0},e[4]];let T={};for(let e=0;e<P.length;e+=1){T=s(T,P[e])}g=new Is({props:T});function A(){return e[71](e[105])}const R=[{icon:Eo.S2},e[4]];let j={};for(let e=0;e<R.length;e+=1){j=s(j,R[e])}x=new Is({props:j});function I(){return e[72](e[105])}return{c(){t=re("div");n=re("input");o=de();l=re("textarea");c=de();u=re("div");f=re("button");Gn(d.$$.fragment);h=de();m=re("button");Gn(g.$$.fragment);v=de();b=re("button");Gn(x.$$.fragment);$=de();$e(n,"type","text");$e(n,"list","messageRole");$e(n,"placeholder","Role");$e(n,"class","a");$e(l,"placeholder",i="Message #"+e[103].id+" text");$e(l,"autocomplete","false");$e(l,"class","a");f.disabled=p=e[105]<=0;$e(f,"title","Move message up");$e(f,"class","a");$e(m,"type","button");m.disabled=y=e[105]>=e[3].length-1;$e(m,"title","Move message down");$e(m,"class","a");$e(b,"type","button");$e(b,"title","Delete message");$e(b,"class","a");$e(u,"class","buttons a");$e(t,"class","message a")},m(s,i){se(s,t,i);X(t,n);Ge(n,e[103].role);X(t,o);X(t,l);Ge(l,e[103].text);X(t,c);X(t,u);X(u,f);Qn(d,f,null);X(u,h);X(u,m);Qn(g,m,null);X(u,v);X(u,b);Qn(x,b,null);X(t,$);w=true;if(!k){_=[me(n,"input",C),me(l,"input",S),O(r=ml.call(null,l)),me(f,"click",M),me(m,"click",A),me(b,"click",I)];k=true}},p(t,s){e=t;if(s[0]&8&&n.value!==e[103].role){Ge(n,e[103].role)}if(!w||s[0]&8&&i!==(i="Message #"+e[103].id+" text")){$e(l,"placeholder",i)}if(s[0]&8){Ge(l,e[103].text)}const o=s[0]&16?kn(F,[s&0&&{icon:vo.IN},s[0]&16&&_n(e[4])]):{};d.$set(o);const r=s[0]&16?kn(P,[s&0&&{icon:yo.B0},s[0]&16&&_n(e[4])]):{};g.$set(r);if(!w||s[0]&8&&y!==(y=e[105]>=e[3].length-1)){m.disabled=y}const a=s[0]&16?kn(R,[s&0&&{icon:Eo.S2},s[0]&16&&_n(e[4])]):{};x.$set(a)},i(e){if(w)return;cn(d.$$.fragment,e);cn(g.$$.fragment,e);cn(x.$$.fragment,e);w=true},o(e){un(d.$$.fragment,e);un(g.$$.fragment,e);un(x.$$.fragment,e);w=false},d(e){if(e)le(t);Xn(d);Xn(g);Xn(x);k=false;a(_)}}}function ll(e){let t;let n=e[100]+"";let s;let o;return{c(){t=re("option");s=fe(n);t.__value=o=e[100];t.value=t.__value;$e(t,"class","a")},m(e,n){se(e,t,n);X(t,s)},p(e,l){if(l[0]&512&&n!==(n=e[100]+""))Je(s,n);if(l[0]&512&&o!==(o=e[100])){t.__value=o;t.value=t.__value}},d(e){if(e)le(t)}}}function il(t){let n;let s=t[97]+"";let o;let l;return{c(){n=re("option");o=fe(s);n.__value=l=t[97];n.value=n.__value;$e(n,"class","a")},m(e,t){se(e,n,t);X(n,o)},p:e,d(e){if(e)le(n)}}}function rl(e){let t;let n;let s=e[94].models;let o=[];for(let t=0;t<s.length;t+=1){o[t]=il(To(e,s,t))}return{c(){t=re("datalist");for(let e=0;e<o.length;e+=1){o[e].c()}$e(t,"id",n=""+(e[94].id+"-models"));$e(t,"class","a")},m(e,n){se(e,t,n);for(let e=0;e<o.length;e+=1){if(o[e]){o[e].m(t,null)}}},p(e,n){if(n&0){s=e[94].models;let l;for(l=0;l<s.length;l+=1){const i=To(e,s,l);if(o[l]){o[l].p(i,n)}else{o[l]=il(i);o[l].c();o[l].m(t,null)}}for(;l<o.length;l+=1){o[l].d(1)}o.length=s.length}},d(e){if(e)le(t);ie(o,e)}}}function al(e){let t;let n;let o;let l;let i;let r;let c;let u;let f;let d;let p;let h;let m;let g;let y;let v;let b;let x;let $;let w;let k;let _;let C;let S;let F;let E;let M;let P;let T;let A;let R;let j;let I;let L;let N;let D;let U;let H;let z;let q;let V;let J;let B;let W;let G;let Y;let Q;let K;let Z;let ee;let te;let ne;let oe;let ae;let ce;let ue;let pe;let he;let ge;let ye;let ve;let be;let xe;let we;let ke;let _e;let Ce;let Se;let Fe;let Ee;let Me;let Pe;let Te;let Oe;let Ae;let Re;let je;let Ie;let Le;let Ne;let De;let Ue;let He;let ze;let qe;let Ve;let Be;let We;let Ye;let Ke;let Ze;let et;let tt;let nt;let st;let ot;let lt;let it;let rt;let at;let ct;let ut;let ft;let dt;let pt;let ht;let mt;let gt;let yt;let vt;let bt;let xt;let $t;let wt;let kt;let _t;let Ct;let St;let Ft;let Et;let Mt;let Pt;let Tt;let Ot;let At;let Rt;let jt;let It;let Lt;let Nt;let Dt;let Ut;let Ht;let zt;let qt;let Vt;let Jt;let Bt;let Wt;let Yt;let Qt;let Xt;let Kt;let Zt;let en;let tn;let nn;let sn;let on;let ln;let fn;let dn;let pn;let hn;let mn;let gn;let yn;let vn;let bn;let xn;let $n;let wn;let Cn;let Sn;let Fn;let En;let Mn;let Pn;let Tn;let On;let An;let Rn;let jn;let In;let Ln;let Nn;let Dn;let Un;let Hn;let zn;let qn;let Vn;const Jn=[{icon:_o.TS},e[4]];let Bn={};for(let e=0;e<Jn.length;e+=1){Bn=s(Bn,Jn[e])}f=new Is({props:Bn});let Wn=e[1];let Yn=[];for(let t=0;t<Wn.length;t+=1){Yn[t]=Qo(Io(e,Wn,t))}const Kn=e=>un(Yn[e],1,1,(()=>{Yn[e]=null}));const Zn=[{icon:_o.TS},e[4]];let es={};for(let e=0;e<Zn.length;e+=1){es=s(es,Zn[e])}y=new Is({props:es});let ts=e[2];let ns=[];for(let t=0;t<ts.length;t+=1){ns[t]=sl(Ro(e,ts,t))}const ss=e=>un(ns[e],1,1,(()=>{ns[e]=null}));const os=[{icon:wo.Uj},e[10]];let ls={};for(let e=0;e<os.length;e+=1){ls=s(ls,os[e])}Pe=new Is({props:ls});const is=[{icon:wo.Uj},e[10]];let rs={};for(let e=0;e<is.length;e+=1){rs=s(rs,is[e])}Re=new Is({props:rs});const as=[{icon:$o.jk},e[10]];let cs={};for(let e=0;e<as.length;e+=1){cs=s(cs,as[e])}Ne=new Is({props:cs});const us=[{icon:wo.Uj},e[10]];let fs={};for(let e=0;e<us.length;e+=1){fs=s(fs,us[e])}Be=new Is({props:fs});const ds=[{icon:wo.Uj},e[10]];let ps={};for(let e=0;e<ds.length;e+=1){ps=s(ps,ds[e])}Ze=new Is({props:ps});const hs=[{icon:$o.jk},e[10]];let ms={};for(let e=0;e<hs.length;e+=1){ms=s(ms,hs[e])}st=new Is({props:ms});let gs=e[3];let ys=[];for(let t=0;t<gs.length;t+=1){ys[t]=ol(Ao(e,gs,t))}const vs=e=>un(ys[e],1,1,(()=>{ys[e]=null}));const bs=[{icon:ko.is},e[4]];let xs={};for(let e=0;e<bs.length;e+=1){xs=s(xs,bs[e])}fn=new Is({props:xs});const $s=[{icon:Co.$c},e[4]];let ws={};for(let e=0;e<$s.length;e+=1){ws=s(ws,$s[e])}hn=new Is({props:ws});const ks=[{icon:Fo.eV},e[4]];let _s={};for(let e=0;e<ks.length;e+=1){_s=s(_s,ks[e])}vn=new Is({props:_s});const Cs=[{icon:bo.Df},e[4]];let Ss={};for(let e=0;e<Cs.length;e+=1){Ss=s(Ss,Cs[e])}wn=new Is({props:Ss});const Fs=[{icon:_o.TS},e[4]];let Es={};for(let e=0;e<Fs.length;e+=1){Es=s(Es,Fs[e])}En=new Is({props:Es});const Ms=[{icon:xo.jP},e[4],{flip:"vertical"}];let Ps={};for(let e=0;e<Ms.length;e+=1){Ps=s(Ps,Ms[e])}Tn=new Is({props:Ps});let Ts=Xs.getProvider(e[9]?.typeId).messageRoles;let Os=[];for(let t=0;t<Ts.length;t+=1){Os[t]=ll(Oo(e,Ts,t))}let As=Xs.providers.filter(gl);let Rs=[];for(let t=0;t<As.length;t+=1){Rs[t]=rl(Po(e,As,t))}return{c(){t=re("div");n=re("details");o=re("summary");o.textContent="Options";l=de();i=re("div");r=re("h3");c=fe("API Endpoints ");u=re("button");Gn(f.$$.fragment);d=de();for(let e=0;e<Yn.length;e+=1){Yn[e].c()}p=de();h=re("h3");m=fe("Proxies ");g=re("button");Gn(y.$$.fragment);v=de();for(let e=0;e<ns.length;e+=1){ns[e].c()}b=de();x=re("h3");x.textContent="Model options";$=de();w=re("div");k=re("div");_=re("label");_.textContent="Max tokens";C=de();S=re("input");F=de();E=re("div");M=re("label");M.textContent="Temperature";P=de();T=re("input");A=de();R=re("div");j=re("label");j.textContent="Frequency penalty";I=de();L=re("input");N=de();D=re("div");U=re("label");U.textContent="Presence penalty";H=de();z=re("input");q=de();V=re("h3");V.textContent="Behavior";J=de();B=re("div");W=re("div");G=re("label");G.textContent="UI Density";Y=de();Q=re("select");K=re("option");K.textContent="Compact";ee=re("option");ee.textContent="Comfortable";ne=re("option");ne.textContent="Accessible";ae=de();ce=re("div");ue=re("label");ue.textContent="Multi-message count";pe=de();he=re("input");ge=de();ye=re("div");ve=re("label");ve.textContent="Retry message count";be=de();xe=re("input");we=de();ke=re("h3");ke.textContent="Backups";_e=de();Ce=re("div");Se=re("div");Fe=re("header");Fe.textContent="Endpoints";Ee=de();Me=re("button");Gn(Pe.$$.fragment);Te=fe("Load");Oe=de();Ae=re("button");Gn(Re.$$.fragment);je=fe("Append");Ie=de();Le=re("button");Gn(Ne.$$.fragment);De=fe("Save");Ue=de();He=re("div");ze=re("header");ze.textContent="Messages";qe=de();Ve=re("button");Gn(Be.$$.fragment);We=fe("Load");Ye=de();Ke=re("button");Gn(Ze.$$.fragment);et=fe("Append");tt=de();nt=re("button");Gn(st.$$.fragment);ot=fe("Save");lt=de();it=re("details");rt=re("summary");rt.textContent="Instructions";at=de();ct=re("h3");ct.textContent="Scale API keys";ut=de();ft=re("p");ft.textContent="You can use one of the public keys or provide your own. Having your own keys gives more flexibility and better privacy. ";dt=re("ol");pt=re("li");pt.innerHTML=`Register on <a href="https://spellbook.scale.com/" class="a">Scale Spellbook</a>. `;ht=re("li");ht.textContent='Create an "app". ';mt=re("li");gt=fe('Add a "prompt" with ');yt=re("code");yt.textContent="model=GPT-4";vt=fe(", ");bt=re("code");bt.textContent="max_tokens=512";xt=fe(", ");$t=re("code");$t.textContent="temperature=1";wt=fe(", ");kt=re("code");kt.textContent=`user_template=${"{{"}input${"}}"}`;_t=fe(". ");Ct=re("ul");St=re("li");St.textContent="Max token limit drastically (non-linearly) affects how fast the website responds. You can try lowering it, especially if you plan to use it for chat, but forget about going above 1024 tokens. ";Ft=re("li");Ft.textContent="Temperature affects how wild the generations are, where 0.0 generates consistent responses and 2.0 is completely nuts. Default value in OpenAI interface is 0.7. Recommended values are 0.4–1.0. ";Et=re("li");Mt=fe("Adjust the template if you plan to use the app for chat or other purposes. GPT-4 model will see the text around ");Pt=re("code");Pt.textContent=`${"{{"}input${"}}"}`;Tt=fe(", but the chat app will not.");Ot=de();At=re("li");At.textContent='Add a "deployment" with this "prompt". ';Rt=re("li");Rt.textContent="Add a new Scale API endpoint in the chat's options and copy API key and URL from Scale website.";jt=de();It=re("h3");It.textContent="Proxy";Lt=de();Nt=re("p");Nt.textContent="The method of bypassing CORS restrictions for the chat script. One is enough. ";Dt=re("ul");Dt.innerHTML=`<li class="a"><b class="a">Direct</b>: <ul class="a"><li class="a"><b class="a">User script</b> <i class="a">(desktop/mobile)</i>: Install <a href="https://athari.github.io/ScaleChat/userscripts/bypasscors.user.js" class="a">Bypass CORS</a> userscript. Install <a href="https://www.tampermonkey.net/" class="a">TamperMonkey</a> extension or any other user script manager first, in case you don&#39;t an option to install the script when you click the link. This method enables bypassing CORS only for specific user script and domain, however running locally is impossible and running on another server requires editing the user script. </li><li class="a"><b class="a">Extension</b> <i class="a">(desktop)</i>: Install <a href="https://microsoftedge.microsoft.com/addons/detail/cors-unblock/hkjklmhkbkdhlgnnfbbcihcajofmjgbh" class="a">CORS Unblock</a> extension. Click on the extension&#39;s button to enable it. This method allows to choose what websites bypass CORS and when. It allows running the script locally or on any server. </li><li class="a"><b class="a">Command Line</b> <i class="a">(desktop)</i>: Close all Chrome windows, then run it with <b class="a"><code class="a">chrome --no-web-security</code></b> command line. This method applies to all websites until you restart Chrome.</li></ul>  </li><li class="a"><b class="a">CORS demo</b> <i class="a">(desktop/mobile)</i>: Go to <a href="https://cors-anywhere.herokuapp.com/corsdemo" class="a">CORS Anywhere Demo</a> page and click on the button to enable it. You may be asked to solve CAPTCHA. Note that CORS Demo can timeout way earlier than actual API. This method allows all websites using that specific website to bypass CORS. </li><li class="a"><b class="a">Web proxy</b> <i class="a">(desktop/mobile)</i>: Use <a href="https://fishtailprotocol.com/projects/betterGPT4/" class="a">Web proxy by Feril</a>. No configuration required. This method works exclusively with Scale API.</li>`;Ut=de();Ht=re("h3");Ht.textContent="Privacy";zt=de();qt=re("p");qt.textContent="Privacy does not exist. ";Vt=re("ul");Vt.innerHTML=`<li class="a">All your prompts and responses are visible to the owner of the Scale API key. </li><li class="a">All your prompts, responses and keys are visible to the company that owns Scale API. </li><li class="a">All your prompts, responses and keys are visible to the owner of CORS and web proxies.</li>`;Jt=de();Bt=re("p");Bt.textContent="Recommendations for maximum privacy: ";Wt=re("ul");Wt.innerHTML=`<li class="a">Do not use public Scale API keys. <lI class="a">Do not use proxies owned by people you don&#39;t trust. <li class="a">Do not send any information which could be used to identify you. </li><li class="a">Do register on Scale with fake data, including fake email. </li><li class="a">Do live in countries where FBI can&#39;t reach you and put in jail for having bad thoughts.</li></lI></li>`;Yt=de();Qt=re("div");for(let e=0;e<ys.length;e+=1){ys[e].c()}Xt=de();Kt=re("div");Zt=re("input");en=de();tn=re("textarea");sn=de();on=re("div");ln=re("button");Gn(fn.$$.fragment);dn=de();pn=re("button");Gn(hn.$$.fragment);gn=de();yn=re("button");Gn(vn.$$.fragment);xn=de();$n=re("button");Gn(wn.$$.fragment);Sn=de();Fn=re("button");Gn(En.$$.fragment);Mn=de();Pn=re("button");Gn(Tn.$$.fragment);On=de();An=re("div");Rn=re("p");jn=fe(e[8]);In=de();Ln=re("p");Nn=fe(e[7]);Dn=de();Un=re("datalist");for(let e=0;e<Os.length;e+=1){Os[e].c()}Hn=de();for(let e=0;e<Rs.length;e+=1){Rs[e].c()}$e(o,"class","a");$e(u,"title","Add endpoint");$e(u,"class","a");$e(r,"class","a");$e(g,"title","Add proxy");$e(g,"class","a");$e(h,"class","a");$e(x,"class","a");$e(_,"for","maxTokens");$e(_,"class","a");$e(S,"type","text");$e(S,"id","maxTokens");$e(S,"class","a");$e(k,"class","option a");$e(M,"for","temperature");$e(M,"class","a");$e(T,"type","text");$e(T,"id","temperature");$e(T,"class","a");$e(E,"class","option a");$e(j,"for","frequencyPenalty");$e(j,"class","a");$e(L,"type","text");$e(L,"id","frequencyPenalty");$e(L,"class","a");$e(R,"class","option a");$e(U,"for","presencePenalty");$e(U,"class","a");$e(z,"type","text");$e(z,"id","presencePenalty");$e(z,"class","a");$e(D,"class","option a");$e(w,"class","options a");$e(V,"class","a");$e(G,"for","density");$e(G,"class","a");K.__value=Z="compact";K.value=K.__value;$e(K,"class","a");ee.__value=te="mobile";ee.value=ee.__value;$e(ee,"class","a");ne.__value=oe="access";ne.value=ne.__value;$e(ne,"class","a");$e(Q,"id","density");$e(Q,"class","a");if(e[0].density===void 0)Gt((()=>e[59].call(Q)));$e(W,"class","option a");$e(ue,"for","multiMessageCount");$e(ue,"class","a");$e(he,"type","text");$e(he,"id","multiMessageCount");$e(he,"class","a");$e(ce,"class","option a");$e(ve,"for","retryMessageCount");$e(ve,"class","a");$e(xe,"type","text");$e(xe,"id","retryMessageCount");$e(xe,"class","a");$e(ye,"class","option a");$e(B,"class","options a");$e(ke,"class","a");$e(Fe,"class","a");$e(Me,"type","button");$e(Me,"class","a");$e(Ae,"type","button");$e(Ae,"class","a");$e(Le,"type","button");$e(Le,"class","a");$e(Se,"class","option-long a");$e(ze,"class","a");$e(Ve,"type","button");$e(Ve,"class","a");$e(Ke,"type","button");$e(Ke,"class","a");$e(nt,"type","button");$e(nt,"class","a");$e(He,"class","option-long a");$e(Ce,"class","options a");$e(i,"class","endpoints a");$e(rt,"class","a");$e(ct,"class","a");$e(ft,"class","a");$e(pt,"class","a");$e(ht,"class","a");$e(yt,"class","a");$e(bt,"class","a");$e($t,"class","a");$e(kt,"class","a");$e(St,"class","a");$e(Ft,"class","a");$e(Pt,"class","a");$e(Et,"class","a");$e(Ct,"class","a");$e(mt,"class","a");$e(At,"class","a");$e(Rt,"class","a");$e(dt,"class","a");$e(It,"class","a");$e(Nt,"class","a");$e(Dt,"class","a");$e(Ht,"class","a");$e(qt,"class","a");$e(Vt,"class","a");$e(Bt,"class","a");$e(Wt,"class","a");$e(it,"class","a");n.open=true;$e(n,"class","a");$e(Qt,"class","messages a");$e(Zt,"type","text");Zt.disabled=e[6];$e(Zt,"list","messageRole");$e(Zt,"placeholder","New message role");$e(Zt,"class","a");tn.disabled=e[6];$e(tn,"placeholder","New message text");$e(tn,"autocomplete","false");$e(tn,"class","a");$e(ln,"type","button");ln.disabled=e[6];$e(ln,"title","Send message");$e(ln,"class","a");$e(pn,"type","button");pn.disabled=e[6];$e(pn,"title",mn="Send message and receive "+e[0].multiMessageCount+" messages");$e(pn,"class","a");$e(yn,"type","button");yn.disabled=e[6];$e(yn,"title",bn="Try sending message "+e[0].retryMessageCount+" times");$e(yn,"class","a");$e($n,"type","button");$n.disabled=Cn=!e[6];$e($n,"title","Cancel sending");$e($n,"class","a");$e(Fn,"type","button");Fn.disabled=e[6];$e(Fn,"title","Add message without sending");$e(Fn,"class","a");$e(Pn,"type","button");$e(Pn,"title","Copy all messages to clipboard");$e(Pn,"class","a");$e(on,"class","buttons a");$e(Kt,"class","message new-message a");$e(Rn,"class","message a");$e(Ln,"class","time a");Qe(Ln,"display",e[6]?"block":"none");$e(An,"class","status a");$e(Un,"id","messageRole");$e(Un,"class","a");$e(t,"class","app a")},m(s,a){se(s,t,a);X(t,n);X(n,o);X(n,l);X(n,i);X(i,r);X(r,c);X(r,u);Qn(f,u,null);X(i,d);for(let e=0;e<Yn.length;e+=1){if(Yn[e]){Yn[e].m(i,null)}}X(i,p);X(i,h);X(h,m);X(h,g);Qn(y,g,null);X(i,v);for(let e=0;e<ns.length;e+=1){if(ns[e]){ns[e].m(i,null)}}X(i,b);X(i,x);X(i,$);X(i,w);X(w,k);X(k,_);X(k,C);X(k,S);Ge(S,e[0].maxTokens);X(w,F);X(w,E);X(E,M);X(E,P);X(E,T);Ge(T,e[0].temperature);X(w,A);X(w,R);X(R,j);X(R,I);X(R,L);Ge(L,e[0].frequencyPenalty);X(w,N);X(w,D);X(D,U);X(D,H);X(D,z);Ge(z,e[0].presencePenalty);X(i,q);X(i,V);X(i,J);X(i,B);X(B,W);X(W,G);X(W,Y);X(W,Q);X(Q,K);X(Q,ee);X(Q,ne);Xe(Q,e[0].density,true);X(B,ae);X(B,ce);X(ce,ue);X(ce,pe);X(ce,he);Ge(he,e[0].multiMessageCount);X(B,ge);X(B,ye);X(ye,ve);X(ye,be);X(ye,xe);Ge(xe,e[0].retryMessageCount);X(i,we);X(i,ke);X(i,_e);X(i,Ce);X(Ce,Se);X(Se,Fe);X(Se,Ee);X(Se,Me);Qn(Pe,Me,null);X(Me,Te);X(Se,Oe);X(Se,Ae);Qn(Re,Ae,null);X(Ae,je);X(Se,Ie);X(Se,Le);Qn(Ne,Le,null);X(Le,De);X(Ce,Ue);X(Ce,He);X(He,ze);X(He,qe);X(He,Ve);Qn(Be,Ve,null);X(Ve,We);X(He,Ye);X(He,Ke);Qn(Ze,Ke,null);X(Ke,et);X(He,tt);X(He,nt);Qn(st,nt,null);X(nt,ot);X(n,lt);X(n,it);X(it,rt);X(it,at);X(it,ct);X(it,ut);X(it,ft);X(it,dt);X(dt,pt);X(dt,ht);X(dt,mt);X(mt,gt);X(mt,yt);X(mt,vt);X(mt,bt);X(mt,xt);X(mt,$t);X(mt,wt);X(mt,kt);X(mt,_t);X(mt,Ct);X(Ct,St);X(Ct,Ft);X(Ct,Et);X(Et,Mt);X(Et,Pt);X(Et,Tt);X(mt,Ot);X(dt,At);X(dt,Rt);X(it,jt);X(it,It);X(it,Lt);X(it,Nt);X(it,Dt);X(it,Ut);X(it,Ht);X(it,zt);X(it,qt);X(it,Vt);X(it,Jt);X(it,Bt);X(it,Wt);X(t,Yt);X(t,Qt);for(let e=0;e<ys.length;e+=1){if(ys[e]){ys[e].m(Qt,null)}}X(t,Xt);X(t,Kt);X(Kt,Zt);Ge(Zt,e[5].role);X(Kt,en);X(Kt,tn);Ge(tn,e[5].text);X(Kt,sn);X(Kt,on);X(on,ln);Qn(fn,ln,null);X(on,dn);X(on,pn);Qn(hn,pn,null);X(on,gn);X(on,yn);Qn(vn,yn,null);X(on,xn);X(on,$n);Qn(wn,$n,null);X(on,Sn);X(on,Fn);Qn(En,Fn,null);X(on,Mn);X(on,Pn);Qn(Tn,Pn,null);X(t,On);X(t,An);X(An,Rn);X(Rn,jn);X(An,In);X(An,Ln);X(Ln,Nn);X(t,Dn);X(t,Un);for(let e=0;e<Os.length;e+=1){if(Os[e]){Os[e].m(Un,null)}}X(t,Hn);for(let e=0;e<Rs.length;e+=1){if(Rs[e]){Rs[e].m(t,null)}}zn=true;if(!qn){Vn=[me(Mo,"resize",hl),me(u,"click",e[23]),me(g,"click",e[26]),me(S,"input",e[55]),me(T,"input",e[56]),me(L,"input",e[57]),me(z,"input",e[58]),me(Q,"change",e[59]),me(he,"input",e[60]),me(xe,"input",e[61]),me(Me,"click",e[62]),me(Ae,"click",e[63]),me(Le,"click",e[64]),me(Ve,"click",e[65]),me(Ke,"click",e[66]),me(nt,"click",e[67]),me(Zt,"input",e[73]),me(tn,"input",e[74]),O(nn=ml.call(null,tn)),me(ln,"click",e[75]),me(pn,"click",e[76]),me(yn,"click",e[77]),me($n,"click",e[18]),me(Fn,"click",e[78]),me(Pn,"click",e[22])];qn=true}},p(e,n){const s=n[0]&16?kn(Jn,[n&0&&{icon:_o.TS},n[0]&16&&_n(e[4])]):{};f.$set(s);if(n[0]&50331667){Wn=e[1];let t;for(t=0;t<Wn.length;t+=1){const s=Io(e,Wn,t);if(Yn[t]){Yn[t].p(s,n);cn(Yn[t],1)}else{Yn[t]=Qo(s);Yn[t].c();cn(Yn[t],1);Yn[t].m(i,p)}}rn();for(t=Wn.length;t<Yn.length;t+=1){Kn(t)}an()}const o=n[0]&16?kn(Zn,[n&0&&{icon:_o.TS},n[0]&16&&_n(e[4])]):{};y.$set(o);if(n[0]&134217749){ts=e[2];let t;for(t=0;t<ts.length;t+=1){const s=Ro(e,ts,t);if(ns[t]){ns[t].p(s,n);cn(ns[t],1)}else{ns[t]=sl(s);ns[t].c();cn(ns[t],1);ns[t].m(i,b)}}rn();for(t=ts.length;t<ns.length;t+=1){ss(t)}an()}if(n[0]&1&&S.value!==e[0].maxTokens){Ge(S,e[0].maxTokens)}if(n[0]&1&&T.value!==e[0].temperature){Ge(T,e[0].temperature)}if(n[0]&1&&L.value!==e[0].frequencyPenalty){Ge(L,e[0].frequencyPenalty)}if(n[0]&1&&z.value!==e[0].presencePenalty){Ge(z,e[0].presencePenalty)}if(n[0]&1){Xe(Q,e[0].density)}if(n[0]&1&&he.value!==e[0].multiMessageCount){Ge(he,e[0].multiMessageCount)}if(n[0]&1&&xe.value!==e[0].retryMessageCount){Ge(xe,e[0].retryMessageCount)}const l=n[0]&1024?kn(os,[n&0&&{icon:wo.Uj},n[0]&1024&&_n(e[10])]):{};Pe.$set(l);const r=n[0]&1024?kn(is,[n&0&&{icon:wo.Uj},n[0]&1024&&_n(e[10])]):{};Re.$set(r);const a=n[0]&1024?kn(as,[n&0&&{icon:$o.jk},n[0]&1024&&_n(e[10])]):{};Ne.$set(a);const c=n[0]&1024?kn(us,[n&0&&{icon:wo.Uj},n[0]&1024&&_n(e[10])]):{};Be.$set(c);const u=n[0]&1024?kn(ds,[n&0&&{icon:wo.Uj},n[0]&1024&&_n(e[10])]):{};Ze.$set(u);const d=n[0]&1024?kn(hs,[n&0&&{icon:$o.jk},n[0]&1024&&_n(e[10])]):{};st.$set(d);if(n[0]&3145752){gs=e[3];let t;for(t=0;t<gs.length;t+=1){const s=Ao(e,gs,t);if(ys[t]){ys[t].p(s,n);cn(ys[t],1)}else{ys[t]=ol(s);ys[t].c();cn(ys[t],1);ys[t].m(Qt,null)}}rn();for(t=gs.length;t<ys.length;t+=1){vs(t)}an()}if(!zn||n[0]&64){Zt.disabled=e[6]}if(n[0]&32&&Zt.value!==e[5].role){Ge(Zt,e[5].role)}if(!zn||n[0]&64){tn.disabled=e[6]}if(n[0]&32){Ge(tn,e[5].text)}const h=n[0]&16?kn(bs,[n&0&&{icon:ko.is},n[0]&16&&_n(e[4])]):{};fn.$set(h);if(!zn||n[0]&64){ln.disabled=e[6]}const m=n[0]&16?kn($s,[n&0&&{icon:Co.$c},n[0]&16&&_n(e[4])]):{};hn.$set(m);if(!zn||n[0]&64){pn.disabled=e[6]}if(!zn||n[0]&1&&mn!==(mn="Send message and receive "+e[0].multiMessageCount+" messages")){$e(pn,"title",mn)}const g=n[0]&16?kn(ks,[n&0&&{icon:Fo.eV},n[0]&16&&_n(e[4])]):{};vn.$set(g);if(!zn||n[0]&64){yn.disabled=e[6]}if(!zn||n[0]&1&&bn!==(bn="Try sending message "+e[0].retryMessageCount+" times")){$e(yn,"title",bn)}const v=n[0]&16?kn(Cs,[n&0&&{icon:bo.Df},n[0]&16&&_n(e[4])]):{};wn.$set(v);if(!zn||n[0]&64&&Cn!==(Cn=!e[6])){$n.disabled=Cn}const x=n[0]&16?kn(Fs,[n&0&&{icon:_o.TS},n[0]&16&&_n(e[4])]):{};En.$set(x);if(!zn||n[0]&64){Fn.disabled=e[6]}const $=n[0]&16?kn(Ms,[n&0&&{icon:xo.jP},n[0]&16&&_n(e[4]),Ms[2]]):{};Tn.$set($);if(!zn||n[0]&256)Je(jn,e[8]);if(!zn||n[0]&128)Je(Nn,e[7]);if(n[0]&64){Qe(Ln,"display",e[6]?"block":"none")}if(n[0]&512){Ts=Xs.getProvider(e[9]?.typeId).messageRoles;let t;for(t=0;t<Ts.length;t+=1){const s=Oo(e,Ts,t);if(Os[t]){Os[t].p(s,n)}else{Os[t]=ll(s);Os[t].c();Os[t].m(Un,null)}}for(;t<Os.length;t+=1){Os[t].d(1)}Os.length=Ts.length}if(n&0){As=Xs.providers.filter(gl);let s;for(s=0;s<As.length;s+=1){const o=Po(e,As,s);if(Rs[s]){Rs[s].p(o,n)}else{Rs[s]=rl(o);Rs[s].c();Rs[s].m(t,null)}}for(;s<Rs.length;s+=1){Rs[s].d(1)}Rs.length=As.length}},i(e){if(zn)return;cn(f.$$.fragment,e);for(let e=0;e<Wn.length;e+=1){cn(Yn[e])}cn(y.$$.fragment,e);for(let e=0;e<ts.length;e+=1){cn(ns[e])}cn(Pe.$$.fragment,e);cn(Re.$$.fragment,e);cn(Ne.$$.fragment,e);cn(Be.$$.fragment,e);cn(Ze.$$.fragment,e);cn(st.$$.fragment,e);for(let e=0;e<gs.length;e+=1){cn(ys[e])}cn(fn.$$.fragment,e);cn(hn.$$.fragment,e);cn(vn.$$.fragment,e);cn(wn.$$.fragment,e);cn(En.$$.fragment,e);cn(Tn.$$.fragment,e);zn=true},o(e){un(f.$$.fragment,e);Yn=Yn.filter(Boolean);for(let e=0;e<Yn.length;e+=1){un(Yn[e])}un(y.$$.fragment,e);ns=ns.filter(Boolean);for(let e=0;e<ns.length;e+=1){un(ns[e])}un(Pe.$$.fragment,e);un(Re.$$.fragment,e);un(Ne.$$.fragment,e);un(Be.$$.fragment,e);un(Ze.$$.fragment,e);un(st.$$.fragment,e);ys=ys.filter(Boolean);for(let e=0;e<ys.length;e+=1){un(ys[e])}un(fn.$$.fragment,e);un(hn.$$.fragment,e);un(vn.$$.fragment,e);un(wn.$$.fragment,e);un(En.$$.fragment,e);un(Tn.$$.fragment,e);zn=false},d(e){if(e)le(t);Xn(f);ie(Yn,e);Xn(y);ie(ns,e);Xn(Pe);Xn(Re);Xn(Ne);Xn(Be);Xn(Ze);Xn(st);ie(ys,e);Xn(fn);Xn(hn);Xn(vn);Xn(wn);Xn(En);Xn(Tn);ie(Os,e);ie(Rs,e);qn=false;a(Vn)}}}const cl=20;function ul(){return(new Date).toISOString().substring(0,19).replace("T"," ").replaceAll(":","-")}function fl(e){pl({target:e.target.closest(".message").querySelector("textarea")})}function dl({target:e}){const t=window.pageYOffset;e.style.height="0";e.style.overflow="hidden";e.style.height=`${Math.max(e.scrollHeight,cl)+2}px`;e.style.overflow="";window.scrollTo(window.pageXOffset,t)}function pl({target:e}){dl({target:e});setTimeout((()=>{dl({target:e})}),50)}function hl(){for(const e of document.querySelectorAll("textarea"))dl({target:e})}function ml(e){pl({target:e});e.addEventListener("input",dl);return{destroy:()=>e.removeEventListener("input",dl)}}const gl=e=>e.models.length>0;function yl(e,t,n){"use strict";Xs.init();let s={selectedEndpointIndex:0,selectedProxyIndex:0,multiMessageCount:10,retryMessageCount:5,density:"compact",maxTokens:1024,temperature:1,frequencyPenalty:0,presencePenalty:0};let o=[Xs.createDefaultProviderConfig()];let l=[Xs.createDefaultProxyConfig()];let i=[{id:1,role:"user",text:"Hello GPT-4!"}];let r={id:0,role:"user",text:""};let a=false;let c=null;let u="";let f=0;let d="Welcome!";let p=null;let h=false;let m=null;let g=null;let y=null;let v={scale:1.3};let b=Object.assign({},v);const x={compact:1.3,mobile:1.7,access:2.1};const $=new Intl.NumberFormat("en-gb",{style:"unit",unit:"second",unitDisplay:"short",maximumFractionDigits:0});const w=new Intl.NumberFormat("en-gb",{style:"unit",unit:"millisecond",unitDisplay:"short",maximumFractionDigits:2});Pt((()=>{n(3,i=qs("messages",i));n(1,o=qs("endpoints",o));n(2,l=qs("proxies",l));n(0,s=qs("options",s));try{const e=z(new URLSearchParams(location.search));if(e!==null)n(0,s.selectedEndpointIndex=e,s);if(location.protocol=="about:")document.querySelector("head style").innerHTML=""}catch(e){console.log(e)}n(29,h=true);n(30,y=document.documentElement);setInterval((()=>{if(a)n(28,f++,f)}),1e3)}));function k(e,...t){console.log(e,...t);n(8,d=e)}function _(){F("Endpoints",o)}function C(){F("Proxies",l)}function S(){F("Messages",i)}function F(e,t){Js("application/json",`NotAIChat ${e} ${ul()}.json`,JSON.stringify(t,null," "))}async function E(e){const t=await Bs(".json, application/json");if(!(t instanceof Array&&typeof t[0].typeId=="string"))return;n(1,o=e?[...o,...t]:t)}async function M(e){const t=await Bs(".json, application/json");if(!(t instanceof Array&&typeof t[0].typeId=="string"))return;n(1,o=e?[...o,...t]:t)}async function P(e){const t=await Bs(".json, application/json");if(!(t instanceof Array&&typeof t[0].text=="string"))return;n(3,i=e?[...i,...t]:t);await Ls(0);hl()}function T(){const e=Math.max(...i.map((e=>e.id)));return Number.isFinite(e)?e+1:1}async function O(e,t,o){k("Sending message");L({target:e.target});n(6,a=true);const l=Xs.createConnection(m,g,s);if(l==null){k("No endpoint selected");return}p=new AbortController;const r=i.at(-1);const u=i.filter((e=>e.text?.length>0));let d=r?.text==""||r.role=="assistant"?r:null;let h=false;let y;const v={get signal(){return p.signal},get extraText(){return`${y} in ${G()}`},get messages(){return u}};Object.assign(l,{onMessage(e){if(e.mode!="done"){if(d==null){d={id:T(),text:e.text,role:e.role};n(3,i=[...i,d])}else{d.text+=e.text;n(3,i=[...i]);h|=e.text.length>0;fl({target:[...document.querySelectorAll(".messages textarea")].slice(-1)[0]})}}if(e.mode=="complete"||e.mode=="done")k(`Received message${v.extraText}`,e);else e.mode=="append";k(`Receiving message${v.extraText}`,e)},onLogMessage(e){if(e.data)k(e.text,...e.data);else k(e.text)},onError(e){k(e.text,e.error)}});for(let e=0;e<t;e++){y=t>1?` (${e+1}/${t})`:"";n(28,[c,f]=[performance.now(),0],f);try{await l.sendRequest(v)}catch(e){if(e instanceof DOMException&&e.name=="AbortError"){k(`User cancelled message${v.extraText}`,e);return}else{k(`Unexpected error${v.extraText}: ${e.message} `+`(Console and Network tabs in DevTools may contain extra details)`,e);continue}}if(p.signal.aborted||o&&h)break}n(6,a=false)}async function A(e){return await O(e,1,false)}async function R(e){return await O(e,+s.retryMessageCount,true)}async function j(e){return await O(e,+s.multiMessageCount,false)}function I(){if(p==null)return;n(6,a=false);p.abort();k("Receiving message cancelled")}function L(e){if(r.text=="")return;n(3,i=[...i,{id:T(),text:r.text,role:r.role}]);n(5,r.text="",r);fl(e)}async function N(e){n(3,i=i.filter(((t,n)=>n!==e)));await Ls(0);hl()}function D(e,t){if(i[e]===undefined||i[t]===undefined)return;n(3,[i[e],i[t]]=[i[t],i[e]],i);n(3,i=[...i])}async function U(){try{await navigator.clipboard.writeText(i.map((e=>e.text)).join("\n"));k("Messages copied to clipboard")}catch(e){k(`Failed to copy messages to clipboard: ${e.message}`,e)}}function H(){n(1,o=[...o,Xs.createDefaultProviderConfig()])}function z(e){const t={name:e.get("name")??"Shared endpoint",provider:e.get("provider"),key:e.get("key"),url:e.get("url")};const s=o.findIndex((e=>e.key==t.key));if(s!=-1)return s;else if(t.key==null)return null;const l=Xs.createDefaultProviderConfig().key;n(1,o=[...o.filter((e=>e.key!=l)),t]);return o.length-1}async function q(e){const t=o[e];const n=new URLSearchParams({name:t.name,provider:t.provider,key:t.key,url:t.url});const s=`${location.origin}${location.pathname}?${n}`;try{await navigator.clipboard.writeText(s);k(`Endpoint share link copied to clipboard: ${s}`)}catch(e){k(`Failed to copy endpoint share link to clipboard: ${e.message}`,e)}}function V(e){n(1,o=o.filter(((t,n)=>n!==e)));if(o[s.selectedEndpointIndex]===undefined)n(0,s.selectedEndpointIndex=null,s)}function J(){n(2,l=[...l,Xs.createDefaultProxyConfig()])}function B(e){n(2,l=l.filter(((t,n)=>n!==e)));if(l[s.selectedProxyIndex]===undefined)n(0,s.selectedProxyIndex=null,s)}function W(){return $.format((performance.now()-c)/1e3)}function G(){return w.format(performance.now()-c)}const Y=[[],[]];function Q(){s.selectedEndpointIndex=this.__value;n(0,s)}function X(e,t){e[t].name=this.value;n(1,o)}function K(e,t){e[t].typeId=Ze(this);n(1,o)}function Z(e,t){e[t].key=this.value;n(1,o)}function ee(e,t){e[t].url=this.value;n(1,o)}function te(e,t){e[t].key=this.value;n(1,o)}function ne(e,t){e[t].apiVersion=this.value;n(1,o)}function se(e,t){e[t].resource=this.value;n(1,o)}function oe(e,t){e[t].deployment=this.value;n(1,o)}function le(e,t){e[t].key=this.value;n(1,o)}function ie(e,t){e[t].workspace=this.value;n(1,o)}function re(e,t){e[t].key=this.value;n(1,o)}function ae(e,t){e[t].url=this.value;n(1,o)}function ce(e,t){e[t].model=this.value;n(1,o)}function ue(e,t){e[t].rawUrl=this.checked;n(1,o)}function fe(e,t){e[t].stream=this.checked;n(1,o)}const de=e=>q(e);const pe=e=>V(e);function he(){s.selectedProxyIndex=this.__value;n(0,s)}function me(e,t){e[t].name=this.value;n(2,l)}function ge(e,t){e[t].typeId=Ze(this);n(2,l)}function ye(e,t){e[t].url=this.value;n(2,l)}const ve=e=>B(e);function be(){s.maxTokens=this.value;n(0,s)}function xe(){s.temperature=this.value;n(0,s)}function $e(){s.frequencyPenalty=this.value;n(0,s)}function we(){s.presencePenalty=this.value;n(0,s)}function ke(){s.density=Ze(this);n(0,s)}function _e(){s.multiMessageCount=this.value;n(0,s)}function Ce(){s.retryMessageCount=this.value;n(0,s)}const Se=()=>E(false);const Fe=()=>E(true);const Ee=()=>_();const Me=()=>P(false);const Pe=()=>P(true);const Te=()=>S();function Oe(e,t){e[t].role=this.value;n(3,i)}function Ae(e,t){e[t].text=this.value;n(3,i)}const Re=e=>D(e,e-1);const je=e=>D(e,e+1);const Ie=e=>N(e);function Le(){r.role=this.value;n(5,r)}function Ne(){r.text=this.value;n(5,r)}const De=e=>A(e);const Ue=e=>j(e);const He=e=>R(e);const ze=e=>L(e);e.$$.update=()=>{if(e.$$.dirty[0]&536870927){e:{if(h){Vs("messages",i);Vs("endpoints",o);Vs("proxies",l);Vs("options",s)}}}if(e.$$.dirty[0]&1073741825){e:y!==null&&(e=>n(30,y.className=`d-${e.density}`,y))(s)}if(e.$$.dirty[0]&1){e:s.density!==null&&hl()}if(e.$$.dirty[0]&1){e:n(4,v={scale:x[s.density]})}if(e.$$.dirty[0]&16){e:n(10,b=Object.assign({},v,{style:"margin: 0 calc(var(--gap) * 1.5) 0 calc(var(--gap) * 0.5)"}))}if(e.$$.dirty[0]&268435456){e:n(7,u=(()=>W())(f))}if(e.$$.dirty[0]&3){e:n(9,m=o[s.selectedEndpointIndex])}if(e.$$.dirty[0]&5){e:g=l[s.selectedProxyIndex]}};return[s,o,l,i,v,r,a,u,d,m,b,_,S,E,P,A,R,j,I,L,N,D,U,H,q,V,J,B,f,h,y,Q,Y,X,K,Z,ee,te,ne,se,oe,le,ie,re,ae,ce,ue,fe,de,pe,he,me,ge,ye,ve,be,xe,$e,we,ke,_e,Ce,Se,Fe,Ee,Me,Pe,Te,Oe,Ae,Re,je,Ie,Le,Ne,De,Ue,He,ze]}class vl extends ts{constructor(e){super();Zn(this,e,yl,al,u,{},null,[-1,-1,-1,-1])}}const bl=vl;const xl=new bl({target:document.querySelector("#root")});const $l=null&&xl})()})();</script></body></html>